<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLipMouse/FABI ESP32 firmware: /home/beni/sync/Projects/FH/FLipMouse-esp32/main/function_tasks/task_smarthome.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLipMouse/FABI ESP32 firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li><li class="navelem"><a class="el" href="dir_dd44d79ba9a472f66a6851d54403189f.html">function_tasks</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">task_smarthome.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>CONTINOUS TASK - MQTT handling.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;freertos/FreeRTOS.h&gt;</code><br />
<code>#include &lt;freertos/event_groups.h&gt;</code><br />
<code>#include &lt;freertos/queue.h&gt;</code><br />
<code>#include &lt;freertos/task.h&gt;</code><br />
<code>#include &lt;esp_log.h&gt;</code><br />
<code>#include &quot;<a class="el" href="common_8h_source.html">common.h</a>&quot;</code><br />
<code>#include &lt;inttypes.h&gt;</code><br />
<code>#include &quot;<a class="el" href="hal__storage_8h_source.html">hal_storage.h</a>&quot;</code><br />
<code>#include &quot;lwip/sockets.h&quot;</code><br />
<code>#include &quot;lwip/dns.h&quot;</code><br />
<code>#include &quot;lwip/netdb.h&quot;</code><br />
<code>#include &quot;mqtt_client.h&quot;</code><br />
<code>#include &quot;esp_err.h&quot;</code><br />
<code>#include &quot;esp_wifi.h&quot;</code><br />
<code>#include &quot;esp_event_loop.h&quot;</code><br />
<code>#include &quot;esp_event_legacy.h&quot;</code><br />
<code>#include &quot;esp_http_client.h&quot;</code><br />
<code>#include &quot;nvs.h&quot;</code><br />
<code>#include &quot;nvs_flash.h&quot;</code><br />
</div>
<p><a href="task__smarthome_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:abf45b50ab8b57f04bef31dc53b4ca880"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__smarthome_8h.html#abf45b50ab8b57f04bef31dc53b4ca880">TASK_MQTT_STACKSIZE</a>&#160;&#160;&#160;4096</td></tr>
<tr class="memdesc:abf45b50ab8b57f04bef31dc53b4ca880"><td class="mdescLeft">&#160;</td><td class="mdescRight">Stack size for the MQTT task.  <a href="#abf45b50ab8b57f04bef31dc53b4ca880">More...</a><br /></td></tr>
<tr class="separator:abf45b50ab8b57f04bef31dc53b4ca880"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a028c7f08d77e361f5624a8259b88788a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__smarthome_8h.html#a028c7f08d77e361f5624a8259b88788a">MQTT_DELIMITER</a>&#160;&#160;&#160;':'</td></tr>
<tr class="memdesc:a028c7f08d77e361f5624a8259b88788a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default mqtt delimter character.  <a href="#a028c7f08d77e361f5624a8259b88788a">More...</a><br /></td></tr>
<tr class="separator:a028c7f08d77e361f5624a8259b88788a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ae09eb75c3fed43ee85fd92c1f710b600"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__smarthome_8h.html#ae09eb75c3fed43ee85fd92c1f710b600">taskMQTTDeInit</a> (void)</td></tr>
<tr class="memdesc:ae09eb75c3fed43ee85fd92c1f710b600"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deinit the MQTT task and the wifi.  <a href="#ae09eb75c3fed43ee85fd92c1f710b600">More...</a><br /></td></tr>
<tr class="separator:ae09eb75c3fed43ee85fd92c1f710b600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ada3e20e5219fc786b19060f089dd8b24"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__smarthome_8h.html#ada3e20e5219fc786b19060f089dd8b24">taskREST</a> (char *URL)</td></tr>
<tr class="memdesc:ada3e20e5219fc786b19060f089dd8b24"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish data via MQTT.  <a href="#ada3e20e5219fc786b19060f089dd8b24">More...</a><br /></td></tr>
<tr class="separator:ada3e20e5219fc786b19060f089dd8b24"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6afc039be68c1a831778fe33bd2412a9"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__smarthome_8h.html#a6afc039be68c1a831778fe33bd2412a9">taskMQTTPublish</a> (char *topic_payload)</td></tr>
<tr class="memdesc:a6afc039be68c1a831778fe33bd2412a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish data via MQTT.  <a href="#a6afc039be68c1a831778fe33bd2412a9">More...</a><br /></td></tr>
<tr class="separator:a6afc039be68c1a831778fe33bd2412a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5684a2bbe23145855d2a166fa8379ece"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__smarthome_8h.html#a5684a2bbe23145855d2a166fa8379ece">taskWifiInit</a> (void)</td></tr>
<tr class="memdesc:a5684a2bbe23145855d2a166fa8379ece"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init Wifi.  <a href="#a5684a2bbe23145855d2a166fa8379ece">More...</a><br /></td></tr>
<tr class="separator:a5684a2bbe23145855d2a166fa8379ece"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>CONTINOUS TASK - MQTT handling. </p>
<p>This module is used for connecting the FLipMouse/FABI to a MQTT broker.</p>
<dl class="section warning"><dt>Warning</dt><dd>Please note, only one WiFi mode is possible: either this device operates in AP mode and serves the webGUI (see <a class="el" href="task__webgui_8h.html" title="CONTINOUS TASK - Web server &amp; WebGUI handling. ">task_webgui.h</a>) OR it operates in station mode, connects to a given Wifi and transmits data via MQTT (if enabled) </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Initialise this module only if a MQTT command is used in the configuration. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="task__webgui_8h.html" title="CONTINOUS TASK - Web server &amp; WebGUI handling. ">task_webgui.h</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="task__smarthome_8h_source.html">task_smarthome.h</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a028c7f08d77e361f5624a8259b88788a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a028c7f08d77e361f5624a8259b88788a">&#9670;&nbsp;</a></span>MQTT_DELIMITER</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MQTT_DELIMITER&#160;&#160;&#160;':'</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Default mqtt delimter character. </p>
<dl class="section note"><dt>Note</dt><dd>This is the default character, if no other is set via "AT MS". It is used to split the "AT MQ" string into topic and payload. </dd></dl>

<p class="definition">Definition at line <a class="el" href="task__smarthome_8h_source.html#l00070">70</a> of file <a class="el" href="task__smarthome_8h_source.html">task_smarthome.h</a>.</p>

</div>
</div>
<a id="abf45b50ab8b57f04bef31dc53b4ca880"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abf45b50ab8b57f04bef31dc53b4ca880">&#9670;&nbsp;</a></span>TASK_MQTT_STACKSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define TASK_MQTT_STACKSIZE&#160;&#160;&#160;4096</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Stack size for the MQTT task. </p>

<p class="definition">Definition at line <a class="el" href="task__smarthome_8h_source.html#l00065">65</a> of file <a class="el" href="task__smarthome_8h_source.html">task_smarthome.h</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="ae09eb75c3fed43ee85fd92c1f710b600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae09eb75c3fed43ee85fd92c1f710b600">&#9670;&nbsp;</a></span>taskMQTTDeInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t taskMQTTDeInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deinit the MQTT task and the wifi. </p>
<p>This function deactives MQTT/WiFi in station mode. It is necessary if the webGUI should be switched on.</p>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise</dd></dl>
<p>Deinit the MQTT task and the wifi.</p>
<p>This function deactives MQTT</p>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="task__smarthome_8c_source.html#l00313">313</a> of file <a class="el" href="task__smarthome_8c_source.html">task_smarthome.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__smarthome_8c_source.html#l00334">taskWifiDeInit()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__smarthome_8h_ae09eb75c3fed43ee85fd92c1f710b600_cgraph.png" border="0" usemap="#task__smarthome_8h_ae09eb75c3fed43ee85fd92c1f710b600_cgraph" alt=""/></div>
<map name="task__smarthome_8h_ae09eb75c3fed43ee85fd92c1f710b600_cgraph" id="task__smarthome_8h_ae09eb75c3fed43ee85fd92c1f710b600_cgraph">
<area shape="rect" id="node2" href="task__smarthome_8c.html#a8da1bd05d2cb75035c66535221908a63" title="Check for eventgroup before accessing it. Will be initialized if not available. " alt="" coords="172,5,293,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__smarthome_8h_ae09eb75c3fed43ee85fd92c1f710b600_icgraph.png" border="0" usemap="#task__smarthome_8h_ae09eb75c3fed43ee85fd92c1f710b600_icgraph" alt=""/></div>
<map name="task__smarthome_8h_ae09eb75c3fed43ee85fd92c1f710b600_icgraph" id="task__smarthome_8h_ae09eb75c3fed43ee85fd92c1f710b600_icgraph">
<area shape="rect" id="node2" href="task__smarthome_8c.html#a7f500c758e55aef71ea45019352a280f" title="Deinit wifi. " alt="" coords="172,5,277,32"/>
</map>
</div>

</div>
</div>
<a id="a6afc039be68c1a831778fe33bd2412a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6afc039be68c1a831778fe33bd2412a9">&#9670;&nbsp;</a></span>taskMQTTPublish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t taskMQTTPublish </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>topic_payload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish data via MQTT. </p>
<p>This function publishes the given data. The parameter topic_payload will be split into the topic name and the corresponding payload to publish. The splitting is done by the currently set MQTT delimiter character, which can be modified with "AT MS". MQTT_DELIMITER will be used if no other character is set.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="task__smarthome_8h.html#a028c7f08d77e361f5624a8259b88788a" title="Default mqtt delimter character. ">MQTT_DELIMITER</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">topic_payload</td><td>Topic name and payload to be published. E.g., "/topic1:ON". Delimiter can be changed via NVS key NVS_MQTT_DELIM. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Wifi will be enabled here, if MQTT is not active. </dd>
<dd>
Wifi credentials and broker information must be in NVS BEFORE calling this function. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a491fd65b6e1cef337b9a99ac4f6002bb" title="NVS key for wifi name (when connected as client!) ">NVS_STATIONNAME</a> </dd>
<dd>
<a class="el" href="common_8h.html#ad33120b91260e67b77c9e3888c47d990" title="NVS key for wifi password (when connected as client!) ">NVS_STATIONPW</a> </dd>
<dd>
<a class="el" href="common_8h.html#a90072969f5970a88eb341d777d1f9e7c" title="NVS key for the MQTT broker. ">NVS_MQTT_BROKER</a></dd></dl>
<p>This function publishes the given data. The parameter topic_payload will be split into the topic name and the corresponding payload to publish. The splitting is done by the currently set MQTT delimiter character, which can be modified with "AT MS". MQTT_DELIMITER will be used if no other character is set.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="task__smarthome_8h.html#a028c7f08d77e361f5624a8259b88788a" title="Default mqtt delimter character. ">MQTT_DELIMITER</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="task__smarthome_8c_source.html#l00366">366</a> of file <a class="el" href="task__smarthome_8c_source.html">task_smarthome.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00944">cmdMq()</a>, and <a class="el" href="handler__vb_8c_source.html#l00071">handler_vb()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__smarthome_8h_a6afc039be68c1a831778fe33bd2412a9_cgraph.png" border="0" usemap="#task__smarthome_8h_a6afc039be68c1a831778fe33bd2412a9_cgraph" alt=""/></div>
<map name="task__smarthome_8h_a6afc039be68c1a831778fe33bd2412a9_cgraph" id="task__smarthome_8h_a6afc039be68c1a831778fe33bd2412a9_cgraph">
<area shape="rect" id="node2" href="task__smarthome_8c.html#ae7ad6f5bfc7cbfc9f6a223fcf697c8f6" title="Init the MQTT client and wifi (if necessary) " alt="" coords="180,107,283,133"/>
<area shape="rect" id="node5" href="hal__storage_8c.html#a63ec8e05a2bb4c214600e94b8ab05eea" title="Load a string from NVS (global, no slot assignment) " alt="" coords="515,107,689,133"/>
<area shape="rect" id="node3" href="task__smarthome_8c.html#a8da1bd05d2cb75035c66535221908a63" title="Check for eventgroup before accessing it. Will be initialized if not available. " alt="" coords="541,5,663,32"/>
<area shape="rect" id="node4" href="task__smarthome_8c.html#a5684a2bbe23145855d2a166fa8379ece" title="Init Wifi. " alt="" coords="355,56,443,83"/>
<area shape="rect" id="node8" href="task__smarthome_8c.html#a5af8e8260f5604ece0ee37eb577e0e26" title="Default event_handler for mqtt. " alt="" coords="331,157,467,184"/>
<area shape="rect" id="node6" href="task__smarthome_8c.html#a070dec70b0e96f3a031a3fa803b517cd" title="Default event handler for Wifi. " alt="" coords="527,56,677,83"/>
<area shape="rect" id="node7" href="task__smarthome_8c.html#a5a85685932ce7bf4b7239ab1b133cbdd" title="Import from internal wifi code for decoding error messages. " alt="" coords="737,56,851,83"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__smarthome_8h_a6afc039be68c1a831778fe33bd2412a9_icgraph.png" border="0" usemap="#task__smarthome_8h_a6afc039be68c1a831778fe33bd2412a9_icgraph" alt=""/></div>
<map name="task__smarthome_8h_a6afc039be68c1a831778fe33bd2412a9_icgraph" id="task__smarthome_8h_a6afc039be68c1a831778fe33bd2412a9_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a6687f2598d6dc738c90d3be28cf90184" title="cmdMq" alt="" coords="190,5,255,32"/>
<area shape="rect" id="node3" href="handler__vb_8c.html#a60c71b4a6cc8a9a3e9e8a3c8e36cffa0" title="VB event handler, triggering VB general actions. " alt="" coords="180,56,265,83"/>
<area shape="rect" id="node4" href="handler__vb_8h.html#ac54a8826a70d3aaf5c284bab02b93444" title="Init for the VB handler. " alt="" coords="313,56,423,83"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="471,56,549,83"/>
</map>
</div>

</div>
</div>
<a id="ada3e20e5219fc786b19060f089dd8b24"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ada3e20e5219fc786b19060f089dd8b24">&#9670;&nbsp;</a></span>taskREST()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t taskREST </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>uri</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish data via MQTT. </p>
<p>This function publishes the given data. The parameter topic_payload will be split into the topic name and the corresponding payload to publish. The splitting is done by the currently set MQTT delimiter character, which can be modified with "AT MS". MQTT_DELIMITER will be used if no other character is set.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="task__smarthome_8h.html#a028c7f08d77e361f5624a8259b88788a" title="Default mqtt delimter character. ">MQTT_DELIMITER</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise</dd></dl>
<p>Publish data via MQTT.</p>
<p>This function calls the given URL via http/s GET. If Wifi is not initialized, it will be started. On the first call, there might be a delay until wifi is connected.</p>
<dl class="section note"><dt>Note</dt><dd>Wifi is activated here, if this was not done before. There might be a timeout or missed REST call if wifi is not active. Nevertheless, we will wait 5s for the Wifi to be active. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="task__smarthome_8c_source.html#l00424">424</a> of file <a class="el" href="task__smarthome_8c_source.html">task_smarthome.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00956">cmdRe()</a>, and <a class="el" href="handler__vb_8c_source.html#l00071">handler_vb()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__smarthome_8h_ada3e20e5219fc786b19060f089dd8b24_cgraph.png" border="0" usemap="#task__smarthome_8h_ada3e20e5219fc786b19060f089dd8b24_cgraph" alt=""/></div>
<map name="task__smarthome_8h_ada3e20e5219fc786b19060f089dd8b24_cgraph" id="task__smarthome_8h_ada3e20e5219fc786b19060f089dd8b24_cgraph">
<area shape="rect" id="node2" href="task__smarthome_8c.html#a5684a2bbe23145855d2a166fa8379ece" title="Init Wifi. " alt="" coords="136,56,224,83"/>
<area shape="rect" id="node3" href="task__smarthome_8c.html#a8da1bd05d2cb75035c66535221908a63" title="Check for eventgroup before accessing it. Will be initialized if not available. " alt="" coords="299,5,420,32"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a63ec8e05a2bb4c214600e94b8ab05eea" title="Load a string from NVS (global, no slot assignment) " alt="" coords="272,56,447,83"/>
<area shape="rect" id="node5" href="task__smarthome_8c.html#a070dec70b0e96f3a031a3fa803b517cd" title="Default event handler for Wifi. " alt="" coords="284,107,435,133"/>
<area shape="rect" id="node6" href="task__smarthome_8c.html#a5a85685932ce7bf4b7239ab1b133cbdd" title="Import from internal wifi code for decoding error messages. " alt="" coords="495,107,608,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__smarthome_8h_ada3e20e5219fc786b19060f089dd8b24_icgraph.png" border="0" usemap="#task__smarthome_8h_ada3e20e5219fc786b19060f089dd8b24_icgraph" alt=""/></div>
<map name="task__smarthome_8h_ada3e20e5219fc786b19060f089dd8b24_icgraph" id="task__smarthome_8h_ada3e20e5219fc786b19060f089dd8b24_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a29b76b745eba87f47ca191b0bf47282e" title="cmdRe" alt="" coords="147,5,211,32"/>
<area shape="rect" id="node3" href="handler__vb_8c.html#a60c71b4a6cc8a9a3e9e8a3c8e36cffa0" title="VB event handler, triggering VB general actions. " alt="" coords="136,56,221,83"/>
<area shape="rect" id="node4" href="handler__vb_8h.html#ac54a8826a70d3aaf5c284bab02b93444" title="Init for the VB handler. " alt="" coords="269,56,379,83"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="427,56,505,83"/>
</map>
</div>

</div>
</div>
<a id="a5684a2bbe23145855d2a166fa8379ece"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5684a2bbe23145855d2a166fa8379ece">&#9670;&nbsp;</a></span>taskWifiInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t taskWifiInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Init Wifi. </p>
<p>This init function initializes the wifi in station mode.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a491fd65b6e1cef337b9a99ac4f6002bb" title="NVS key for wifi name (when connected as client!) ">NVS_STATIONNAME</a> </dd>
<dd>
<a class="el" href="common_8h.html#ad33120b91260e67b77c9e3888c47d990" title="NVS key for wifi password (when connected as client!) ">NVS_STATIONPW</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Please activate only if necessary by any configuration. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="task__smarthome_8c_source.html#l00227">227</a> of file <a class="el" href="task__smarthome_8c_source.html">task_smarthome.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__smarthome_8c_source.html#l00178">taskMQTTInit()</a>, and <a class="el" href="task__smarthome_8c_source.html#l00424">taskREST()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__smarthome_8h_a5684a2bbe23145855d2a166fa8379ece_cgraph.png" border="0" usemap="#task__smarthome_8h_a5684a2bbe23145855d2a166fa8379ece_cgraph" alt=""/></div>
<map name="task__smarthome_8h_a5684a2bbe23145855d2a166fa8379ece_cgraph" id="task__smarthome_8h_a5684a2bbe23145855d2a166fa8379ece_cgraph">
<area shape="rect" id="node2" href="task__smarthome_8c.html#a8da1bd05d2cb75035c66535221908a63" title="Check for eventgroup before accessing it. Will be initialized if not available. " alt="" coords="168,5,289,32"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a63ec8e05a2bb4c214600e94b8ab05eea" title="Load a string from NVS (global, no slot assignment) " alt="" coords="141,56,316,83"/>
<area shape="rect" id="node4" href="task__smarthome_8c.html#a070dec70b0e96f3a031a3fa803b517cd" title="Default event handler for Wifi. " alt="" coords="153,107,304,133"/>
<area shape="rect" id="node5" href="task__smarthome_8c.html#a5a85685932ce7bf4b7239ab1b133cbdd" title="Import from internal wifi code for decoding error messages. " alt="" coords="364,107,477,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__smarthome_8h_a5684a2bbe23145855d2a166fa8379ece_icgraph.png" border="0" usemap="#task__smarthome_8h_a5684a2bbe23145855d2a166fa8379ece_icgraph" alt=""/></div>
<map name="task__smarthome_8h_a5684a2bbe23145855d2a166fa8379ece_icgraph" id="task__smarthome_8h_a5684a2bbe23145855d2a166fa8379ece_icgraph">
<area shape="rect" id="node2" href="task__smarthome_8c.html#ae7ad6f5bfc7cbfc9f6a223fcf697c8f6" title="Init the MQTT client and wifi (if necessary) " alt="" coords="141,5,244,32"/>
<area shape="rect" id="node8" href="task__smarthome_8h.html#ada3e20e5219fc786b19060f089dd8b24" title="Publish data via MQTT. " alt="" coords="151,56,234,83"/>
<area shape="rect" id="node3" href="task__smarthome_8h.html#a6afc039be68c1a831778fe33bd2412a9" title="Publish data via MQTT. " alt="" coords="292,5,419,32"/>
<area shape="rect" id="node4" href="task__commands_8c.html#a6687f2598d6dc738c90d3be28cf90184" title="cmdMq" alt="" coords="477,5,542,32"/>
<area shape="rect" id="node5" href="handler__vb_8c.html#a60c71b4a6cc8a9a3e9e8a3c8e36cffa0" title="VB event handler, triggering VB general actions. " alt="" coords="467,56,552,83"/>
<area shape="rect" id="node6" href="handler__vb_8h.html#ac54a8826a70d3aaf5c284bab02b93444" title="Init for the VB handler. " alt="" coords="600,56,709,83"/>
<area shape="rect" id="node7" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="757,56,836,83"/>
<area shape="rect" id="node9" href="task__commands_8c.html#a29b76b745eba87f47ca191b0bf47282e" title="cmdRe" alt="" coords="323,107,387,133"/>
</map>
</div>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
