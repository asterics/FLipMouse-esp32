<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLipMouse/FABI ESP32 firmware: Blockdiagram of v3</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLipMouse/FABI ESP32 firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Blockdiagram of v3 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>This block diagram shows the current (more exactly: future) assignment of hardware and peripherals to the ESP32 and the companion USB chip (LPC11U24).</p>
<div class="image">
<img src="blockdiagram.png" alt="blockdiagram.png"/>
<div class="caption">
FlipMouse v3 blockdiagram</div></div>
 <h2>Remarks</h2>
<ul>
<li>Power switching: due to USB limitations, we are allowed to have a maximum supply current of 2.5mA in suspend mode. This is limiting our possibilities with the ESP32. The solution is a double 3V3 power domain. We have one LDO for the LPC chip and a TSR-1 SMPS converter for the ESP32 (and all other parts of the circuit). In case of USB suspend, all parts except the LPC chip are switched off. The supply voltages on the extension/sensor board headers are switched off as well.</li>
<li>The ADC which is built in the ESP32 is not really good. From 3.1b onward, we use the ADC in the LPC, and transfer the ADC readings via I2C</li>
<li>Communication between LPC&lt;-&gt;ESP32 is done via 2 different interfaces: UART (115200, 8N1) and I2C (100kHz, ESP32 is master). The UART interface is dedicated to all USB-CDC communication, the LPC chip acts as a transparent bridge to the host PC. I2C transfers all other data: ADC readings from LPC to ESP32, HID related commands from ESP32 to LPC and any future implemented controlling commands </li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
