<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLipMouse/FABI ESP32 firmware: /home/beni/sync/Projects/FH/FLipMouse-esp32/main/config_switcher.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLipMouse/FABI ESP32 firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">config_switcher.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>TASK - This module takes care of configuration loading.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="config__switcher_8h_source.html">config_switcher.h</a>&quot;</code><br />
</div>
<p><a href="config__switcher_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8c.html#a7ce0df38eb467e59f209470c8f5ac4e6">LOG_TAG</a>&#160;&#160;&#160;&quot;cfgsw&quot;</td></tr>
<tr class="memdesc:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Tag for ESP_LOG logging.  <a href="#a7ce0df38eb467e59f209470c8f5ac4e6">More...</a><br /></td></tr>
<tr class="separator:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a03b195571a9c2942266412cc23edc916"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8c.html#a03b195571a9c2942266412cc23edc916">LOG_LEVEL_CFGSW</a>&#160;&#160;&#160;ESP_LOG_INFO</td></tr>
<tr class="memdesc:a03b195571a9c2942266412cc23edc916"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set a global log limit for this file.  <a href="#a03b195571a9c2942266412cc23edc916">More...</a><br /></td></tr>
<tr class="separator:a03b195571a9c2942266412cc23edc916"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4a49dfb0d8cde2c693f0340e885fb50c"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8c.html#a4a49dfb0d8cde2c693f0340e885fb50c">CONFIGSWITCHERTASK_PERMANENT_STACKSIZE</a>&#160;&#160;&#160;4096</td></tr>
<tr class="separator:a4a49dfb0d8cde2c693f0340e885fb50c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a921538bec34d128a44a748fd5a2c391f"><td class="memItemLeft" align="right" valign="top"><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8c.html#a921538bec34d128a44a748fd5a2c391f">configGetCurrent</a> (void)</td></tr>
<tr class="memdesc:a921538bec34d128a44a748fd5a2c391f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the current config struct.  <a href="#a921538bec34d128a44a748fd5a2c391f">More...</a><br /></td></tr>
<tr class="separator:a921538bec34d128a44a748fd5a2c391f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a12e56de03844b9ca18468658c7f9263f"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8c.html#a12e56de03844b9ca18468658c7f9263f">configTriggerUpdate</a> (void)</td></tr>
<tr class="memdesc:a12e56de03844b9ca18468658c7f9263f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Trigger a config update.  <a href="#a12e56de03844b9ca18468658c7f9263f">More...</a><br /></td></tr>
<tr class="separator:a12e56de03844b9ca18468658c7f9263f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8fae43accd789bf2355c79ff44c2ae9"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8c.html#af8fae43accd789bf2355c79ff44c2ae9">configUpdate</a> (TickType_t time)</td></tr>
<tr class="memdesc:af8fae43accd789bf2355c79ff44c2ae9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Request config update.  <a href="#af8fae43accd789bf2355c79ff44c2ae9">More...</a><br /></td></tr>
<tr class="separator:af8fae43accd789bf2355c79ff44c2ae9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af5af5079d1982d42e165039e6de7e40a"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a">configSwitcherTask</a> (void *params)</td></tr>
<tr class="memdesc:af5af5079d1982d42e165039e6de7e40a"><td class="mdescLeft">&#160;</td><td class="mdescRight">TASK - Config switcher task, internal config reloading.  <a href="#af5af5079d1982d42e165039e6de7e40a">More...</a><br /></td></tr>
<tr class="separator:af5af5079d1982d42e165039e6de7e40a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aafed047c8d04b814a85239e031cbad7b"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8c.html#aafed047c8d04b814a85239e031cbad7b">configSwitcherInit</a> (void)</td></tr>
<tr class="memdesc:aafed047c8d04b814a85239e031cbad7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initializing the config switching functionality.  <a href="#aafed047c8d04b814a85239e031cbad7b">More...</a><br /></td></tr>
<tr class="separator:aafed047c8d04b814a85239e031cbad7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:abd2fb9b048f1de98ee98dd54077541c2"><td class="memItemLeft" align="right" valign="top">TaskHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8c.html#abd2fb9b048f1de98ee98dd54077541c2">configswitcher_handle</a></td></tr>
<tr class="memdesc:abd2fb9b048f1de98ee98dd54077541c2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task handle for the config switcher.  <a href="#abd2fb9b048f1de98ee98dd54077541c2">More...</a><br /></td></tr>
<tr class="separator:abd2fb9b048f1de98ee98dd54077541c2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7265e5121ad81b52fb8a0e4334b42118"><td class="memItemLeft" align="right" valign="top">SemaphoreHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8c.html#a7265e5121ad81b52fb8a0e4334b42118">configUpdatePending</a> = NULL</td></tr>
<tr class="memdesc:a7265e5121ad81b52fb8a0e4334b42118"><td class="mdescLeft">&#160;</td><td class="mdescRight">Semaphore for detecting pending config updates.  <a href="#a7265e5121ad81b52fb8a0e4334b42118">More...</a><br /></td></tr>
<tr class="separator:a7265e5121ad81b52fb8a0e4334b42118"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a73c577cdbcaa9439f9458a9e5d39c143"><td class="memItemLeft" align="right" valign="top"><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="config__switcher_8c.html#a73c577cdbcaa9439f9458a9e5d39c143">currentConfigLoaded</a></td></tr>
<tr class="memdesc:a73c577cdbcaa9439f9458a9e5d39c143"><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently loaded configuration.  <a href="#a73c577cdbcaa9439f9458a9e5d39c143">More...</a><br /></td></tr>
<tr class="separator:a73c577cdbcaa9439f9458a9e5d39c143"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>TASK - This module takes care of configuration loading. </p>
<p>The config_switcher module is used to update the configuration. If a new configuration should be loaded from the storage, corresponding storage calls are done, as well as user feedback (LED/buzzer)</p>
<p>A slot configuration is provided by the config_storage reference to other modules, which is controlled by this module. </p>

<p class="definition">Definition in file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a4a49dfb0d8cde2c693f0340e885fb50c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4a49dfb0d8cde2c693f0340e885fb50c">&#9670;&nbsp;</a></span>CONFIGSWITCHERTASK_PERMANENT_STACKSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIGSWITCHERTASK_PERMANENT_STACKSIZE&#160;&#160;&#160;4096</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Stacksize for continous task configSwitcherTask. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="TASK - Config switcher task, internal config reloading. ">configSwitcherTask</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="config__switcher_8c_source.html#l00041">41</a> of file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00285">configSwitcherInit()</a>.</p>

</div>
</div>
<a id="a03b195571a9c2942266412cc23edc916"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a03b195571a9c2942266412cc23edc916">&#9670;&nbsp;</a></span>LOG_LEVEL_CFGSW</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_LEVEL_CFGSW&#160;&#160;&#160;ESP_LOG_INFO</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set a global log limit for this file. </p>

<p class="definition">Definition at line <a class="el" href="config__switcher_8c_source.html#l00037">37</a> of file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00285">configSwitcherInit()</a>.</p>

</div>
</div>
<a id="a7ce0df38eb467e59f209470c8f5ac4e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ce0df38eb467e59f209470c8f5ac4e6">&#9670;&nbsp;</a></span>LOG_TAG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_TAG&#160;&#160;&#160;&quot;cfgsw&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Tag for ESP_LOG logging. </p>

<p class="definition">Definition at line <a class="el" href="config__switcher_8c_source.html#l00035">35</a> of file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00285">configSwitcherInit()</a>, <a class="el" href="config__switcher_8c_source.html#l00150">configSwitcherTask()</a>, <a class="el" href="config__switcher_8c_source.html#l00087">configTriggerUpdate()</a>, and <a class="el" href="config__switcher_8c_source.html#l00116">configUpdate()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a921538bec34d128a44a748fd5a2c391f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a921538bec34d128a44a748fd5a2c391f">&#9670;&nbsp;</a></span>configGetCurrent()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a>* configGetCurrent </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the current config struct. </p>
<p>This method is used to get a reference to the current config struct. The caller can use this reference to change the configuration and update the config afterwards (via the config_switcher queue).</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a4701c432a28c389e4b8557f2fa3323d1" title="Queue to receive config changing commands. ">config_switcher</a> </dd>
<dd>
<a class="el" href="config__switcher_8c.html#a73c577cdbcaa9439f9458a9e5d39c143" title="Currently loaded configuration. ">currentConfigLoaded</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Pointer to the current config struct </dd></dl>

<p class="definition">Definition at line <a class="el" href="config__switcher_8c_source.html#l00073">73</a> of file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__debouncer_8c_source.html#l00218">debouncerCallback()</a>, <a class="el" href="fct__infrared_8c_source.html#l00207">fct_infrared_set_edge_timeout()</a>, <a class="el" href="hal__adc_8c_source.html#l00501">halAdcProcessPressure()</a>, <a class="el" href="hal__io_8c_source.html#l00321">halIOBuzzerTask()</a>, <a class="el" href="hal__io_8c_source.html#l00484">halIOInit()</a>, <a class="el" href="hal__io_8c_source.html#l00381">halIOLEDTask()</a>, <a class="el" href="task__commands_8c_source.html#l01628">storeSlot()</a>, <a class="el" href="task__commands_8c_source.html#l01429">task_commands()</a>, and <a class="el" href="task__debouncer_8c_source.html#l00366">task_debouncer()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="config__switcher_8c_a921538bec34d128a44a748fd5a2c391f_icgraph.png" border="0" usemap="#config__switcher_8c_a921538bec34d128a44a748fd5a2c391f_icgraph" alt=""/></div>
<map name="config__switcher_8c_a921538bec34d128a44a748fd5a2c391f_icgraph" id="config__switcher_8c_a921538bec34d128a44a748fd5a2c391f_icgraph">
<area shape="rect" id="node2" href="task__debouncer_8c.html#ac6452bd8cc5e6e526cba4212d4e5f755" title="Timer callback for debouncing. " alt="" coords="189,5,323,32"/>
<area shape="rect" id="node4" href="task__debouncer_8h.html#a79d88e490be7198b9cc37556c66b837b" title="Debouncing main task. " alt="" coords="627,56,741,83"/>
<area shape="rect" id="node6" href="fct__infrared_8h.html#a41d3470cca2f90ce4f972df808db06af" title="FUNCTION &#45; Set the time between two IR edges which will trigger the timeout (end of received command)..." alt="" coords="183,107,329,149"/>
<area shape="rect" id="node7" href="hal__adc_8c.html#a78419739020988cffc83ffcbc7103b05" title="Process pressure sensor (sip &amp; puff) " alt="" coords="175,173,337,200"/>
<area shape="rect" id="node13" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="991,224,1109,251"/>
<area shape="rect" id="node17" href="hal__io_8c.html#a5c30b3b4a88e8f23489485659d53c7c0" title="HAL TASK &#45; Buzzer update task. " alt="" coords="195,275,317,301"/>
<area shape="rect" id="node18" href="hal__io_8h.html#aa5ee74913a09cba6dca62bfdc9f8342b" title="Initializing IO HAL. " alt="" coords="424,325,495,352"/>
<area shape="rect" id="node19" href="hal__io_8c.html#ad83b58c9ee836526a874392c0757f42d" title="HAL TASK &#45; LED update task. " alt="" coords="202,376,310,403"/>
<area shape="rect" id="node20" href="task__commands_8c.html#a78b669ea961463eb05d2016e0b41ff86" title="Save current config to flash. " alt="" coords="219,427,293,453"/>
<area shape="rect" id="node3" href="task__debouncer_8c.html#a9c2bdf28ee91c441212941b4ef5621ca" title="Start a timer with a given config and debounce time. " alt="" coords="419,5,500,32"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1372,173,1451,200"/>
<area shape="rect" id="node8" href="hal__adc_8c.html#aee719704e643d27c1faab768cf4bc22e" title="HAL TASK &#45; Threshold task for ADC. " alt="" coords="385,173,533,200"/>
<area shape="rect" id="node9" href="hal__adc_8h.html#a4135bb73c2271b4a27db8d8d81884de7" title="Reload ADC config. " alt="" coords="613,173,755,200"/>
<area shape="rect" id="node10" href="config__switcher_8h.html#af8fae43accd789bf2355c79ff44c2ae9" title="Request config update. " alt="" coords="835,173,933,200"/>
<area shape="rect" id="node16" href="hal__adc_8h.html#a6f0d302f35e5b7f7a1144f0ddace35d2" title="Init the ADC driver module. " alt="" coords="1010,123,1090,149"/>
<area shape="rect" id="node11" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="TASK &#45; Config switcher task, internal config reloading. " alt="" coords="981,173,1119,200"/>
<area shape="rect" id="node12" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="1182,173,1309,200"/>
<area shape="rect" id="node14" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1179,275,1311,301"/>
<area shape="rect" id="node15" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1167,224,1324,251"/>
<area shape="rect" id="node21" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="405,465,513,492"/>
<area shape="rect" id="node27" href="task__commands_8c.html#ab06b29638d917a9356bda072e158449e" title="cmdSa" alt="" coords="428,415,491,441"/>
<area shape="rect" id="node22" href="task__commands_8c.html#a48f6d7719b9f1d99a9ead7c2aa623e22" title="keyboard_helper_parsekeycode" alt="" coords="581,465,787,492"/>
<area shape="rect" id="node23" href="task__commands_8c.html#a43e8a43643ac7048c95d0c6922dcdcd9" title="cmdKp" alt="" coords="853,452,915,479"/>
<area shape="rect" id="node24" href="task__commands_8c.html#aec535c106610969fcf7b9589f08c4d6e" title="cmdKh" alt="" coords="853,503,915,529"/>
<area shape="rect" id="node25" href="task__commands_8c.html#a8762283490f363d0f98506fa908a228c" title="cmdKr" alt="" coords="854,553,914,580"/>
<area shape="rect" id="node26" href="task__commands_8c.html#ab90e3fb0ef55d084b15aae27f76ab0d9" title="cmdKt" alt="" coords="854,401,914,428"/>
</map>
</div>

</div>
</div>
<a id="aafed047c8d04b814a85239e031cbad7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aafed047c8d04b814a85239e031cbad7b">&#9670;&nbsp;</a></span>configSwitcherInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t configSwitcherInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initializing the config switching functionality. </p>
<p>The task will be loaded to enable slot switches via the config_switcher queue. </p><dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fined, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="config__switcher_8c_source.html#l00285">285</a> of file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00125">app_main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="config__switcher_8c_aafed047c8d04b814a85239e031cbad7b_cgraph.png" border="0" usemap="#config__switcher_8c_aafed047c8d04b814a85239e031cbad7b_cgraph" alt=""/></div>
<map name="config__switcher_8c_aafed047c8d04b814a85239e031cbad7b_cgraph" id="config__switcher_8c_aafed047c8d04b814a85239e031cbad7b_cgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="TASK &#45; Config switcher task, internal config reloading. " alt="" coords="180,265,317,292"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. " alt="" coords="369,56,549,83"/>
<area shape="rect" id="node5" href="hal__storage_8c.html#afffed2d32aac2287e95d943dd588db6c" title="Load a slot by an action. " alt="" coords="403,189,515,216"/>
<area shape="rect" id="node12" href="hal__storage_8c.html#a8abf9a5b8727dc8d7cbe76ba0e2dcb6b" title="Delete one or all slots. " alt="" coords="386,132,531,159"/>
<area shape="rect" id="node13" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. " alt="" coords="365,240,552,267"/>
<area shape="rect" id="node14" href="hal__storage_8c.html#a57cdf5734cdbad3dbb5f18f71dd27501" title="Load a slot by a slot name. " alt="" coords="385,291,532,317"/>
<area shape="rect" id="node17" href="hal__storage_8c.html#aa5da838bef47becbd2b5bd96a60c75b3" title="Get number of currently loaded slot (0&#45;x) " alt="" coords="373,342,544,383"/>
<area shape="rect" id="node18" href="hal__adc_8c.html#ae549c157d94729e8b06cb391f0f2c97b" title="Calibration function. " alt="" coords="1350,461,1465,488"/>
<area shape="rect" id="node19" href="config__switcher_8c.html#af8fae43accd789bf2355c79ff44c2ae9" title="Request config update. " alt="" coords="409,563,508,589"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a606e5842dd354f1fb4a738ba95c6d5d1" title="internal function to init the filesystem if handle is invalid " alt="" coords="651,5,754,32"/>
<area shape="rect" id="node6" href="hal__storage_8c.html#a7e0a934f829b47e2445189dd95e962d6" title="Get the number of stored slots. " alt="" coords="605,132,800,159"/>
<area shape="rect" id="node8" href="hal__storage_8c.html#a670ba7fad19e9a70672d73897785712f" title="Load a slot by a slot number (starting with 0) " alt="" coords="623,297,782,324"/>
<area shape="rect" id="node7" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="1123,183,1253,209"/>
<area shape="rect" id="node9" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="873,259,1039,285"/>
<area shape="rect" id="node10" href="hal__storage_8c.html#a76299b86e144434260dcab80323ec9da" title="Strips away t and 
<area shape="rect" id="node11" href="hal__serial_8c.html#af78683f30da18cfc19c2c91006ec6155" title="Send serial bytes to USB&#45;Serial (USB&#45;CDC) " alt="" coords="1549,436,1712,463"/>
<area shape="rect" id="node15" href="hal__storage_8c.html#aae19bcf97360ccd7af4ddf906ff85141" title="Get the number of a slotname. " alt="" coords="600,208,805,235"/>
<area shape="rect" id="node16" href="hal__storage_8c.html#a2046481d14910cc6a5b0086a796f293b" title="Get the name of a slot number. " alt="" coords="853,208,1059,235"/>
<area shape="rect" id="node20" href="hal__adc_8c.html#a4135bb73c2271b4a27db8d8d81884de7" title="Reload ADC config. " alt="" coords="631,537,774,564"/>
<area shape="rect" id="node31" href="hal__ble_8c.html#accf307974a0046bce38582d0260bf841" title="Reset the BLE data. " alt="" coords="653,588,752,615"/>
<area shape="rect" id="node34" href="hal__serial_8c.html#ab2261f95747ee5806ebdec880d09ca89" title="Reset the serial HID report data. " alt="" coords="649,639,756,665"/>
<area shape="rect" id="node21" href="hal__adc_8c.html#accb1d998767113559a5a93fd9d0abb2c" title="Validate the input value and replace with default if not matching. " alt="" coords="923,512,989,539"/>
<area shape="rect" id="node22" href="hal__adc_8c.html#aee719704e643d27c1faab768cf4bc22e" title="HAL TASK &#45; Threshold task for ADC. " alt="" coords="882,563,1030,589"/>
<area shape="rect" id="node23" href="hal__adc_8c.html#a3cddaa804609f2e34f3cbda1d43ff1b4" title="Trigger strong sip/puff + action according to input data. " alt="" coords="1317,715,1497,741"/>
<area shape="rect" id="node24" href="hal__adc_8c.html#a8743abcde6f190545c429f072c16106d" title="Report raw values via serial interface. " alt="" coords="1343,512,1471,539"/>
<area shape="rect" id="node27" href="hal__adc_8c.html#a78419739020988cffc83ffcbc7103b05" title="Process pressure sensor (sip &amp; puff) " alt="" coords="1107,563,1269,589"/>
<area shape="rect" id="node25" href="hal__serial_8c.html#a5dd33d8e55ba33bdecfa78bc11c618b3" title="Read ADC data via I2C from LPC chip. " alt="" coords="1545,512,1716,539"/>
<area shape="rect" id="node26" href="hal__serial_8c.html#a4d756bd77bd3ad6e8b7f7411a1624baa" title="Initialize I2C for reading ADC values from LPC. " alt="" coords="1764,512,1875,539"/>
<area shape="rect" id="node28" href="config__switcher_8c.html#a921538bec34d128a44a748fd5a2c391f" title="Get the current config struct. " alt="" coords="1347,664,1468,691"/>
<area shape="rect" id="node29" href="handler__hid_8c.html#ad5f00875286c562930f8a80d6a513c51" title="Check if a VB is active in this handler. " alt="" coords="1342,563,1473,589"/>
<area shape="rect" id="node30" href="handler__vb_8c.html#ad51537b78005f099e2422d4a715874da" title="Check if a VB is active in this handler. " alt="" coords="1344,613,1471,640"/>
<area shape="rect" id="node32" href="hid__dev_8c.html#a8ae7c69dfd4b740534df123a303a8832" title="hid_dev_send_report" alt="" coords="885,639,1027,665"/>
<area shape="rect" id="node33" href="hid__dev_8c.html#a1a247bc038a3368cea0bde2303aa8301" title="hid_dev_rpt_by_id" alt="" coords="1125,664,1251,691"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="config__switcher_8c_aafed047c8d04b814a85239e031cbad7b_icgraph.png" border="0" usemap="#config__switcher_8c_aafed047c8d04b814a85239e031cbad7b_icgraph" alt=""/></div>
<map name="config__switcher_8c_aafed047c8d04b814a85239e031cbad7b_icgraph" id="config__switcher_8c_aafed047c8d04b814a85239e031cbad7b_icgraph">
<area shape="rect" id="node2" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="180,5,259,32"/>
</map>
</div>

</div>
</div>
<a id="af5af5079d1982d42e165039e6de7e40a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af5af5079d1982d42e165039e6de7e40a">&#9670;&nbsp;</a></span>configSwitcherTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void configSwitcherTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>params</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>TASK - Config switcher task, internal config reloading. </p>
<p>This task is used to change the full configuration of this device After sending a request to the config_switcher queue, this task is used to unload all virtual button handlers and initializing the virtualbutton handlers with the new functionality.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a4701c432a28c389e4b8557f2fa3323d1" title="Queue to receive config changing commands. ">config_switcher</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">params</td><td>Not used, pass NULL.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>On a factory reset, it is necessary to load the default slot again! </dd></dl>

<p class="definition">Definition at line <a class="el" href="config__switcher_8c_source.html#l00150">150</a> of file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00285">configSwitcherInit()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="config__switcher_8c_af5af5079d1982d42e165039e6de7e40a_cgraph.png" border="0" usemap="#config__switcher_8c_af5af5079d1982d42e165039e6de7e40a_cgraph" alt=""/></div>
<map name="config__switcher_8c_af5af5079d1982d42e165039e6de7e40a_cgraph" id="config__switcher_8c_af5af5079d1982d42e165039e6de7e40a_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. " alt="" coords="194,56,374,83"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#afffed2d32aac2287e95d943dd588db6c" title="Load a slot by an action. " alt="" coords="228,189,340,216"/>
<area shape="rect" id="node11" href="hal__storage_8c.html#a8abf9a5b8727dc8d7cbe76ba0e2dcb6b" title="Delete one or all slots. " alt="" coords="211,132,357,159"/>
<area shape="rect" id="node12" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. " alt="" coords="191,240,377,267"/>
<area shape="rect" id="node13" href="hal__storage_8c.html#a57cdf5734cdbad3dbb5f18f71dd27501" title="Load a slot by a slot name. " alt="" coords="211,291,357,317"/>
<area shape="rect" id="node16" href="hal__storage_8c.html#aa5da838bef47becbd2b5bd96a60c75b3" title="Get number of currently loaded slot (0&#45;x) " alt="" coords="199,342,369,383"/>
<area shape="rect" id="node17" href="hal__adc_8c.html#ae549c157d94729e8b06cb391f0f2c97b" title="Calibration function. " alt="" coords="1175,461,1290,488"/>
<area shape="rect" id="node18" href="config__switcher_8c.html#af8fae43accd789bf2355c79ff44c2ae9" title="Request config update. " alt="" coords="235,563,333,589"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a606e5842dd354f1fb4a738ba95c6d5d1" title="internal function to init the filesystem if handle is invalid " alt="" coords="477,5,579,32"/>
<area shape="rect" id="node5" href="hal__storage_8c.html#a7e0a934f829b47e2445189dd95e962d6" title="Get the number of stored slots. " alt="" coords="431,132,625,159"/>
<area shape="rect" id="node7" href="hal__storage_8c.html#a670ba7fad19e9a70672d73897785712f" title="Load a slot by a slot number (starting with 0) " alt="" coords="449,297,607,324"/>
<area shape="rect" id="node6" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="949,183,1078,209"/>
<area shape="rect" id="node8" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="699,259,864,285"/>
<area shape="rect" id="node9" href="hal__storage_8c.html#a76299b86e144434260dcab80323ec9da" title="Strips away t and 
<area shape="rect" id="node10" href="hal__serial_8c.html#af78683f30da18cfc19c2c91006ec6155" title="Send serial bytes to USB&#45;Serial (USB&#45;CDC) " alt="" coords="1375,436,1537,463"/>
<area shape="rect" id="node14" href="hal__storage_8c.html#aae19bcf97360ccd7af4ddf906ff85141" title="Get the number of a slotname. " alt="" coords="425,208,631,235"/>
<area shape="rect" id="node15" href="hal__storage_8c.html#a2046481d14910cc6a5b0086a796f293b" title="Get the name of a slot number. " alt="" coords="679,208,884,235"/>
<area shape="rect" id="node19" href="hal__adc_8c.html#a4135bb73c2271b4a27db8d8d81884de7" title="Reload ADC config. " alt="" coords="457,537,599,564"/>
<area shape="rect" id="node30" href="hal__ble_8c.html#accf307974a0046bce38582d0260bf841" title="Reset the BLE data. " alt="" coords="479,588,577,615"/>
<area shape="rect" id="node33" href="hal__serial_8c.html#ab2261f95747ee5806ebdec880d09ca89" title="Reset the serial HID report data. " alt="" coords="475,639,581,665"/>
<area shape="rect" id="node20" href="hal__adc_8c.html#accb1d998767113559a5a93fd9d0abb2c" title="Validate the input value and replace with default if not matching. " alt="" coords="748,512,815,539"/>
<area shape="rect" id="node21" href="hal__adc_8c.html#aee719704e643d27c1faab768cf4bc22e" title="HAL TASK &#45; Threshold task for ADC. " alt="" coords="707,563,855,589"/>
<area shape="rect" id="node22" href="hal__adc_8c.html#a3cddaa804609f2e34f3cbda1d43ff1b4" title="Trigger strong sip/puff + action according to input data. " alt="" coords="1143,715,1323,741"/>
<area shape="rect" id="node23" href="hal__adc_8c.html#a8743abcde6f190545c429f072c16106d" title="Report raw values via serial interface. " alt="" coords="1169,512,1297,539"/>
<area shape="rect" id="node26" href="hal__adc_8c.html#a78419739020988cffc83ffcbc7103b05" title="Process pressure sensor (sip &amp; puff) " alt="" coords="932,563,1095,589"/>
<area shape="rect" id="node24" href="hal__serial_8c.html#a5dd33d8e55ba33bdecfa78bc11c618b3" title="Read ADC data via I2C from LPC chip. " alt="" coords="1371,512,1541,539"/>
<area shape="rect" id="node25" href="hal__serial_8c.html#a4d756bd77bd3ad6e8b7f7411a1624baa" title="Initialize I2C for reading ADC values from LPC. " alt="" coords="1589,512,1700,539"/>
<area shape="rect" id="node27" href="config__switcher_8c.html#a921538bec34d128a44a748fd5a2c391f" title="Get the current config struct. " alt="" coords="1172,664,1293,691"/>
<area shape="rect" id="node28" href="handler__hid_8c.html#ad5f00875286c562930f8a80d6a513c51" title="Check if a VB is active in this handler. " alt="" coords="1167,563,1298,589"/>
<area shape="rect" id="node29" href="handler__vb_8c.html#ad51537b78005f099e2422d4a715874da" title="Check if a VB is active in this handler. " alt="" coords="1169,613,1296,640"/>
<area shape="rect" id="node31" href="hid__dev_8c.html#a8ae7c69dfd4b740534df123a303a8832" title="hid_dev_send_report" alt="" coords="710,639,853,665"/>
<area shape="rect" id="node32" href="hid__dev_8c.html#a1a247bc038a3368cea0bde2303aa8301" title="hid_dev_rpt_by_id" alt="" coords="950,664,1077,691"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="config__switcher_8c_af5af5079d1982d42e165039e6de7e40a_icgraph.png" border="0" usemap="#config__switcher_8c_af5af5079d1982d42e165039e6de7e40a_icgraph" alt=""/></div>
<map name="config__switcher_8c_af5af5079d1982d42e165039e6de7e40a_icgraph" id="config__switcher_8c_af5af5079d1982d42e165039e6de7e40a_icgraph">
<area shape="rect" id="node2" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="191,5,317,32"/>
<area shape="rect" id="node3" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="365,5,444,32"/>
</map>
</div>

</div>
</div>
<a id="a12e56de03844b9ca18468658c7f9263f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a12e56de03844b9ca18468658c7f9263f">&#9670;&nbsp;</a></span>configTriggerUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void configTriggerUpdate </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Trigger a config update. </p>
<p>This method is simply sending an "__UPDATE" command to the config_switcher queue to trigger an update for the virtual buttons</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a4701c432a28c389e4b8557f2fa3323d1" title="Queue to receive config changing commands. ">config_switcher</a> </dd>
<dd>
<a class="el" href="config__switcher_8c.html#af8fae43accd789bf2355c79ff44c2ae9" title="Request config update. ">configUpdate</a> </dd>
<dd>
currentConfig </dd></dl>

<p class="definition">Definition at line <a class="el" href="config__switcher_8c_source.html#l00087">87</a> of file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>

</div>
</div>
<a id="af8fae43accd789bf2355c79ff44c2ae9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8fae43accd789bf2355c79ff44c2ae9">&#9670;&nbsp;</a></span>configUpdate()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t configUpdate </td>
          <td>(</td>
          <td class="paramtype">TickType_t&#160;</td>
          <td class="paramname"><em>time</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Request config update. </p>
<p>This method is requesting a config update for the general config. It is used either by the command parser to activate a changed config (by AT commands) or by the config switcher task, to activate a config loaded from flash.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a4701c432a28c389e4b8557f2fa3323d1" title="Queue to receive config changing commands. ">config_switcher</a> </dd>
<dd>
currentConfig </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">block</td><td>Time to wait for finished business before updating. If 0, returns immediately if not possible. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="config__switcher_8c_source.html#l00116">116</a> of file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00150">configSwitcherTask()</a>, and <a class="el" href="task__commands_8c_source.html#l01429">task_commands()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="config__switcher_8c_af8fae43accd789bf2355c79ff44c2ae9_cgraph.png" border="0" usemap="#config__switcher_8c_af8fae43accd789bf2355c79ff44c2ae9_cgraph" alt=""/></div>
<map name="config__switcher_8c_af8fae43accd789bf2355c79ff44c2ae9_cgraph" id="config__switcher_8c_af8fae43accd789bf2355c79ff44c2ae9_cgraph">
<area shape="rect" id="node2" href="hal__adc_8c.html#a4135bb73c2271b4a27db8d8d81884de7" title="Reload ADC config. " alt="" coords="152,164,295,191"/>
<area shape="rect" id="node15" href="hal__ble_8c.html#accf307974a0046bce38582d0260bf841" title="Reset the BLE data. " alt="" coords="174,221,273,248"/>
<area shape="rect" id="node18" href="hal__serial_8c.html#ab2261f95747ee5806ebdec880d09ca89" title="Reset the serial HID report data. " alt="" coords="170,272,277,299"/>
<area shape="rect" id="node3" href="hal__adc_8c.html#accb1d998767113559a5a93fd9d0abb2c" title="Validate the input value and replace with default if not matching. " alt="" coords="383,113,450,140"/>
<area shape="rect" id="node4" href="hal__adc_8c.html#aee719704e643d27c1faab768cf4bc22e" title="HAL TASK &#45; Threshold task for ADC. " alt="" coords="343,164,491,191"/>
<area shape="rect" id="node5" href="hal__adc_8c.html#a3cddaa804609f2e34f3cbda1d43ff1b4" title="Trigger strong sip/puff + action according to input data. " alt="" coords="749,284,929,311"/>
<area shape="rect" id="node6" href="hal__adc_8c.html#a8743abcde6f190545c429f072c16106d" title="Report raw values via serial interface. " alt="" coords="775,31,903,57"/>
<area shape="rect" id="node10" href="hal__adc_8c.html#a78419739020988cffc83ffcbc7103b05" title="Process pressure sensor (sip &amp; puff) " alt="" coords="539,157,701,184"/>
<area shape="rect" id="node7" href="hal__serial_8c.html#af78683f30da18cfc19c2c91006ec6155" title="Send serial bytes to USB&#45;Serial (USB&#45;CDC) " alt="" coords="981,5,1144,32"/>
<area shape="rect" id="node8" href="hal__serial_8c.html#a5dd33d8e55ba33bdecfa78bc11c618b3" title="Read ADC data via I2C from LPC chip. " alt="" coords="977,56,1148,83"/>
<area shape="rect" id="node9" href="hal__serial_8c.html#a4d756bd77bd3ad6e8b7f7411a1624baa" title="Initialize I2C for reading ADC values from LPC. " alt="" coords="1196,56,1307,83"/>
<area shape="rect" id="node11" href="config__switcher_8c.html#a921538bec34d128a44a748fd5a2c391f" title="Get the current config struct. " alt="" coords="779,233,900,260"/>
<area shape="rect" id="node12" href="handler__hid_8c.html#ad5f00875286c562930f8a80d6a513c51" title="Check if a VB is active in this handler. " alt="" coords="774,81,905,108"/>
<area shape="rect" id="node13" href="handler__vb_8c.html#ad51537b78005f099e2422d4a715874da" title="Check if a VB is active in this handler. " alt="" coords="776,132,903,159"/>
<area shape="rect" id="node14" href="hal__adc_8c.html#ae549c157d94729e8b06cb391f0f2c97b" title="Calibration function. " alt="" coords="782,183,897,209"/>
<area shape="rect" id="node16" href="hid__dev_8c.html#a8ae7c69dfd4b740534df123a303a8832" title="hid_dev_send_report" alt="" coords="345,233,488,260"/>
<area shape="rect" id="node17" href="hid__dev_8c.html#a1a247bc038a3368cea0bde2303aa8301" title="hid_dev_rpt_by_id" alt="" coords="557,259,683,285"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="config__switcher_8c_af8fae43accd789bf2355c79ff44c2ae9_icgraph.png" border="0" usemap="#config__switcher_8c_af8fae43accd789bf2355c79ff44c2ae9_icgraph" alt=""/></div>
<map name="config__switcher_8c_af8fae43accd789bf2355c79ff44c2ae9_icgraph" id="config__switcher_8c_af8fae43accd789bf2355c79ff44c2ae9_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="TASK &#45; Config switcher task, internal config reloading. " alt="" coords="152,5,289,32"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="161,56,280,83"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="353,5,479,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="543,31,621,57"/>
<area shape="rect" id="node6" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="350,56,482,83"/>
<area shape="rect" id="node7" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="337,107,495,133"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="abd2fb9b048f1de98ee98dd54077541c2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abd2fb9b048f1de98ee98dd54077541c2">&#9670;&nbsp;</a></span>configswitcher_handle</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TaskHandle_t configswitcher_handle</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task handle for the config switcher. </p>

<p class="definition">Definition at line <a class="el" href="config__switcher_8c_source.html#l00044">44</a> of file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00285">configSwitcherInit()</a>.</p>

</div>
</div>
<a id="a7265e5121ad81b52fb8a0e4334b42118"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7265e5121ad81b52fb8a0e4334b42118">&#9670;&nbsp;</a></span>configUpdatePending</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SemaphoreHandle_t configUpdatePending = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Semaphore for detecting pending config updates. </p>
<p>Usually, on saving a new slot, each time a value is changed, <a class="el" href="config__switcher_8c.html#af8fae43accd789bf2355c79ff44c2ae9" title="Request config update. ">configUpdate()</a> is called. This is unnecessary, so we have a semaphore which shows, if an update is already pending. In addition, this semaphore can be used to detect if the new configuration is stable (all tasks are loaded), which is necessary for storing the active slot via hal_storage.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="config__switcher_8c.html#af8fae43accd789bf2355c79ff44c2ae9" title="Request config update. ">configUpdate</a> </dd>
<dd>
configUpdateIsStable </dd></dl>

<p class="definition">Definition at line <a class="el" href="config__switcher_8c_source.html#l00057">57</a> of file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00285">configSwitcherInit()</a>, and <a class="el" href="config__switcher_8c_source.html#l00150">configSwitcherTask()</a>.</p>

</div>
</div>
<a id="a73c577cdbcaa9439f9458a9e5d39c143"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a73c577cdbcaa9439f9458a9e5d39c143">&#9670;&nbsp;</a></span>currentConfigLoaded</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="common_8h.html#a1d17932316265a53a6982a2526a4cada">generalConfig_t</a> currentConfigLoaded</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Currently loaded configuration. </p>

<p class="definition">Definition at line <a class="el" href="config__switcher_8c_source.html#l00061">61</a> of file <a class="el" href="config__switcher_8c_source.html">config_switcher.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00073">configGetCurrent()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
