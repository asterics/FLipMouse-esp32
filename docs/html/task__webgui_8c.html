<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLipMouse/FABI ESP32 firmware: /home/beni/sync/Projects/FH/FLipMouse-esp32/main/function_tasks/task_webgui.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLipMouse/FABI ESP32 firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li><li class="navelem"><a class="el" href="dir_dd44d79ba9a472f66a6851d54403189f.html">function_tasks</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">task_webgui.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>CONTINOUS TASK - Web server &amp; WebGUI handling.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="task__webgui_8h_source.html">task_webgui.h</a>&quot;</code><br />
</div>
<p><a href="task__webgui_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a7ce0df38eb467e59f209470c8f5ac4e6">LOG_TAG</a>&#160;&#160;&#160;&quot;web&quot;</td></tr>
<tr class="memdesc:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logging tag for this module.  <a href="#a7ce0df38eb467e59f209470c8f5ac4e6">More...</a><br /></td></tr>
<tr class="separator:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a72bbc128e233a045692e0d9dcdcf21c6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a72bbc128e233a045692e0d9dcdcf21c6">LOG_LEVEL_WEB</a>&#160;&#160;&#160;ESP_LOG_INFO</td></tr>
<tr class="memdesc:a72bbc128e233a045692e0d9dcdcf21c6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log level for the web/websocket server.  <a href="#a72bbc128e233a045692e0d9dcdcf21c6">More...</a><br /></td></tr>
<tr class="separator:a72bbc128e233a045692e0d9dcdcf21c6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a127eb8041749ad8b0a010e0b0b9c8255"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a127eb8041749ad8b0a010e0b0b9c8255">CONFIG_AP_AUTHMODE</a>&#160;&#160;&#160;WIFI_AUTH_WPA2_PSK</td></tr>
<tr class="memdesc:a127eb8041749ad8b0a010e0b0b9c8255"><td class="mdescLeft">&#160;</td><td class="mdescRight">Authentication mode for wifi hotspot.  <a href="#a127eb8041749ad8b0a010e0b0b9c8255">More...</a><br /></td></tr>
<tr class="separator:a127eb8041749ad8b0a010e0b0b9c8255"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9e16b6184201cabb833a4a1dda7070cd"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a9e16b6184201cabb833a4a1dda7070cd">CONFIG_AP_SSID_HIDDEN</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:a9e16b6184201cabb833a4a1dda7070cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set AP visibility, 1 if it should be hidden.  <a href="#a9e16b6184201cabb833a4a1dda7070cd">More...</a><br /></td></tr>
<tr class="separator:a9e16b6184201cabb833a4a1dda7070cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa743e2cd271f20dd3d0de77d92af280a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#aa743e2cd271f20dd3d0de77d92af280a">CONFIG_AP_SSID</a>&#160;&#160;&#160;&quot;FLipMouse&quot;</td></tr>
<tr class="memdesc:aa743e2cd271f20dd3d0de77d92af280a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Name of the wifi hotspot.  <a href="#aa743e2cd271f20dd3d0de77d92af280a">More...</a><br /></td></tr>
<tr class="separator:aa743e2cd271f20dd3d0de77d92af280a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a662ff68ed47fa2c45ce0f2b67f9ef3dc"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a662ff68ed47fa2c45ce0f2b67f9ef3dc">CONFIG_AP_PASSWORD</a>&#160;&#160;&#160;&quot;foundation&quot;</td></tr>
<tr class="memdesc:a662ff68ed47fa2c45ce0f2b67f9ef3dc"><td class="mdescLeft">&#160;</td><td class="mdescRight">Hotspot default password.  <a href="#a662ff68ed47fa2c45ce0f2b67f9ef3dc">More...</a><br /></td></tr>
<tr class="separator:a662ff68ed47fa2c45ce0f2b67f9ef3dc"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac6fa3e4500fd0ed88e2e4ce3d12a89be"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#ac6fa3e4500fd0ed88e2e4ce3d12a89be">CONFIG_AP_CHANNEL</a>&#160;&#160;&#160;0</td></tr>
<tr class="memdesc:ac6fa3e4500fd0ed88e2e4ce3d12a89be"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wifi channel to be used, 0 means automatic (right?)  <a href="#ac6fa3e4500fd0ed88e2e4ce3d12a89be">More...</a><br /></td></tr>
<tr class="separator:ac6fa3e4500fd0ed88e2e4ce3d12a89be"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a154bdcc8101dd42dc2fffdbf53b8a542"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a154bdcc8101dd42dc2fffdbf53b8a542">CONFIG_AP_MAX_CONNECTIONS</a>&#160;&#160;&#160;4</td></tr>
<tr class="memdesc:a154bdcc8101dd42dc2fffdbf53b8a542"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wifi max number of connection.  <a href="#a154bdcc8101dd42dc2fffdbf53b8a542">More...</a><br /></td></tr>
<tr class="separator:a154bdcc8101dd42dc2fffdbf53b8a542"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a164f6057a67e9e860429d82eb61d0aa2"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a164f6057a67e9e860429d82eb61d0aa2">CONFIG_AP_BEACON_INTERVAL</a>&#160;&#160;&#160;100</td></tr>
<tr class="memdesc:a164f6057a67e9e860429d82eb61d0aa2"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wifi beacon interval.  <a href="#a164f6057a67e9e860429d82eb61d0aa2">More...</a><br /></td></tr>
<tr class="separator:a164f6057a67e9e860429d82eb61d0aa2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a212979f5fc9dcf0a420e90b9b21d780a"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a212979f5fc9dcf0a420e90b9b21d780a">MAX_BUFF_SIZE</a>&#160;&#160;&#160;512</td></tr>
<tr class="separator:a212979f5fc9dcf0a420e90b9b21d780a"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:adf50753dada544362b8f4fb5f8eefde5"><td class="memItemLeft" align="right" valign="top">static int8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#adf50753dada544362b8f4fb5f8eefde5">getNumberOfWifiStations</a> (void)</td></tr>
<tr class="memdesc:adf50753dada544362b8f4fb5f8eefde5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of currently connected Wifi stations.  <a href="#adf50753dada544362b8f4fb5f8eefde5">More...</a><br /></td></tr>
<tr class="separator:adf50753dada544362b8f4fb5f8eefde5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7f89c77fa56e7ac560e2720baedf07eb"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a7f89c77fa56e7ac560e2720baedf07eb">wifiStartStopOffTimer</a> (int onoff)</td></tr>
<tr class="memdesc:a7f89c77fa56e7ac560e2720baedf07eb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Simply reset &amp; start OR stop the auto-off timer.  <a href="#a7f89c77fa56e7ac560e2720baedf07eb">More...</a><br /></td></tr>
<tr class="separator:a7f89c77fa56e7ac560e2720baedf07eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5f462e5b8bd4803c256bf22a004eacde"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a5f462e5b8bd4803c256bf22a004eacde">ws_server</a> (void *pvParameters)</td></tr>
<tr class="memdesc:a5f462e5b8bd4803c256bf22a004eacde"><td class="mdescLeft">&#160;</td><td class="mdescRight">CONTINOUS TASK - Websocket server task.  <a href="#a5f462e5b8bd4803c256bf22a004eacde">More...</a><br /></td></tr>
<tr class="separator:a5f462e5b8bd4803c256bf22a004eacde"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3f8ca93e9a4e4726ea422a81dd72b7d8"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a3f8ca93e9a4e4726ea422a81dd72b7d8">redirect</a> (char *resource, int fd)</td></tr>
<tr class="memdesc:a3f8ca93e9a4e4726ea422a81dd72b7d8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Helper, sending redirect header.  <a href="#a3f8ca93e9a4e4726ea422a81dd72b7d8">More...</a><br /></td></tr>
<tr class="separator:a3f8ca93e9a4e4726ea422a81dd72b7d8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adc293b203ede5bd0fec29f304ce67eda"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#adc293b203ede5bd0fec29f304ce67eda">fat_serve</a> (char *resource, int fd)</td></tr>
<tr class="memdesc:adc293b203ede5bd0fec29f304ce67eda"><td class="mdescLeft">&#160;</td><td class="mdescRight">Serve static content from FAT.  <a href="#adc293b203ede5bd0fec29f304ce67eda">More...</a><br /></td></tr>
<tr class="separator:adc293b203ede5bd0fec29f304ce67eda"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef8b19daf6cb6fae49c2da83a52f6c6b"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#aef8b19daf6cb6fae49c2da83a52f6c6b">http_server_netconn_serve</a> (int fd)</td></tr>
<tr class="memdesc:aef8b19daf6cb6fae49c2da83a52f6c6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Handle an incoming HTTP connection.  <a href="#aef8b19daf6cb6fae49c2da83a52f6c6b">More...</a><br /></td></tr>
<tr class="separator:aef8b19daf6cb6fae49c2da83a52f6c6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adcc5b062c057f73762b1f19b2f6a8185"><td class="memItemLeft" align="right" valign="top">static void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#adcc5b062c057f73762b1f19b2f6a8185">http_server</a> (void *pvParameters)</td></tr>
<tr class="memdesc:adcc5b062c057f73762b1f19b2f6a8185"><td class="mdescLeft">&#160;</td><td class="mdescRight">CONTINOUS TASK - Main webserver task.  <a href="#adcc5b062c057f73762b1f19b2f6a8185">More...</a><br /></td></tr>
<tr class="separator:adcc5b062c057f73762b1f19b2f6a8185"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11dd6a5edc46c297b26382ebce3c34cb"><td class="memItemLeft" align="right" valign="top">static esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a11dd6a5edc46c297b26382ebce3c34cb">wifi_event_handler</a> (void *ctx, system_event_t *event)</td></tr>
<tr class="memdesc:a11dd6a5edc46c297b26382ebce3c34cb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Event handler for wifi status updates.  <a href="#a11dd6a5edc46c297b26382ebce3c34cb">More...</a><br /></td></tr>
<tr class="separator:a11dd6a5edc46c297b26382ebce3c34cb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af4fe29c8fc1fde365cdb8344cb402156"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#af4fe29c8fc1fde365cdb8344cb402156">taskWebGUIEnDisable</a> (int onoff)</td></tr>
<tr class="memdesc:af4fe29c8fc1fde365cdb8344cb402156"><td class="mdescLeft">&#160;</td><td class="mdescRight">En- or Disable WiFi interface.  <a href="#af4fe29c8fc1fde365cdb8344cb402156">More...</a><br /></td></tr>
<tr class="separator:af4fe29c8fc1fde365cdb8344cb402156"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5ad2f76f20781fd8c89e542bcc8a551"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#ae5ad2f76f20781fd8c89e542bcc8a551">wifi_timer_cb</a> (TimerHandle_t xTimer)</td></tr>
<tr class="memdesc:ae5ad2f76f20781fd8c89e542bcc8a551"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer callback for disabling wifi.  <a href="#ae5ad2f76f20781fd8c89e542bcc8a551">More...</a><br /></td></tr>
<tr class="separator:ae5ad2f76f20781fd8c89e542bcc8a551"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a669b9245d5040c0162481f7b24dbeea7"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a669b9245d5040c0162481f7b24dbeea7">taskWebGUIInit</a> (void)</td></tr>
<tr class="memdesc:a669b9245d5040c0162481f7b24dbeea7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init the web / DNS server and the web gui.  <a href="#a669b9245d5040c0162481f7b24dbeea7">More...</a><br /></td></tr>
<tr class="separator:a669b9245d5040c0162481f7b24dbeea7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a47050fc742d4864291d317dc39914ad1"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a47050fc742d4864291d317dc39914ad1">base_path</a> = &quot;/spiffs&quot;</td></tr>
<tr class="memdesc:a47050fc742d4864291d317dc39914ad1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partition name (used to define different memory types)  <a href="#a47050fc742d4864291d317dc39914ad1">More...</a><br /></td></tr>
<tr class="separator:a47050fc742d4864291d317dc39914ad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6fbc89c5167735a2e2b04eebb93bcd34"><td class="memItemLeft" align="right" valign="top">static char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a6fbc89c5167735a2e2b04eebb93bcd34">wifipw</a> [64]</td></tr>
<tr class="memdesc:a6fbc89c5167735a2e2b04eebb93bcd34"><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently used wifi password.  <a href="#a6fbc89c5167735a2e2b04eebb93bcd34">More...</a><br /></td></tr>
<tr class="separator:a6fbc89c5167735a2e2b04eebb93bcd34"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a84019f692b38960767e6beb15d0c4a2b"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a84019f692b38960767e6beb15d0c4a2b">http_html_hdr</a> [] = &quot;HTTP/1.1 200 OK\r\n&quot;</td></tr>
<tr class="memdesc:a84019f692b38960767e6beb15d0c4a2b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Static HTTP HTML header.  <a href="#a84019f692b38960767e6beb15d0c4a2b">More...</a><br /></td></tr>
<tr class="separator:a84019f692b38960767e6beb15d0c4a2b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0a007ed6b248ffb43a3ac085a39ae273"><td class="memItemLeft" align="right" valign="top">static const char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a0a007ed6b248ffb43a3ac085a39ae273">http_redir_hdr</a> [] = &quot;HTTP/1.1 302 Found\r\nLocation: http://192.168.4.1/index.htm\r\n\Expires: Mon, 26 Jul 1997 05:00:00 GMT\r\nCache-Control: no-cache, no-store, must-revalidate\r\nPragma: no-cache\r\nCache-Control: post-check=0, pre-check=0\r\nContent-Length: 0\r\n&quot;</td></tr>
<tr class="memdesc:a0a007ed6b248ffb43a3ac085a39ae273"><td class="mdescLeft">&#160;</td><td class="mdescRight">Static HTTP redirect header.  <a href="#a0a007ed6b248ffb43a3ac085a39ae273">More...</a><br /></td></tr>
<tr class="separator:a0a007ed6b248ffb43a3ac085a39ae273"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9cde9bd90c8143f07f9efcea032c9e1"><td class="memItemLeft" align="right" valign="top">SemaphoreHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#ac9cde9bd90c8143f07f9efcea032c9e1">fsSem</a></td></tr>
<tr class="separator:ac9cde9bd90c8143f07f9efcea032c9e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa27d3d77bf2e584af8b5d716c12b34fa"><td class="memItemLeft" align="right" valign="top">wifi_config_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#aa27d3d77bf2e584af8b5d716c12b34fa">ap_config</a></td></tr>
<tr class="memdesc:aa27d3d77bf2e584af8b5d716c12b34fa"><td class="mdescLeft">&#160;</td><td class="mdescRight">AP mode config, filled in init.  <a href="#aa27d3d77bf2e584af8b5d716c12b34fa">More...</a><br /></td></tr>
<tr class="separator:aa27d3d77bf2e584af8b5d716c12b34fa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4c0381f5a7dcb7609ee5cfe1fd540e47"><td class="memItemLeft" align="right" valign="top">TimerHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a4c0381f5a7dcb7609ee5cfe1fd540e47">wifiTimer</a></td></tr>
<tr class="memdesc:a4c0381f5a7dcb7609ee5cfe1fd540e47"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timer handle for auto-disabling wifi.  <a href="#a4c0381f5a7dcb7609ee5cfe1fd540e47">More...</a><br /></td></tr>
<tr class="separator:a4c0381f5a7dcb7609ee5cfe1fd540e47"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab944d3c0e8a161cc7a3e75f2c9be3995"><td class="memItemLeft" align="right" valign="top">TaskHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#ab944d3c0e8a161cc7a3e75f2c9be3995">wifiWSServerHandle_t</a> = NULL</td></tr>
<tr class="memdesc:ab944d3c0e8a161cc7a3e75f2c9be3995"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task handle for websocket task.  <a href="#ab944d3c0e8a161cc7a3e75f2c9be3995">More...</a><br /></td></tr>
<tr class="separator:ab944d3c0e8a161cc7a3e75f2c9be3995"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac9102aa6e5ae70986ec840ec85676e31"><td class="memItemLeft" align="right" valign="top">TaskHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#ac9102aa6e5ae70986ec840ec85676e31">wifiHTTPServerHandle_t</a> = NULL</td></tr>
<tr class="memdesc:ac9102aa6e5ae70986ec840ec85676e31"><td class="mdescLeft">&#160;</td><td class="mdescRight">Task handle for http server task.  <a href="#ac9102aa6e5ae70986ec840ec85676e31">More...</a><br /></td></tr>
<tr class="separator:ac9102aa6e5ae70986ec840ec85676e31"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a51afaf9187cd21748bc4143cf6ff0239"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__webgui_8c.html#a51afaf9187cd21748bc4143cf6ff0239">wifiActive</a> = 0</td></tr>
<tr class="memdesc:a51afaf9187cd21748bc4143cf6ff0239"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signals any Wifi related task to quit, if set to zero.  <a href="#a51afaf9187cd21748bc4143cf6ff0239">More...</a><br /></td></tr>
<tr class="separator:a51afaf9187cd21748bc4143cf6ff0239"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>CONTINOUS TASK - Web server &amp; WebGUI handling. </p>
<p>This module is used to serve the web- &amp; DNS server for captive portal mode and the web configuration GUI.</p>
<p>In addition, AT commands are sent to the command parser, the same way as if they would be sent by any host configuration software. In this mode feedback (which is usually sent to the serial interface) is sent back to the webgui for parsing in JS.</p>
<dl class="section see"><dt>See also</dt><dd>hal_serial </dd>
<dd>
<a class="el" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f">task_commands</a> </dd>
<dd>
atcmd_api</dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000012">Todo:</a></b></dt><dd><p class="startdd">Add wifi settings to cfg struct in hal_storage/common; default fallback should be defined </p>
<p class="enddd">After implementing, test everything.... </p>
</dd></dl>

<p class="definition">Definition in file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a127eb8041749ad8b0a010e0b0b9c8255"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a127eb8041749ad8b0a010e0b0b9c8255">&#9670;&nbsp;</a></span>CONFIG_AP_AUTHMODE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_AP_AUTHMODE&#160;&#160;&#160;WIFI_AUTH_WPA2_PSK</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Authentication mode for wifi hotspot. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00049">49</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

</div>
</div>
<a id="a164f6057a67e9e860429d82eb61d0aa2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a164f6057a67e9e860429d82eb61d0aa2">&#9670;&nbsp;</a></span>CONFIG_AP_BEACON_INTERVAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_AP_BEACON_INTERVAL&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wifi beacon interval. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00061">61</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

</div>
</div>
<a id="ac6fa3e4500fd0ed88e2e4ce3d12a89be"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac6fa3e4500fd0ed88e2e4ce3d12a89be">&#9670;&nbsp;</a></span>CONFIG_AP_CHANNEL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_AP_CHANNEL&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wifi channel to be used, 0 means automatic (right?) </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00057">57</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

</div>
</div>
<a id="a154bdcc8101dd42dc2fffdbf53b8a542"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a154bdcc8101dd42dc2fffdbf53b8a542">&#9670;&nbsp;</a></span>CONFIG_AP_MAX_CONNECTIONS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_AP_MAX_CONNECTIONS&#160;&#160;&#160;4</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wifi max number of connection. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00059">59</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

</div>
</div>
<a id="a662ff68ed47fa2c45ce0f2b67f9ef3dc"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a662ff68ed47fa2c45ce0f2b67f9ef3dc">&#9670;&nbsp;</a></span>CONFIG_AP_PASSWORD</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_AP_PASSWORD&#160;&#160;&#160;&quot;foundation&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Hotspot default password. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00055">55</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00612">taskWebGUIInit()</a>.</p>

</div>
</div>
<a id="aa743e2cd271f20dd3d0de77d92af280a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa743e2cd271f20dd3d0de77d92af280a">&#9670;&nbsp;</a></span>CONFIG_AP_SSID</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_AP_SSID&#160;&#160;&#160;&quot;FLipMouse&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Name of the wifi hotspot. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00053">53</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00612">taskWebGUIInit()</a>.</p>

</div>
</div>
<a id="a9e16b6184201cabb833a4a1dda7070cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9e16b6184201cabb833a4a1dda7070cd">&#9670;&nbsp;</a></span>CONFIG_AP_SSID_HIDDEN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define CONFIG_AP_SSID_HIDDEN&#160;&#160;&#160;0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set AP visibility, 1 if it should be hidden. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00051">51</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

</div>
</div>
<a id="a72bbc128e233a045692e0d9dcdcf21c6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a72bbc128e233a045692e0d9dcdcf21c6">&#9670;&nbsp;</a></span>LOG_LEVEL_WEB</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_LEVEL_WEB&#160;&#160;&#160;ESP_LOG_INFO</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Log level for the web/websocket server. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00046">46</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00612">taskWebGUIInit()</a>.</p>

</div>
</div>
<a id="a7ce0df38eb467e59f209470c8f5ac4e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ce0df38eb467e59f209470c8f5ac4e6">&#9670;&nbsp;</a></span>LOG_TAG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_TAG&#160;&#160;&#160;&quot;web&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logging tag for this module. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00044">44</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00198">fat_serve()</a>, <a class="el" href="task__webgui_8c_source.html#l00367">http_server()</a>, <a class="el" href="task__webgui_8c_source.html#l00317">http_server_netconn_serve()</a>, <a class="el" href="task__webgui_8c_source.html#l00186">redirect()</a>, <a class="el" href="task__webgui_8c_source.html#l00505">taskWebGUIEnDisable()</a>, <a class="el" href="task__webgui_8c_source.html#l00612">taskWebGUIInit()</a>, <a class="el" href="task__webgui_8c_source.html#l00434">wifi_event_handler()</a>, <a class="el" href="task__webgui_8c_source.html#l00585">wifi_timer_cb()</a>, <a class="el" href="task__webgui_8c_source.html#l00117">wifiStartStopOffTimer()</a>, and <a class="el" href="task__webgui_8c_source.html#l00163">ws_server()</a>.</p>

</div>
</div>
<a id="a212979f5fc9dcf0a420e90b9b21d780a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a212979f5fc9dcf0a420e90b9b21d780a">&#9670;&nbsp;</a></span>MAX_BUFF_SIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define MAX_BUFF_SIZE&#160;&#160;&#160;512</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00317">http_server_netconn_serve()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="adc293b203ede5bd0fec29f304ce67eda"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc293b203ede5bd0fec29f304ce67eda">&#9670;&nbsp;</a></span>fat_serve()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void fat_serve </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>resource</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Serve static content from FAT. </p>
<p>This method is used to send data from the FAT partition to a client </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">resource</td><td>Name of the resource to be sent </td></tr>
    <tr><td class="paramname">conn</td><td>Currently active connection </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00198">198</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00317">http_server_netconn_serve()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_adc293b203ede5bd0fec29f304ce67eda_cgraph.png" border="0" usemap="#task__webgui_8c_adc293b203ede5bd0fec29f304ce67eda_cgraph" alt=""/></div>
<map name="task__webgui_8c_adc293b203ede5bd0fec29f304ce67eda_cgraph" id="task__webgui_8c_adc293b203ede5bd0fec29f304ce67eda_cgraph">
<area shape="rect" id="node2" href="task__webgui_8c.html#a3f8ca93e9a4e4726ea422a81dd72b7d8" title="Helper, sending redirect header. " alt="" coords="129,5,195,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_adc293b203ede5bd0fec29f304ce67eda_icgraph.png" border="0" usemap="#task__webgui_8c_adc293b203ede5bd0fec29f304ce67eda_icgraph" alt=""/></div>
<map name="task__webgui_8c_adc293b203ede5bd0fec29f304ce67eda_icgraph" id="task__webgui_8c_adc293b203ede5bd0fec29f304ce67eda_icgraph">
<area shape="rect" id="node2" href="task__webgui_8c.html#aef8b19daf6cb6fae49c2da83a52f6c6b" title="Handle an incoming HTTP connection. " alt="" coords="129,5,269,47"/>
<area shape="rect" id="node3" href="task__webgui_8c.html#adcc5b062c057f73762b1f19b2f6a8185" title="CONTINOUS TASK &#45; Main webserver task. " alt="" coords="317,13,404,39"/>
<area shape="rect" id="node4" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="452,13,568,39"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="616,13,695,39"/>
</map>
</div>

</div>
</div>
<a id="adf50753dada544362b8f4fb5f8eefde5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adf50753dada544362b8f4fb5f8eefde5">&#9670;&nbsp;</a></span>getNumberOfWifiStations()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static int8_t getNumberOfWifiStations </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Get the number of currently connected Wifi stations. </p>
<dl class="section return"><dt>Returns</dt><dd>Number of connected clients </dd></dl>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00099">99</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00434">wifi_event_handler()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_adf50753dada544362b8f4fb5f8eefde5_icgraph.png" border="0" usemap="#task__webgui_8c_adf50753dada544362b8f4fb5f8eefde5_icgraph" alt=""/></div>
<map name="task__webgui_8c_adf50753dada544362b8f4fb5f8eefde5_icgraph" id="task__webgui_8c_adf50753dada544362b8f4fb5f8eefde5_icgraph">
<area shape="rect" id="node2" href="task__webgui_8c.html#a11dd6a5edc46c297b26382ebce3c34cb" title="Event handler for wifi status updates. " alt="" coords="224,5,355,32"/>
<area shape="rect" id="node3" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="403,5,519,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="567,5,645,32"/>
</map>
</div>

</div>
</div>
<a id="adcc5b062c057f73762b1f19b2f6a8185"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adcc5b062c057f73762b1f19b2f6a8185">&#9670;&nbsp;</a></span>http_server()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void http_server </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvParameters</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>CONTINOUS TASK - Main webserver task. </p>
<p>This task is used to handle incoming connections via netconn_accept. Each time a connection is opened, it will be served by http_server_netconn_serve.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="task__webgui_8c.html#aef8b19daf6cb6fae49c2da83a52f6c6b" title="Handle an incoming HTTP connection. ">http_server_netconn_serve</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">pvParameters</td><td>Unused. </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00367">367</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00612">taskWebGUIInit()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_adcc5b062c057f73762b1f19b2f6a8185_cgraph.png" border="0" usemap="#task__webgui_8c_adcc5b062c057f73762b1f19b2f6a8185_cgraph" alt=""/></div>
<map name="task__webgui_8c_adcc5b062c057f73762b1f19b2f6a8185_cgraph" id="task__webgui_8c_adcc5b062c057f73762b1f19b2f6a8185_cgraph">
<area shape="rect" id="node2" href="task__webgui_8c.html#aef8b19daf6cb6fae49c2da83a52f6c6b" title="Handle an incoming HTTP connection. " alt="" coords="140,5,280,47"/>
<area shape="rect" id="node3" href="task__webgui_8c.html#adc293b203ede5bd0fec29f304ce67eda" title="Serve static content from FAT. " alt="" coords="328,13,404,39"/>
<area shape="rect" id="node4" href="task__webgui_8c.html#a3f8ca93e9a4e4726ea422a81dd72b7d8" title="Helper, sending redirect header. " alt="" coords="452,13,517,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_adcc5b062c057f73762b1f19b2f6a8185_icgraph.png" border="0" usemap="#task__webgui_8c_adcc5b062c057f73762b1f19b2f6a8185_icgraph" alt=""/></div>
<map name="task__webgui_8c_adcc5b062c057f73762b1f19b2f6a8185_icgraph" id="task__webgui_8c_adcc5b062c057f73762b1f19b2f6a8185_icgraph">
<area shape="rect" id="node2" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="140,5,256,32"/>
<area shape="rect" id="node3" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="304,5,383,32"/>
</map>
</div>

</div>
</div>
<a id="aef8b19daf6cb6fae49c2da83a52f6c6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef8b19daf6cb6fae49c2da83a52f6c6b">&#9670;&nbsp;</a></span>http_server_netconn_serve()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static void http_server_netconn_serve </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Handle an incoming HTTP connection. </p>
<p>This handler is used to server the webpage to a connected client. Data is read from the FAT/VFS partition of the flash. The partition is created and uploaded by <em>make makefatfs flashfatfs</em> </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">conn</td><td>Current active net connection </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00317">317</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00367">http_server()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_aef8b19daf6cb6fae49c2da83a52f6c6b_cgraph.png" border="0" usemap="#task__webgui_8c_aef8b19daf6cb6fae49c2da83a52f6c6b_cgraph" alt=""/></div>
<map name="task__webgui_8c_aef8b19daf6cb6fae49c2da83a52f6c6b_cgraph" id="task__webgui_8c_aef8b19daf6cb6fae49c2da83a52f6c6b_cgraph">
<area shape="rect" id="node2" href="task__webgui_8c.html#adc293b203ede5bd0fec29f304ce67eda" title="Serve static content from FAT. " alt="" coords="193,13,269,39"/>
<area shape="rect" id="node3" href="task__webgui_8c.html#a3f8ca93e9a4e4726ea422a81dd72b7d8" title="Helper, sending redirect header. " alt="" coords="317,13,383,39"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_aef8b19daf6cb6fae49c2da83a52f6c6b_icgraph.png" border="0" usemap="#task__webgui_8c_aef8b19daf6cb6fae49c2da83a52f6c6b_icgraph" alt=""/></div>
<map name="task__webgui_8c_aef8b19daf6cb6fae49c2da83a52f6c6b_icgraph" id="task__webgui_8c_aef8b19daf6cb6fae49c2da83a52f6c6b_icgraph">
<area shape="rect" id="node2" href="task__webgui_8c.html#adcc5b062c057f73762b1f19b2f6a8185" title="CONTINOUS TASK &#45; Main webserver task. " alt="" coords="193,13,280,39"/>
<area shape="rect" id="node3" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="328,13,444,39"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="492,13,571,39"/>
</map>
</div>

</div>
</div>
<a id="a3f8ca93e9a4e4726ea422a81dd72b7d8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3f8ca93e9a4e4726ea422a81dd72b7d8">&#9670;&nbsp;</a></span>redirect()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void redirect </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>resource</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>fd</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Helper, sending redirect header. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00186">186</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00198">fat_serve()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_a3f8ca93e9a4e4726ea422a81dd72b7d8_icgraph.png" border="0" usemap="#task__webgui_8c_a3f8ca93e9a4e4726ea422a81dd72b7d8_icgraph" alt=""/></div>
<map name="task__webgui_8c_a3f8ca93e9a4e4726ea422a81dd72b7d8_icgraph" id="task__webgui_8c_a3f8ca93e9a4e4726ea422a81dd72b7d8_icgraph">
<area shape="rect" id="node2" href="task__webgui_8c.html#adc293b203ede5bd0fec29f304ce67eda" title="Serve static content from FAT. " alt="" coords="119,13,195,39"/>
<area shape="rect" id="node3" href="task__webgui_8c.html#aef8b19daf6cb6fae49c2da83a52f6c6b" title="Handle an incoming HTTP connection. " alt="" coords="243,5,383,47"/>
<area shape="rect" id="node4" href="task__webgui_8c.html#adcc5b062c057f73762b1f19b2f6a8185" title="CONTINOUS TASK &#45; Main webserver task. " alt="" coords="431,13,517,39"/>
<area shape="rect" id="node5" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="565,13,681,39"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="729,13,808,39"/>
</map>
</div>

</div>
</div>
<a id="af4fe29c8fc1fde365cdb8344cb402156"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af4fe29c8fc1fde365cdb8344cb402156">&#9670;&nbsp;</a></span>taskWebGUIEnDisable()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t taskWebGUIEnDisable </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>onoff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>En- or Disable WiFi interface. </p>
<p>This method is used to enable or disable the wifi interface. In order to provide a safe FLipMouse/FABI device, the Wifi hotspot is for configuration purposes only. Therefore, an enabled Wifi hotspot will be automatically disabled within a defined time (see WIFI_OFF_TIME) after the last client was disconnected. In addition, other parts of the software might disable the Wifi prior to the automatic disconnect.</p>
<dl class="section note"><dt>Note</dt><dd>Calling this method prior to initializing wifi with taskWebGUIInit will result in an error! </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">onoff</td><td>If != 0, switch on WiFi, switch off if 0. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a7c133f995819f3e61446b4881e582b13" title="Minutes between last client disconnected and WiFi is switched off. ">WIFI_OFF_TIME</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00505">505</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00082">switch_radio()</a>, and <a class="el" href="task__webgui_8c_source.html#l00585">wifi_timer_cb()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_af4fe29c8fc1fde365cdb8344cb402156_icgraph.png" border="0" usemap="#task__webgui_8c_af4fe29c8fc1fde365cdb8344cb402156_icgraph" alt=""/></div>
<map name="task__webgui_8c_af4fe29c8fc1fde365cdb8344cb402156_icgraph" id="task__webgui_8c_af4fe29c8fc1fde365cdb8344cb402156_icgraph">
<area shape="rect" id="node2" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#a93e2ea21db142b4c7172565051a18cb1" title="Switch radio mode. " alt="" coords="369,5,464,32"/>
<area shape="rect" id="node4" href="task__webgui_8c.html#ae5ad2f76f20781fd8c89e542bcc8a551" title="Timer callback for disabling wifi. " alt="" coords="212,56,311,83"/>
<area shape="rect" id="node3" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="523,31,601,57"/>
<area shape="rect" id="node5" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="359,56,475,83"/>
</map>
</div>

</div>
</div>
<a id="a669b9245d5040c0162481f7b24dbeea7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a669b9245d5040c0162481f7b24dbeea7">&#9670;&nbsp;</a></span>taskWebGUIInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t taskWebGUIInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Init the web / DNS server and the web gui. </p>
<p>This init function initializes the wifi, web server, dns server (captive portal) and the websocket.</p>
<p>The web page is served from FAT file system (same partition as config files) via the http_server task. Communication between web page and FLipMouse/FABI is done by a websocket, which is provided via the ws_server task.</p>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000013">Todo:</a></b></dt><dd>Activate/fix/test captive portal</dd></dl>
<dl class="section note"><dt>Note</dt><dd>Wifi is not enabled by default (BLE has priority), see taskWebGUIEnDisable </dd>
<dd>
IP Adress of the device is <b>192.168.10.1</b> </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="task__webgui_8c.html#af4fe29c8fc1fde365cdb8344cb402156" title="En- or Disable WiFi interface. ">taskWebGUIEnDisable</a> </dd>
<dd>
<a class="el" href="task__webgui_8c.html#a662ff68ed47fa2c45ce0f2b67f9ef3dc" title="Hotspot default password. ">CONFIG_AP_PASSWORD</a> </dd>
<dd>
<a class="el" href="common_8h.html#a2ca9c660566d3b177436abdb6d2d6713" title="NVS key for wifi password. ">NVS_WIFIPW</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00612">612</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00114">app_main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_a669b9245d5040c0162481f7b24dbeea7_cgraph.png" border="0" usemap="#task__webgui_8c_a669b9245d5040c0162481f7b24dbeea7_cgraph" alt=""/></div>
<map name="task__webgui_8c_a669b9245d5040c0162481f7b24dbeea7_cgraph" id="task__webgui_8c_a669b9245d5040c0162481f7b24dbeea7_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a63ec8e05a2bb4c214600e94b8ab05eea" title="Load a string from NVS (global, no slot assignment) " alt="" coords="175,56,350,83"/>
<area shape="rect" id="node3" href="task__webgui_8c.html#a11dd6a5edc46c297b26382ebce3c34cb" title="Event handler for wifi status updates. " alt="" coords="197,107,328,133"/>
<area shape="rect" id="node7" href="captdns_8c.html#a82f468eb219b14b853eb183149894e92" title="captdnsInit" alt="" coords="219,157,306,184"/>
<area shape="rect" id="node15" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. " alt="" coords="173,208,353,235"/>
<area shape="rect" id="node17" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. " alt="" coords="169,259,356,285"/>
<area shape="rect" id="node18" href="task__webgui_8c.html#ae5ad2f76f20781fd8c89e542bcc8a551" title="Timer callback for disabling wifi. " alt="" coords="213,309,312,336"/>
<area shape="rect" id="node20" href="task__webgui_8c.html#adcc5b062c057f73762b1f19b2f6a8185" title="CONTINOUS TASK &#45; Main webserver task. " alt="" coords="219,360,306,387"/>
<area shape="rect" id="node24" href="task__webgui_8c.html#a5f462e5b8bd4803c256bf22a004eacde" title="CONTINOUS TASK &#45; Websocket server task. " alt="" coords="221,444,304,471"/>
<area shape="rect" id="node4" href="task__webgui_8c.html#a7f89c77fa56e7ac560e2720baedf07eb" title="Simply reset &amp; start OR stop the auto&#45;off timer. " alt="" coords="431,5,579,32"/>
<area shape="rect" id="node5" href="task__webgui_8c.html#adf50753dada544362b8f4fb5f8eefde5" title="Get the number of currently connected Wifi stations. " alt="" coords="420,56,591,83"/>
<area shape="rect" id="node6" href="hal__serial_8c.html#a57242c09ec880fbd08e1a4cd5e64d8e5" title="Remove the additional function for outputting the serial data. " alt="" coords="404,107,607,133"/>
<area shape="rect" id="node8" href="captdns_8c.html#afbeefb54f301b1f8179ecb1a6efb69a9" title="captdnsTask" alt="" coords="457,157,554,184"/>
<area shape="rect" id="node9" href="captdns_8c.html#ae3d5d80203823fee0be8b7a591e5a32d" title="captdnsRecv" alt="" coords="655,157,753,184"/>
<area shape="rect" id="node10" href="captdns_8c.html#adec91475451453070cedc420696c90f1" title="my_ntohs" alt="" coords="932,81,1011,108"/>
<area shape="rect" id="node11" href="captdns_8c.html#a5ba2df190357425ca8f277eed3a16d32" title="labelToStr" alt="" coords="802,107,883,133"/>
<area shape="rect" id="node12" href="captdns_8c.html#a01294bcdad17e226e50f0c707fee3852" title="strToLabel" alt="" coords="801,157,884,184"/>
<area shape="rect" id="node13" href="captdns_8c.html#a21dfd38acc9e61af1ce25d3fe687e22f" title="setn16" alt="" coords="812,208,873,235"/>
<area shape="rect" id="node14" href="captdns_8c.html#a4868ba2e5fb29569ef87f4d56c52fc5a" title="setn32" alt="" coords="812,259,873,285"/>
<area shape="rect" id="node16" href="hal__storage_8c.html#a606e5842dd354f1fb4a738ba95c6d5d1" title="internal function to init the filesystem if handle is invalid " alt="" coords="454,208,557,235"/>
<area shape="rect" id="node19" href="task__webgui_8c.html#af4fe29c8fc1fde365cdb8344cb402156" title="En&#45; or Disable WiFi interface. " alt="" coords="426,301,585,328"/>
<area shape="rect" id="node21" href="task__webgui_8c.html#aef8b19daf6cb6fae49c2da83a52f6c6b" title="Handle an incoming HTTP connection. " alt="" coords="435,353,575,394"/>
<area shape="rect" id="node22" href="task__webgui_8c.html#adc293b203ede5bd0fec29f304ce67eda" title="Serve static content from FAT. " alt="" coords="666,360,742,387"/>
<area shape="rect" id="node23" href="task__webgui_8c.html#a3f8ca93e9a4e4726ea422a81dd72b7d8" title="Helper, sending redirect header. " alt="" coords="810,360,875,387"/>
<area shape="rect" id="node25" href="hal__serial_8c.html#a143968f329a010a1075a81b976579605" title="Set an additional function for outputting the serial data. " alt="" coords="417,419,593,445"/>
<area shape="rect" id="node26" href="websocket_8c.html#a215997a5d454937f96cf800e1a44e599" title="WS_write_data" alt="" coords="450,469,561,496"/>
<area shape="rect" id="node27" href="websocket_8c.html#afc7ea5da54622021156f0df84063abb4" title="ws_server_netconn_serve" alt="" coords="418,520,593,547"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_a669b9245d5040c0162481f7b24dbeea7_icgraph.png" border="0" usemap="#task__webgui_8c_a669b9245d5040c0162481f7b24dbeea7_icgraph" alt=""/></div>
<map name="task__webgui_8c_a669b9245d5040c0162481f7b24dbeea7_icgraph" id="task__webgui_8c_a669b9245d5040c0162481f7b24dbeea7_icgraph">
<area shape="rect" id="node2" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="169,5,248,32"/>
</map>
</div>

</div>
</div>
<a id="a11dd6a5edc46c297b26382ebce3c34cb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11dd6a5edc46c297b26382ebce3c34cb">&#9670;&nbsp;</a></span>wifi_event_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static esp_err_t wifi_event_handler </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">system_event_t *&#160;</td>
          <td class="paramname"><em>event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Event handler for wifi status updates. </p>
<p>This handler is used to update flags for connected clients &amp; active wifi. In addition, if a client is connected, an additional serial stream is added to halSerial, which is used to transfer outgoing data to the websocket (in addition to the normal serial interface).</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#ae2b183880be8976139d636a3a714e315" title="This flag group is used to determine the routing of different data to either USB, BLE or both...">connectionRoutingStatus</a> </dd>
<dd>
<a class="el" href="common_8h.html#af11bf2c47cd0354ecfee72f9c88a4e2d" title="Bitmask used to signal a FLipMouse/FABI has an active Wifi server. ">WIFI_ACTIVE</a> </dd>
<dd>
<a class="el" href="common_8h.html#a9d086131b0622a8aaeb0db9b1ccbe725" title="Bitmask used to signal a FLipMouse/FABI has at least one connected Wifi client. ">WIFI_CLIENT_CONNECTED</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">ctx</td><td>Unused </td></tr>
    <tr><td class="paramname">event</td><td>Pointer to system event </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00434">434</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00612">taskWebGUIInit()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_a11dd6a5edc46c297b26382ebce3c34cb_cgraph.png" border="0" usemap="#task__webgui_8c_a11dd6a5edc46c297b26382ebce3c34cb_cgraph" alt=""/></div>
<map name="task__webgui_8c_a11dd6a5edc46c297b26382ebce3c34cb_cgraph" id="task__webgui_8c_a11dd6a5edc46c297b26382ebce3c34cb_cgraph">
<area shape="rect" id="node2" href="task__webgui_8c.html#a7f89c77fa56e7ac560e2720baedf07eb" title="Simply reset &amp; start OR stop the auto&#45;off timer. " alt="" coords="211,5,359,32"/>
<area shape="rect" id="node3" href="task__webgui_8c.html#adf50753dada544362b8f4fb5f8eefde5" title="Get the number of currently connected Wifi stations. " alt="" coords="200,56,371,83"/>
<area shape="rect" id="node4" href="hal__serial_8c.html#a57242c09ec880fbd08e1a4cd5e64d8e5" title="Remove the additional function for outputting the serial data. " alt="" coords="184,107,387,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_a11dd6a5edc46c297b26382ebce3c34cb_icgraph.png" border="0" usemap="#task__webgui_8c_a11dd6a5edc46c297b26382ebce3c34cb_icgraph" alt=""/></div>
<map name="task__webgui_8c_a11dd6a5edc46c297b26382ebce3c34cb_icgraph" id="task__webgui_8c_a11dd6a5edc46c297b26382ebce3c34cb_icgraph">
<area shape="rect" id="node2" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="184,5,300,32"/>
<area shape="rect" id="node3" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="348,5,427,32"/>
</map>
</div>

</div>
</div>
<a id="ae5ad2f76f20781fd8c89e542bcc8a551"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5ad2f76f20781fd8c89e542bcc8a551">&#9670;&nbsp;</a></span>wifi_timer_cb()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wifi_timer_cb </td>
          <td>(</td>
          <td class="paramtype">TimerHandle_t&#160;</td>
          <td class="paramname"><em>xTimer</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timer callback for disabling wifi. </p>
<p>This callback is executed, if the time expires after the last client disconnects. It will disable wifi. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">xTimer</td><td>Timer handle which was used for calling this CB </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00585">585</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00612">taskWebGUIInit()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_ae5ad2f76f20781fd8c89e542bcc8a551_cgraph.png" border="0" usemap="#task__webgui_8c_ae5ad2f76f20781fd8c89e542bcc8a551_cgraph" alt=""/></div>
<map name="task__webgui_8c_ae5ad2f76f20781fd8c89e542bcc8a551_cgraph" id="task__webgui_8c_ae5ad2f76f20781fd8c89e542bcc8a551_cgraph">
<area shape="rect" id="node2" href="task__webgui_8c.html#af4fe29c8fc1fde365cdb8344cb402156" title="En&#45; or Disable WiFi interface. " alt="" coords="152,5,311,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_ae5ad2f76f20781fd8c89e542bcc8a551_icgraph.png" border="0" usemap="#task__webgui_8c_ae5ad2f76f20781fd8c89e542bcc8a551_icgraph" alt=""/></div>
<map name="task__webgui_8c_ae5ad2f76f20781fd8c89e542bcc8a551_icgraph" id="task__webgui_8c_ae5ad2f76f20781fd8c89e542bcc8a551_icgraph">
<area shape="rect" id="node2" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="152,5,268,32"/>
<area shape="rect" id="node3" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="316,5,395,32"/>
</map>
</div>

</div>
</div>
<a id="a7f89c77fa56e7ac560e2720baedf07eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7f89c77fa56e7ac560e2720baedf07eb">&#9670;&nbsp;</a></span>wifiStartStopOffTimer()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void wifiStartStopOffTimer </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>onoff</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Simply reset &amp; start OR stop the auto-off timer. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a7c133f995819f3e61446b4881e582b13" title="Minutes between last client disconnected and WiFi is switched off. ">WIFI_OFF_TIME</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">onoff</td><td>If 0, timer will be stopped, started otherwise </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00117">117</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00434">wifi_event_handler()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_a7f89c77fa56e7ac560e2720baedf07eb_icgraph.png" border="0" usemap="#task__webgui_8c_a7f89c77fa56e7ac560e2720baedf07eb_icgraph" alt=""/></div>
<map name="task__webgui_8c_a7f89c77fa56e7ac560e2720baedf07eb_icgraph" id="task__webgui_8c_a7f89c77fa56e7ac560e2720baedf07eb_icgraph">
<area shape="rect" id="node2" href="task__webgui_8c.html#a11dd6a5edc46c297b26382ebce3c34cb" title="Event handler for wifi status updates. " alt="" coords="201,5,332,32"/>
<area shape="rect" id="node3" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="380,5,496,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="544,5,623,32"/>
</map>
</div>

</div>
</div>
<a id="a5f462e5b8bd4803c256bf22a004eacde"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5f462e5b8bd4803c256bf22a004eacde">&#9670;&nbsp;</a></span>ws_server()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void ws_server </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvParameters</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CONTINOUS TASK - Websocket server task. </p>
<p>This task is used to handle the websocket on port 1804. Websocket is used for data transmission between a connected client and the FLipMouse/FABI. Incoming data is in the same format as on the serial interface, therefore simply put into the command queue. Outgoing data is equally to serial output data.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__serial_8h.html#a57deadb7de70a0230474a4680cc0e2d9" title="Queue for parsed AT commands. ">halSerialATCmds</a> </dd>
<dd>
<a class="el" href="hal__serial_8h.html#af78683f30da18cfc19c2c91006ec6155" title="Send serial bytes to USB-Serial (USB-CDC) ">halSerialSendUSBSerial</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00163">163</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00612">taskWebGUIInit()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_a5f462e5b8bd4803c256bf22a004eacde_cgraph.png" border="0" usemap="#task__webgui_8c_a5f462e5b8bd4803c256bf22a004eacde_cgraph" alt=""/></div>
<map name="task__webgui_8c_a5f462e5b8bd4803c256bf22a004eacde_cgraph" id="task__webgui_8c_a5f462e5b8bd4803c256bf22a004eacde_cgraph">
<area shape="rect" id="node2" href="hal__serial_8c.html#a143968f329a010a1075a81b976579605" title="Set an additional function for outputting the serial data. " alt="" coords="136,5,312,32"/>
<area shape="rect" id="node3" href="websocket_8c.html#a215997a5d454937f96cf800e1a44e599" title="WS_write_data" alt="" coords="169,56,279,83"/>
<area shape="rect" id="node4" href="websocket_8c.html#afc7ea5da54622021156f0df84063abb4" title="ws_server_netconn_serve" alt="" coords="137,107,311,133"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__webgui_8c_a5f462e5b8bd4803c256bf22a004eacde_icgraph.png" border="0" usemap="#task__webgui_8c_a5f462e5b8bd4803c256bf22a004eacde_icgraph" alt=""/></div>
<map name="task__webgui_8c_a5f462e5b8bd4803c256bf22a004eacde_icgraph" id="task__webgui_8c_a5f462e5b8bd4803c256bf22a004eacde_icgraph">
<area shape="rect" id="node2" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="136,5,252,32"/>
<area shape="rect" id="node3" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="300,5,379,32"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="aa27d3d77bf2e584af8b5d716c12b34fa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa27d3d77bf2e584af8b5d716c12b34fa">&#9670;&nbsp;</a></span>ap_config</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wifi_config_t ap_config</td>
        </tr>
      </table>
</div><div class="memdoc">
<b>Initial value:</b><div class="fragment"><div class="line">= {</div><div class="line">  .ap = {</div><div class="line">    </div><div class="line">    .authmode = <a class="code" href="task__webgui_8c.html#a127eb8041749ad8b0a010e0b0b9c8255">CONFIG_AP_AUTHMODE</a>,</div><div class="line">    .ssid_hidden = <a class="code" href="task__webgui_8c.html#a9e16b6184201cabb833a4a1dda7070cd">CONFIG_AP_SSID_HIDDEN</a>,</div><div class="line">    .max_connection = <a class="code" href="task__webgui_8c.html#a154bdcc8101dd42dc2fffdbf53b8a542">CONFIG_AP_MAX_CONNECTIONS</a>,</div><div class="line">    .beacon_interval = <a class="code" href="task__webgui_8c.html#a164f6057a67e9e860429d82eb61d0aa2">CONFIG_AP_BEACON_INTERVAL</a>,           </div><div class="line">  },</div><div class="line">}</div><div class="ttc" id="task__webgui_8c_html_a127eb8041749ad8b0a010e0b0b9c8255"><div class="ttname"><a href="task__webgui_8c.html#a127eb8041749ad8b0a010e0b0b9c8255">CONFIG_AP_AUTHMODE</a></div><div class="ttdeci">#define CONFIG_AP_AUTHMODE</div><div class="ttdoc">Authentication mode for wifi hotspot. </div><div class="ttdef"><b>Definition:</b> <a href="task__webgui_8c_source.html#l00049">task_webgui.c:49</a></div></div>
<div class="ttc" id="task__webgui_8c_html_a164f6057a67e9e860429d82eb61d0aa2"><div class="ttname"><a href="task__webgui_8c.html#a164f6057a67e9e860429d82eb61d0aa2">CONFIG_AP_BEACON_INTERVAL</a></div><div class="ttdeci">#define CONFIG_AP_BEACON_INTERVAL</div><div class="ttdoc">Wifi beacon interval. </div><div class="ttdef"><b>Definition:</b> <a href="task__webgui_8c_source.html#l00061">task_webgui.c:61</a></div></div>
<div class="ttc" id="task__webgui_8c_html_a9e16b6184201cabb833a4a1dda7070cd"><div class="ttname"><a href="task__webgui_8c.html#a9e16b6184201cabb833a4a1dda7070cd">CONFIG_AP_SSID_HIDDEN</a></div><div class="ttdeci">#define CONFIG_AP_SSID_HIDDEN</div><div class="ttdoc">Set AP visibility, 1 if it should be hidden. </div><div class="ttdef"><b>Definition:</b> <a href="task__webgui_8c_source.html#l00051">task_webgui.c:51</a></div></div>
<div class="ttc" id="task__webgui_8c_html_a154bdcc8101dd42dc2fffdbf53b8a542"><div class="ttname"><a href="task__webgui_8c.html#a154bdcc8101dd42dc2fffdbf53b8a542">CONFIG_AP_MAX_CONNECTIONS</a></div><div class="ttdeci">#define CONFIG_AP_MAX_CONNECTIONS</div><div class="ttdoc">Wifi max number of connection. </div><div class="ttdef"><b>Definition:</b> <a href="task__webgui_8c_source.html#l00059">task_webgui.c:59</a></div></div>
</div><!-- fragment -->
<p>AP mode config, filled in init. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00077">77</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00612">taskWebGUIInit()</a>.</p>

</div>
</div>
<a id="a47050fc742d4864291d317dc39914ad1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47050fc742d4864291d317dc39914ad1">&#9670;&nbsp;</a></span>base_path</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* base_path = &quot;/spiffs&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Partition name (used to define different memory types) </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00064">64</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00198">fat_serve()</a>.</p>

</div>
</div>
<a id="ac9cde9bd90c8143f07f9efcea032c9e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9cde9bd90c8143f07f9efcea032c9e1">&#9670;&nbsp;</a></span>fsSem</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SemaphoreHandle_t fsSem</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Mutex to lock FS access </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00074">74</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00198">fat_serve()</a>, and <a class="el" href="task__webgui_8c_source.html#l00612">taskWebGUIInit()</a>.</p>

</div>
</div>
<a id="a84019f692b38960767e6beb15d0c4a2b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a84019f692b38960767e6beb15d0c4a2b">&#9670;&nbsp;</a></span>http_html_hdr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char http_html_hdr[] = &quot;HTTP/1.1 200 OK\r\n&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Static HTTP HTML header. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00069">69</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00198">fat_serve()</a>.</p>

</div>
</div>
<a id="a0a007ed6b248ffb43a3ac085a39ae273"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0a007ed6b248ffb43a3ac085a39ae273">&#9670;&nbsp;</a></span>http_redir_hdr</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char http_redir_hdr[] = &quot;HTTP/1.1 302 Found\r\nLocation: http://192.168.4.1/index.htm\r\n\Expires: Mon, 26 Jul 1997 05:00:00 GMT\r\nCache-Control: no-cache, no-store, must-revalidate\r\nPragma: no-cache\r\nCache-Control: post-check=0, pre-check=0\r\nContent-Length: 0\r\n&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Static HTTP redirect header. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00071">71</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00198">fat_serve()</a>, and <a class="el" href="task__webgui_8c_source.html#l00186">redirect()</a>.</p>

</div>
</div>
<a id="a51afaf9187cd21748bc4143cf6ff0239"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a51afaf9187cd21748bc4143cf6ff0239">&#9670;&nbsp;</a></span>wifiActive</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t wifiActive = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Signals any Wifi related task to quit, if set to zero. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00095">95</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00367">http_server()</a>, <a class="el" href="task__webgui_8c_source.html#l00505">taskWebGUIEnDisable()</a>, and <a class="el" href="task__webgui_8c_source.html#l00163">ws_server()</a>.</p>

</div>
</div>
<a id="ac9102aa6e5ae70986ec840ec85676e31"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac9102aa6e5ae70986ec840ec85676e31">&#9670;&nbsp;</a></span>wifiHTTPServerHandle_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TaskHandle_t wifiHTTPServerHandle_t = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task handle for http server task. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00093">93</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00612">taskWebGUIInit()</a>.</p>

</div>
</div>
<a id="a6fbc89c5167735a2e2b04eebb93bcd34"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6fbc89c5167735a2e2b04eebb93bcd34">&#9670;&nbsp;</a></span>wifipw</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">char wifipw[64]</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Currently used wifi password. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00066">66</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00612">taskWebGUIInit()</a>.</p>

</div>
</div>
<a id="a4c0381f5a7dcb7609ee5cfe1fd540e47"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4c0381f5a7dcb7609ee5cfe1fd540e47">&#9670;&nbsp;</a></span>wifiTimer</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TimerHandle_t wifiTimer</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timer handle for auto-disabling wifi. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00088">88</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00612">taskWebGUIInit()</a>, and <a class="el" href="task__webgui_8c_source.html#l00117">wifiStartStopOffTimer()</a>.</p>

</div>
</div>
<a id="ab944d3c0e8a161cc7a3e75f2c9be3995"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab944d3c0e8a161cc7a3e75f2c9be3995">&#9670;&nbsp;</a></span>wifiWSServerHandle_t</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">TaskHandle_t wifiWSServerHandle_t = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Task handle for websocket task. </p>

<p class="definition">Definition at line <a class="el" href="task__webgui_8c_source.html#l00091">91</a> of file <a class="el" href="task__webgui_8c_source.html">task_webgui.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00612">taskWebGUIInit()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
