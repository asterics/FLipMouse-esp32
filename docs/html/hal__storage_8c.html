<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLipMouse/FABI ESP32 firmware: /home/beni/sync/Projects/FH/FLipMouse-esp32/main/hal/hal_storage.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLipMouse/FABI ESP32 firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li><li class="navelem"><a class="el" href="dir_2c1795b0295572423fca70fe6201093a.html">hal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">hal_storage.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>HAL TASK - This file contains the abstraction layer for storing FLipMouse/FABI configs.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="hal__storage_8h_source.html">hal_storage.h</a>&quot;</code><br />
</div>
<p><a href="hal__storage_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a7ce0df38eb467e59f209470c8f5ac4e6">LOG_TAG</a>&#160;&#160;&#160;&quot;hal_storage&quot;</td></tr>
<tr class="separator:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:adacd33c7df6443c8387bacf3875607f8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#adacd33c7df6443c8387bacf3875607f8">LOG_LEVEL_STORAGE</a>&#160;&#160;&#160;ESP_LOG_DEBUG</td></tr>
<tr class="separator:adacd33c7df6443c8387bacf3875607f8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a63ec8e05a2bb4c214600e94b8ab05eea"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a63ec8e05a2bb4c214600e94b8ab05eea">halStorageNVSLoadString</a> (const char *key, char *string)</td></tr>
<tr class="memdesc:a63ec8e05a2bb4c214600e94b8ab05eea"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a string from NVS (global, no slot assignment)  <a href="#a63ec8e05a2bb4c214600e94b8ab05eea">More...</a><br /></td></tr>
<tr class="separator:a63ec8e05a2bb4c214600e94b8ab05eea"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa545d76c7dcaafc129a03dfd9706ca7b"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aa545d76c7dcaafc129a03dfd9706ca7b">halStorageNVSStoreString</a> (const char *key, char *string)</td></tr>
<tr class="memdesc:aa545d76c7dcaafc129a03dfd9706ca7b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store a string into NVS (global, no slot assignment)  <a href="#aa545d76c7dcaafc129a03dfd9706ca7b">More...</a><br /></td></tr>
<tr class="separator:aa545d76c7dcaafc129a03dfd9706ca7b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18ba4afaa3fc6e4c16180a79c330ad41"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a18ba4afaa3fc6e4c16180a79c330ad41">halStorageGetFree</a> (uint32_t *total, uint32_t *free)</td></tr>
<tr class="memdesc:a18ba4afaa3fc6e4c16180a79c330ad41"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get free memory (IR &amp; slot storage)  <a href="#a18ba4afaa3fc6e4c16180a79c330ad41">More...</a><br /></td></tr>
<tr class="separator:a18ba4afaa3fc6e4c16180a79c330ad41"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a606e5842dd354f1fb4a738ba95c6d5d1"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a606e5842dd354f1fb4a738ba95c6d5d1">halStorageInit</a> (void)</td></tr>
<tr class="memdesc:a606e5842dd354f1fb4a738ba95c6d5d1"><td class="mdescLeft">&#160;</td><td class="mdescRight">internal function to init the filesystem if handle is invalid  <a href="#a606e5842dd354f1fb4a738ba95c6d5d1">More...</a><br /></td></tr>
<tr class="separator:a606e5842dd354f1fb4a738ba95c6d5d1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4b6566ef5b69c85d422df52435c95d36"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36">halStorageChecks</a> (uint32_t tid)</td></tr>
<tr class="memdesc:a4b6566ef5b69c85d422df52435c95d36"><td class="mdescLeft">&#160;</td><td class="mdescRight">Internal helper to check for a valid WL handle and the correct tid.  <a href="#a4b6566ef5b69c85d422df52435c95d36">More...</a><br /></td></tr>
<tr class="separator:a4b6566ef5b69c85d422df52435c95d36"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aed4beb2e1bd8cd78a201fbcb49958cba"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba">halStorageCreateDefault</a> (uint32_t tid)</td></tr>
<tr class="memdesc:aed4beb2e1bd8cd78a201fbcb49958cba"><td class="mdescLeft">&#160;</td><td class="mdescRight">Create a new default slot.  <a href="#aed4beb2e1bd8cd78a201fbcb49958cba">More...</a><br /></td></tr>
<tr class="separator:aed4beb2e1bd8cd78a201fbcb49958cba"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa5da838bef47becbd2b5bd96a60c75b3"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aa5da838bef47becbd2b5bd96a60c75b3">halStorageGetCurrentSlotNumber</a> (void)</td></tr>
<tr class="memdesc:aa5da838bef47becbd2b5bd96a60c75b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get number of currently loaded slot.  <a href="#aa5da838bef47becbd2b5bd96a60c75b3">More...</a><br /></td></tr>
<tr class="separator:aa5da838bef47becbd2b5bd96a60c75b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7e0a934f829b47e2445189dd95e962d6"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a7e0a934f829b47e2445189dd95e962d6">halStorageGetNumberOfSlots</a> (uint32_t tid, uint8_t *slotsavailable)</td></tr>
<tr class="memdesc:a7e0a934f829b47e2445189dd95e962d6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of stored slots.  <a href="#a7e0a934f829b47e2445189dd95e962d6">More...</a><br /></td></tr>
<tr class="separator:a7e0a934f829b47e2445189dd95e962d6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53912e9159b29e5fc974a127dbf0982f"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a53912e9159b29e5fc974a127dbf0982f">halStorageGetNameForNumberIR</a> (uint32_t tid, uint8_t slotnumber, char *cmdName)</td></tr>
<tr class="memdesc:a53912e9159b29e5fc974a127dbf0982f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the name of an infrared command stored at the given slot number.  <a href="#a53912e9159b29e5fc974a127dbf0982f">More...</a><br /></td></tr>
<tr class="separator:a53912e9159b29e5fc974a127dbf0982f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8347d2c8df82d17bc9af1d007bfd11ae"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a8347d2c8df82d17bc9af1d007bfd11ae">halStorageDeleteIRCmd</a> (uint8_t slotnr, uint32_t tid)</td></tr>
<tr class="memdesc:a8347d2c8df82d17bc9af1d007bfd11ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete one or all IR commands.  <a href="#a8347d2c8df82d17bc9af1d007bfd11ae">More...</a><br /></td></tr>
<tr class="separator:a8347d2c8df82d17bc9af1d007bfd11ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1495c793604980c76b334f6a6d553c3c"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a1495c793604980c76b334f6a6d553c3c">halStorageGetNumberOfIRCmds</a> (uint32_t tid, uint8_t *slotsavailable)</td></tr>
<tr class="memdesc:a1495c793604980c76b334f6a6d553c3c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of stored IR commands.  <a href="#a1495c793604980c76b334f6a6d553c3c">More...</a><br /></td></tr>
<tr class="separator:a1495c793604980c76b334f6a6d553c3c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae5e6fcc8c1bdff7f78009830bc78f260"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#ae5e6fcc8c1bdff7f78009830bc78f260">halStorageGetFreeIRCmdSlot</a> (uint32_t tid, uint8_t *slotavailable)</td></tr>
<tr class="memdesc:ae5e6fcc8c1bdff7f78009830bc78f260"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of first available slot for an IR command.  <a href="#ae5e6fcc8c1bdff7f78009830bc78f260">More...</a><br /></td></tr>
<tr class="separator:ae5e6fcc8c1bdff7f78009830bc78f260"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a76299b86e144434260dcab80323ec9da"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a76299b86e144434260dcab80323ec9da">strip</a> (char *s)</td></tr>
<tr class="memdesc:a76299b86e144434260dcab80323ec9da"><td class="mdescLeft">&#160;</td><td class="mdescRight">Strips away \r\t and \n.  <a href="#a76299b86e144434260dcab80323ec9da">More...</a><br /></td></tr>
<tr class="separator:a76299b86e144434260dcab80323ec9da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2046481d14910cc6a5b0086a796f293b"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a2046481d14910cc6a5b0086a796f293b">halStorageGetNameForNumber</a> (uint32_t tid, uint8_t slotnumber, char *slotname)</td></tr>
<tr class="memdesc:a2046481d14910cc6a5b0086a796f293b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the name of a slot number.  <a href="#a2046481d14910cc6a5b0086a796f293b">More...</a><br /></td></tr>
<tr class="separator:a2046481d14910cc6a5b0086a796f293b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aae19bcf97360ccd7af4ddf906ff85141"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aae19bcf97360ccd7af4ddf906ff85141">halStorageGetNumberForName</a> (uint32_t tid, uint8_t *slotnumber, char *slotname)</td></tr>
<tr class="memdesc:aae19bcf97360ccd7af4ddf906ff85141"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number of a slotname.  <a href="#aae19bcf97360ccd7af4ddf906ff85141">More...</a><br /></td></tr>
<tr class="separator:aae19bcf97360ccd7af4ddf906ff85141"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a531bc39bc2808762298d14b79ac453cd"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a531bc39bc2808762298d14b79ac453cd">halStorageGetNumberForNameIR</a> (uint32_t tid, uint8_t *slotnumber, char *cmdName)</td></tr>
<tr class="memdesc:a531bc39bc2808762298d14b79ac453cd"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get the number for an IR cmd name.  <a href="#a531bc39bc2808762298d14b79ac453cd">More...</a><br /></td></tr>
<tr class="separator:a531bc39bc2808762298d14b79ac453cd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:afffed2d32aac2287e95d943dd588db6c"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#afffed2d32aac2287e95d943dd588db6c">halStorageLoad</a> (<a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95">hal_storage_load_action</a> navigate, uint32_t tid)</td></tr>
<tr class="memdesc:afffed2d32aac2287e95d943dd588db6c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a slot by an action.  <a href="#afffed2d32aac2287e95d943dd588db6c">More...</a><br /></td></tr>
<tr class="separator:afffed2d32aac2287e95d943dd588db6c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a670ba7fad19e9a70672d73897785712f"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a670ba7fad19e9a70672d73897785712f">halStorageLoadNumber</a> (uint8_t slotnumber, uint32_t tid, uint8_t outputSerial)</td></tr>
<tr class="memdesc:a670ba7fad19e9a70672d73897785712f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a slot by a slot number (starting with 0)  <a href="#a670ba7fad19e9a70672d73897785712f">More...</a><br /></td></tr>
<tr class="separator:a670ba7fad19e9a70672d73897785712f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57cdf5734cdbad3dbb5f18f71dd27501"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a57cdf5734cdbad3dbb5f18f71dd27501">halStorageLoadName</a> (char *slotname, uint32_t tid)</td></tr>
<tr class="memdesc:a57cdf5734cdbad3dbb5f18f71dd27501"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load a slot by a slot name.  <a href="#a57cdf5734cdbad3dbb5f18f71dd27501">More...</a><br /></td></tr>
<tr class="separator:a57cdf5734cdbad3dbb5f18f71dd27501"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8abf9a5b8727dc8d7cbe76ba0e2dcb6b"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a8abf9a5b8727dc8d7cbe76ba0e2dcb6b">halStorageDeleteSlot</a> (int16_t slotnr, uint32_t tid)</td></tr>
<tr class="memdesc:a8abf9a5b8727dc8d7cbe76ba0e2dcb6b"><td class="mdescLeft">&#160;</td><td class="mdescRight">Delete one or all slots.  <a href="#a8abf9a5b8727dc8d7cbe76ba0e2dcb6b">More...</a><br /></td></tr>
<tr class="separator:a8abf9a5b8727dc8d7cbe76ba0e2dcb6b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a16be2ae040ef4db3b7fb11b46d07c7a1"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a16be2ae040ef4db3b7fb11b46d07c7a1">halStorageStore</a> (uint32_t tid, char *cfgstring, uint8_t slotnumber)</td></tr>
<tr class="memdesc:a16be2ae040ef4db3b7fb11b46d07c7a1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store a slot.  <a href="#a16be2ae040ef4db3b7fb11b46d07c7a1">More...</a><br /></td></tr>
<tr class="separator:a16be2ae040ef4db3b7fb11b46d07c7a1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ace0ac79b0e2b273d97e5b806de9eb493"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#ace0ac79b0e2b273d97e5b806de9eb493">halStorageStoreIR</a> (uint32_t tid, <a class="el" href="common_8h.html#af531911959683790ca7ae870f8462a16">halIOIR_t</a> *cfg, char *cmdName)</td></tr>
<tr class="memdesc:ace0ac79b0e2b273d97e5b806de9eb493"><td class="mdescLeft">&#160;</td><td class="mdescRight">Store an infrared command to storage.  <a href="#ace0ac79b0e2b273d97e5b806de9eb493">More...</a><br /></td></tr>
<tr class="separator:ace0ac79b0e2b273d97e5b806de9eb493"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa728fac6a17066ecb910c19338ae5288"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aa728fac6a17066ecb910c19338ae5288">halStorageLoadIR</a> (char *cmdName, <a class="el" href="common_8h.html#af531911959683790ca7ae870f8462a16">halIOIR_t</a> *cfg, uint32_t tid)</td></tr>
<tr class="memdesc:aa728fac6a17066ecb910c19338ae5288"><td class="mdescLeft">&#160;</td><td class="mdescRight">Load an IR command by name.  <a href="#aa728fac6a17066ecb910c19338ae5288">More...</a><br /></td></tr>
<tr class="separator:aa728fac6a17066ecb910c19338ae5288"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aead99606f84645b2bb6ae000461bf819"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819">halStorageStartTransaction</a> (uint32_t *tid, TickType_t tickstowait, const char *caller)</td></tr>
<tr class="memdesc:aead99606f84645b2bb6ae000461bf819"><td class="mdescLeft">&#160;</td><td class="mdescRight">Start a storage transaction.  <a href="#aead99606f84645b2bb6ae000461bf819">More...</a><br /></td></tr>
<tr class="separator:aead99606f84645b2bb6ae000461bf819"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a00b5db14e24d7ada8a42aa6b3f1a1cb7"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7">halStorageFinishTransaction</a> (uint32_t tid)</td></tr>
<tr class="memdesc:a00b5db14e24d7ada8a42aa6b3f1a1cb7"><td class="mdescLeft">&#160;</td><td class="mdescRight">Finish a storage transaction.  <a href="#a00b5db14e24d7ada8a42aa6b3f1a1cb7">More...</a><br /></td></tr>
<tr class="separator:a00b5db14e24d7ada8a42aa6b3f1a1cb7"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:afe54e8f771b85765a57fb799302f2a09"><td class="memItemLeft" align="right" valign="top">SemaphoreHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#afe54e8f771b85765a57fb799302f2a09">halStorageMutex</a> = NULL</td></tr>
<tr class="memdesc:afe54e8f771b85765a57fb799302f2a09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex which is used to avoid multiple access to different loaded slots.  <a href="#afe54e8f771b85765a57fb799302f2a09">More...</a><br /></td></tr>
<tr class="separator:afe54e8f771b85765a57fb799302f2a09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab7bc6f83a4f91dba2d5b3d1edeedf4b1"><td class="memItemLeft" align="right" valign="top">static uint32_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#ab7bc6f83a4f91dba2d5b3d1edeedf4b1">storageCurrentTID</a> = 0</td></tr>
<tr class="memdesc:ab7bc6f83a4f91dba2d5b3d1edeedf4b1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently active transaction ID, 0 is invalid.  <a href="#ab7bc6f83a4f91dba2d5b3d1edeedf4b1">More...</a><br /></td></tr>
<tr class="separator:ab7bc6f83a4f91dba2d5b3d1edeedf4b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c097404b5dfa34bdac65865586dac5a"><td class="memItemLeft" align="right" valign="top">static uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a5c097404b5dfa34bdac65865586dac5a">storageCurrentSlotNumber</a> = 0</td></tr>
<tr class="memdesc:a5c097404b5dfa34bdac65865586dac5a"><td class="mdescLeft">&#160;</td><td class="mdescRight">Currently activated slot number.  <a href="#a5c097404b5dfa34bdac65865586dac5a">More...</a><br /></td></tr>
<tr class="separator:a5c097404b5dfa34bdac65865586dac5a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abc16a2117a92da3dc8843a60780fd1a2"><td class="memItemLeft" align="right" valign="top">static FILE *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#abc16a2117a92da3dc8843a60780fd1a2">storeHandle</a> = NULL</td></tr>
<tr class="memdesc:abc16a2117a92da3dc8843a60780fd1a2"><td class="mdescLeft">&#160;</td><td class="mdescRight">File handle currently used by store slot To append AT commands to a slot, multiple calls of halStorageStore are required. Consequently, this module needs to know which file is appended. This is saved in this file handle, and freed on halStorageFinishTransaction.  <a href="#abc16a2117a92da3dc8843a60780fd1a2">More...</a><br /></td></tr>
<tr class="separator:abc16a2117a92da3dc8843a60780fd1a2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d1f6636715d2cd2af21e20bc5e26afa"><td class="memItemLeft" align="right" valign="top">static wl_handle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a9d1f6636715d2cd2af21e20bc5e26afa">s_wl_handle</a> = WL_INVALID_HANDLE</td></tr>
<tr class="memdesc:a9d1f6636715d2cd2af21e20bc5e26afa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wear levelling handle.  <a href="#a9d1f6636715d2cd2af21e20bc5e26afa">More...</a><br /></td></tr>
<tr class="separator:a9d1f6636715d2cd2af21e20bc5e26afa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a47050fc742d4864291d317dc39914ad1"><td class="memItemLeft" align="right" valign="top">static const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a47050fc742d4864291d317dc39914ad1">base_path</a> = &quot;/spiflash&quot;</td></tr>
<tr class="memdesc:a47050fc742d4864291d317dc39914ad1"><td class="mdescLeft">&#160;</td><td class="mdescRight">Partition name (used to define different memory types)  <a href="#a47050fc742d4864291d317dc39914ad1">More...</a><br /></td></tr>
<tr class="separator:a47050fc742d4864291d317dc39914ad1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a687cf5b473fc94d8fafca390fcc11a1f"><td class="memItemLeft" align="right" valign="top">char&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__storage_8c.html#a687cf5b473fc94d8fafca390fcc11a1f">storageCurrentTIDHolder</a> [32]</td></tr>
<tr class="memdesc:a687cf5b473fc94d8fafca390fcc11a1f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Current active storage task.  <a href="#a687cf5b473fc94d8fafca390fcc11a1f">More...</a><br /></td></tr>
<tr class="separator:a687cf5b473fc94d8fafca390fcc11a1f"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>HAL TASK - This file contains the abstraction layer for storing FLipMouse/FABI configs. </p>
<p>This module stores general configs &amp; virtual button configurations to a storage area. In case of the ESP32 we use FAT with wear leveling, which is provided by the esp-idf. <b>Warning:</b> Please adjust the esp-idf to us 512Byte sectors and <b>mode "safety"</b>!</p>
<p>Following commands are implemented here:</p><ul>
<li>list all slot names</li>
<li>load default slot</li>
<li>load next or previous slot</li>
<li>load slot by name or number</li>
<li>store a given slot</li>
<li>delete one slot</li>
<li>delete all slots</li>
<li>delete one or all IR commands</li>
<li>get number of stored IR commands</li>
<li>load an IR command</li>
<li>get names for IR commands</li>
</ul>
<p>All methods called from this module will block via a semaphore until the requested operation is finished.</p>
<p>For storing small amounts global, non-volatile data, it is possible to use halStorageNVSLoad &amp; halStorageNVSStore operations. In this case, no transaction id is necessary.</p>
<p>Slots are stored in following naming convention (8.3 rule applies here): general slot config: xxx.set (slot number, e.g., 000.set for slot 1) infrared commands xxx_IR.set</p>
<dl class="section note"><dt>Note</dt><dd>Maximum number of slots: 250! (e.g. 000.set - 249.set) </dd>
<dd>
Maximum number of IR commands: 250 (e.g. IR_000.set - IR_249.set) </dd>
<dd>
Use halStorageStartTransaction and halStorageFinishTransaction on begin/end of loading&amp;storing (except for halStorageNVS* operations) </dd></dl>
<dl class="section warning"><dt>Warning</dt><dd>Adjust the esp-idf (via "make menuconfig") to use 512B sectors and mode <b>safety</b>! </dd></dl>

<p class="definition">Definition in file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="adacd33c7df6443c8387bacf3875607f8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adacd33c7df6443c8387bacf3875607f8">&#9670;&nbsp;</a></span>LOG_LEVEL_STORAGE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_LEVEL_STORAGE&#160;&#160;&#160;ESP_LOG_DEBUG</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00067">67</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00200">halStorageInit()</a>.</p>

</div>
</div>
<a id="a7ce0df38eb467e59f209470c8f5ac4e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ce0df38eb467e59f209470c8f5ac4e6">&#9670;&nbsp;</a></span>LOG_TAG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_TAG&#160;&#160;&#160;&quot;hal_storage&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00066">66</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00235">halStorageChecks()</a>, <a class="el" href="hal__storage_8c_source.html#l00261">halStorageCreateDefault()</a>, <a class="el" href="hal__storage_8c_source.html#l00472">halStorageDeleteIRCmd()</a>, <a class="el" href="hal__storage_8c_source.html#l01136">halStorageDeleteSlot()</a>, <a class="el" href="hal__storage_8c_source.html#l01541">halStorageFinishTransaction()</a>, <a class="el" href="hal__storage_8c_source.html#l00587">halStorageGetFreeIRCmdSlot()</a>, <a class="el" href="hal__storage_8c_source.html#l00638">halStorageGetNameForNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l00412">halStorageGetNameForNumberIR()</a>, <a class="el" href="hal__storage_8c_source.html#l00712">halStorageGetNumberForName()</a>, <a class="el" href="hal__storage_8c_source.html#l00759">halStorageGetNumberForNameIR()</a>, <a class="el" href="hal__storage_8c_source.html#l00543">halStorageGetNumberOfIRCmds()</a>, <a class="el" href="hal__storage_8c_source.html#l00363">halStorageGetNumberOfSlots()</a>, <a class="el" href="hal__storage_8c_source.html#l00200">halStorageInit()</a>, <a class="el" href="hal__storage_8c_source.html#l00817">halStorageLoad()</a>, <a class="el" href="hal__storage_8c_source.html#l01371">halStorageLoadIR()</a>, <a class="el" href="hal__storage_8c_source.html#l01114">halStorageLoadName()</a>, <a class="el" href="hal__storage_8c_source.html#l00901">halStorageLoadNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l01487">halStorageStartTransaction()</a>, <a class="el" href="hal__storage_8c_source.html#l01214">halStorageStore()</a>, and <a class="el" href="hal__storage_8c_source.html#l01279">halStorageStoreIR()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a4b6566ef5b69c85d422df52435c95d36"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4b6566ef5b69c85d422df52435c95d36">&#9670;&nbsp;</a></span>halStorageChecks()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageChecks </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Internal helper to check for a valid WL handle and the correct tid. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#ab7bc6f83a4f91dba2d5b3d1edeedf4b1" title="Currently active transaction ID, 0 is invalid. ">storageCurrentTID</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Currently used TID </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if all checks are valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00235">235</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00261">halStorageCreateDefault()</a>, <a class="el" href="hal__storage_8c_source.html#l00472">halStorageDeleteIRCmd()</a>, <a class="el" href="hal__storage_8c_source.html#l01136">halStorageDeleteSlot()</a>, <a class="el" href="hal__storage_8c_source.html#l00587">halStorageGetFreeIRCmdSlot()</a>, <a class="el" href="hal__storage_8c_source.html#l00638">halStorageGetNameForNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l00412">halStorageGetNameForNumberIR()</a>, <a class="el" href="hal__storage_8c_source.html#l00712">halStorageGetNumberForName()</a>, <a class="el" href="hal__storage_8c_source.html#l00759">halStorageGetNumberForNameIR()</a>, <a class="el" href="hal__storage_8c_source.html#l00543">halStorageGetNumberOfIRCmds()</a>, <a class="el" href="hal__storage_8c_source.html#l00363">halStorageGetNumberOfSlots()</a>, <a class="el" href="hal__storage_8c_source.html#l01371">halStorageLoadIR()</a>, <a class="el" href="hal__storage_8c_source.html#l00901">halStorageLoadNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l01214">halStorageStore()</a>, and <a class="el" href="hal__storage_8c_source.html#l01279">halStorageStoreIR()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a4b6566ef5b69c85d422df52435c95d36_icgraph.png" border="0" usemap="#hal__storage_8c_a4b6566ef5b69c85d422df52435c95d36_icgraph" alt=""/></div>
<map name="hal__storage_8c_a4b6566ef5b69c85d422df52435c95d36_icgraph" id="hal__storage_8c_a4b6566ef5b69c85d422df52435c95d36_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="209,56,375,83"/>
<area shape="rect" id="node12" href="hal__storage_8h.html#a670ba7fad19e9a70672d73897785712f" title="Load a slot by a slot number (starting with 0) " alt="" coords="479,107,638,133"/>
<area shape="rect" id="node18" href="hal__storage_8h.html#a8347d2c8df82d17bc9af1d007bfd11ae" title="Delete one or all IR commands. " alt="" coords="210,461,374,488"/>
<area shape="rect" id="node22" href="hal__storage_8h.html#a8abf9a5b8727dc8d7cbe76ba0e2dcb6b" title="Delete one or all slots. " alt="" coords="486,360,631,387"/>
<area shape="rect" id="node26" href="hal__storage_8c.html#ae5e6fcc8c1bdff7f78009830bc78f260" title="Get the number of first available slot for an IR command. " alt="" coords="461,664,657,691"/>
<area shape="rect" id="node27" href="hal__storage_8h.html#ace0ac79b0e2b273d97e5b806de9eb493" title="Store an infrared command to storage. " alt="" coords="725,664,854,691"/>
<area shape="rect" id="node30" href="hal__storage_8h.html#a2046481d14910cc6a5b0086a796f293b" title="Get the name of a slot number. " alt="" coords="189,259,395,285"/>
<area shape="rect" id="node31" href="hal__storage_8h.html#aae19bcf97360ccd7af4ddf906ff85141" title="Get the number of a slotname. " alt="" coords="456,208,661,235"/>
<area shape="rect" id="node34" href="hal__storage_8h.html#a53912e9159b29e5fc974a127dbf0982f" title="Get the name of an infrared command stored at the given slot number. " alt="" coords="183,563,401,589"/>
<area shape="rect" id="node36" href="hal__storage_8h.html#a531bc39bc2808762298d14b79ac453cd" title="Get the number of an IR command. " alt="" coords="449,563,668,589"/>
<area shape="rect" id="node37" href="hal__storage_8h.html#a1495c793604980c76b334f6a6d553c3c" title="Get the number of stored IR commands. " alt="" coords="185,613,399,640"/>
<area shape="rect" id="node38" href="hal__storage_8h.html#a7e0a934f829b47e2445189dd95e962d6" title="Get the number of stored slots. " alt="" coords="461,157,656,184"/>
<area shape="rect" id="node39" href="hal__storage_8h.html#aa728fac6a17066ecb910c19338ae5288" title="Load an IR command by name. " alt="" coords="229,360,355,387"/>
<area shape="rect" id="node44" href="hal__storage_8h.html#a16be2ae040ef4db3b7fb11b46d07c7a1" title="Store a slot. " alt="" coords="235,309,349,336"/>
<area shape="rect" id="node3" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="743,56,835,83"/>
<area shape="rect" id="node4" href="task__commands_8c.html#aeefecfe074b759e4cb2d947aa2c26f98" title="cmdLa" alt="" coords="949,5,1010,32"/>
<area shape="rect" id="node5" href="task__commands_8c.html#ab54ad30076339911d3ffc3a8834a1958" title="cmdLi" alt="" coords="951,56,1008,83"/>
<area shape="rect" id="node6" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="925,107,1033,133"/>
<area shape="rect" id="node7" href="task__commands_8c.html#a48f6d7719b9f1d99a9ead7c2aa623e22" title="keyboard_helper_parsekeycode" alt="" coords="1096,107,1301,133"/>
<area shape="rect" id="node8" href="task__commands_8c.html#aec535c106610969fcf7b9589f08c4d6e" title="cmdKh" alt="" coords="1357,44,1420,71"/>
<area shape="rect" id="node9" href="task__commands_8c.html#a43e8a43643ac7048c95d0c6922dcdcd9" title="cmdKp" alt="" coords="1357,95,1420,121"/>
<area shape="rect" id="node10" href="task__commands_8c.html#a8762283490f363d0f98506fa908a228c" title="cmdKr" alt="" coords="1359,145,1419,172"/>
<area shape="rect" id="node11" href="task__commands_8c.html#ab90e3fb0ef55d084b15aae27f76ab0d9" title="cmdKt" alt="" coords="1359,196,1419,223"/>
<area shape="rect" id="node13" href="hal__storage_8h.html#afffed2d32aac2287e95d943dd588db6c" title="Load a slot by an action. " alt="" coords="733,107,845,133"/>
<area shape="rect" id="node17" href="hal__storage_8h.html#a57cdf5734cdbad3dbb5f18f71dd27501" title="Load a slot by a slot name. " alt="" coords="716,157,863,184"/>
<area shape="rect" id="node14" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="911,157,1048,184"/>
<area shape="rect" id="node15" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="1135,183,1262,209"/>
<area shape="rect" id="node16" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1349,265,1428,292"/>
<area shape="rect" id="node19" href="task__commands_8c.html#a1db6c92c2f6719e2f2a903264c1243fb" title="cmdIc" alt="" coords="760,563,819,589"/>
<area shape="rect" id="node20" href="task__commands_8c.html#a10b36ddce6fe6773cfcc5af7ac244789" title="cmdIw" alt="" coords="528,411,589,437"/>
<area shape="rect" id="node21" href="task__commands_8c.html#a036bffacb3ed98e93e97219423316d19" title="cmdIx" alt="" coords="529,461,588,488"/>
<area shape="rect" id="node23" href="task__commands_8c.html#a0d9cf254674af930139a09407bec9b43" title="cmdDe" alt="" coords="757,512,821,539"/>
<area shape="rect" id="node24" href="task__commands_8c.html#afbad6064c581c3d233152a3c9db07fbb" title="cmdDl" alt="" coords="759,461,819,488"/>
<area shape="rect" id="node25" href="task__commands_8c.html#ac030838bfc9da5b3dc3b3357b0606485" title="cmdDn" alt="" coords="757,360,821,387"/>
<area shape="rect" id="node28" href="fct__infrared_8h.html#ae5a80358b704f40a25177af616be7c9b" title="FUNCTION &#45; Trigger an IR command recording. " alt="" coords="914,664,1045,691"/>
<area shape="rect" id="node29" href="task__commands_8c.html#a3772e6f0e110a542c61c89956753d6d2" title="cmdIr" alt="" coords="1171,664,1226,691"/>
<area shape="rect" id="node32" href="task__commands_8c.html#a78b669ea961463eb05d2016e0b41ff86" title="Save current config to flash. " alt="" coords="752,208,827,235"/>
<area shape="rect" id="node33" href="task__commands_8c.html#ab06b29638d917a9356bda072e158449e" title="cmdSa" alt="" coords="948,208,1011,235"/>
<area shape="rect" id="node35" href="task__commands_8c.html#a1fb6206a7527fe4fd1ec9e4a2a86ee38" title="cmdIl" alt="" coords="531,613,586,640"/>
<area shape="rect" id="node40" href="fct__infrared_8h.html#a18c2e233aa3a793f43ccb3f67fe90122" title="FUNCTION &#45; Infrared command sending. " alt="" coords="497,309,620,336"/>
<area shape="rect" id="node41" href="task__commands_8c.html#a99816ffcf00174a5f57870b07622dadb" title="cmdIp" alt="" coords="760,259,819,285"/>
<area shape="rect" id="node42" href="handler__vb_8c.html#a60c71b4a6cc8a9a3e9e8a3c8e36cffa0" title="VB event handler, triggering VB general actions. " alt="" coords="937,284,1022,311"/>
<area shape="rect" id="node43" href="handler__vb_8h.html#ac54a8826a70d3aaf5c284bab02b93444" title="Init for the VB handler. " alt="" coords="1144,275,1253,301"/>
</map>
</div>

</div>
</div>
<a id="aed4beb2e1bd8cd78a201fbcb49958cba"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aed4beb2e1bd8cd78a201fbcb49958cba">&#9670;&nbsp;</a></span>halStorageCreateDefault()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void halStorageCreateDefault </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Create a new default slot. </p>
<p>Copy the flashed default.set file to the working config.set file.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Valid transaction ID </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00261">261</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00901">halStorageLoadNumber()</a>, and <a class="el" href="task__commands_8c_source.html#l01491">printAllSlots()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_cgraph.png" border="0" usemap="#hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_cgraph" alt=""/></div>
<map name="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_cgraph" id="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="219,5,348,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_icgraph.png" border="0" usemap="#hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_icgraph" alt=""/></div>
<map name="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_icgraph" id="hal__storage_8c_aed4beb2e1bd8cd78a201fbcb49958cba_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#a670ba7fad19e9a70672d73897785712f" title="Load a slot by a slot number (starting with 0) " alt="" coords="219,120,377,147"/>
<area shape="rect" id="node3" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="453,69,545,96"/>
<area shape="rect" id="node12" href="hal__storage_8h.html#afffed2d32aac2287e95d943dd588db6c" title="Load a slot by an action. " alt="" coords="443,120,555,147"/>
<area shape="rect" id="node16" href="hal__storage_8h.html#a57cdf5734cdbad3dbb5f18f71dd27501" title="Load a slot by a slot name. " alt="" coords="425,171,572,197"/>
<area shape="rect" id="node4" href="task__commands_8c.html#aeefecfe074b759e4cb2d947aa2c26f98" title="cmdLa" alt="" coords="658,12,719,39"/>
<area shape="rect" id="node5" href="task__commands_8c.html#ab54ad30076339911d3ffc3a8834a1958" title="cmdLi" alt="" coords="660,63,717,89"/>
<area shape="rect" id="node6" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="635,113,743,140"/>
<area shape="rect" id="node7" href="task__commands_8c.html#a48f6d7719b9f1d99a9ead7c2aa623e22" title="keyboard_helper_parsekeycode" alt="" coords="805,107,1011,133"/>
<area shape="rect" id="node8" href="task__commands_8c.html#aec535c106610969fcf7b9589f08c4d6e" title="cmdKh" alt="" coords="1067,5,1129,32"/>
<area shape="rect" id="node9" href="task__commands_8c.html#a43e8a43643ac7048c95d0c6922dcdcd9" title="cmdKp" alt="" coords="1067,56,1129,83"/>
<area shape="rect" id="node10" href="task__commands_8c.html#a8762283490f363d0f98506fa908a228c" title="cmdKr" alt="" coords="1068,107,1128,133"/>
<area shape="rect" id="node11" href="task__commands_8c.html#ab90e3fb0ef55d084b15aae27f76ab0d9" title="cmdKt" alt="" coords="1068,157,1128,184"/>
<area shape="rect" id="node13" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="620,171,757,197"/>
<area shape="rect" id="node14" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="845,196,971,223"/>
<area shape="rect" id="node15" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1059,208,1137,235"/>
</map>
</div>

</div>
</div>
<a id="a8347d2c8df82d17bc9af1d007bfd11ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8347d2c8df82d17bc9af1d007bfd11ae">&#9670;&nbsp;</a></span>halStorageDeleteIRCmd()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageDeleteIRCmd </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete one or all IR commands. </p>
<p>This function is used to delete one IR command or all commands (depending on parameter slotnr)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotnr</td><td>Number of slot to be deleted. Use 250 to delete all slots </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>Setting slotnr to 100 deletes all IR slots. </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00472">472</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00825">cmdIc()</a>, <a class="el" href="task__commands_8c_source.html#l00847">cmdIw()</a>, and <a class="el" href="task__commands_8c_source.html#l00899">cmdIx()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a8347d2c8df82d17bc9af1d007bfd11ae_cgraph.png" border="0" usemap="#hal__storage_8c_a8347d2c8df82d17bc9af1d007bfd11ae_cgraph" alt=""/></div>
<map name="hal__storage_8c_a8347d2c8df82d17bc9af1d007bfd11ae_cgraph" id="hal__storage_8c_a8347d2c8df82d17bc9af1d007bfd11ae_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="217,5,347,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a8347d2c8df82d17bc9af1d007bfd11ae_icgraph.png" border="0" usemap="#hal__storage_8c_a8347d2c8df82d17bc9af1d007bfd11ae_icgraph" alt=""/></div>
<map name="hal__storage_8c_a8347d2c8df82d17bc9af1d007bfd11ae_icgraph" id="hal__storage_8c_a8347d2c8df82d17bc9af1d007bfd11ae_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a1db6c92c2f6719e2f2a903264c1243fb" title="cmdIc" alt="" coords="219,5,277,32"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a10b36ddce6fe6773cfcc5af7ac244789" title="cmdIw" alt="" coords="217,56,279,83"/>
<area shape="rect" id="node4" href="task__commands_8c.html#a036bffacb3ed98e93e97219423316d19" title="cmdIx" alt="" coords="219,107,277,133"/>
</map>
</div>

</div>
</div>
<a id="a8abf9a5b8727dc8d7cbe76ba0e2dcb6b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8abf9a5b8727dc8d7cbe76ba0e2dcb6b">&#9670;&nbsp;</a></span>halStorageDeleteSlot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageDeleteSlot </td>
          <td>(</td>
          <td class="paramtype">int16_t&#160;</td>
          <td class="paramname"><em>slotnr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Delete one or all slots. </p>
<p>This function is used to delete one slot or all slots (depending on parameter slotnr)</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotnr</td><td>Number of slot to be deleted. Use -1 to delete all slots </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Deleting all slots, means that a complete factory reset is done. Maybe we change this in release versions. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01136">1136</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00652">cmdDe()</a>, <a class="el" href="task__commands_8c_source.html#l00661">cmdDl()</a>, <a class="el" href="task__commands_8c_source.html#l00670">cmdDn()</a>, and <a class="el" href="config__switcher_8c_source.html#l00171">configSwitcherTask()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_cgraph.png" border="0" usemap="#hal__storage_8c_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_cgraph" alt=""/></div>
<map name="hal__storage_8c_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_cgraph" id="hal__storage_8c_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="199,5,328,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_icgraph.png" border="0" usemap="#hal__storage_8c_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_icgraph" alt=""/></div>
<map name="hal__storage_8c_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_icgraph" id="hal__storage_8c_a8abf9a5b8727dc8d7cbe76ba0e2dcb6b_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a0d9cf254674af930139a09407bec9b43" title="cmdDe" alt="" coords="235,5,299,32"/>
<area shape="rect" id="node3" href="task__commands_8c.html#afbad6064c581c3d233152a3c9db07fbb" title="cmdDl" alt="" coords="237,56,297,83"/>
<area shape="rect" id="node4" href="task__commands_8c.html#ac030838bfc9da5b3dc3b3357b0606485" title="cmdDn" alt="" coords="235,107,299,133"/>
<area shape="rect" id="node5" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="199,157,336,184"/>
<area shape="rect" id="node6" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="384,157,511,184"/>
<area shape="rect" id="node7" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="559,157,637,184"/>
</map>
</div>

</div>
</div>
<a id="a00b5db14e24d7ada8a42aa6b3f1a1cb7"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a00b5db14e24d7ada8a42aa6b3f1a1cb7">&#9670;&nbsp;</a></span>halStorageFinishTransaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageFinishTransaction </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Finish a storage transaction. </p>
<p>This method is used to stop a transaction and needs to be called AFTER storage access, enabling other tasks to acquire the storage module.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction to be finished </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if the tid is freed, ESP_FAIL if the tid is not valid </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01541">1541</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00652">cmdDe()</a>, <a class="el" href="task__commands_8c_source.html#l00661">cmdDl()</a>, <a class="el" href="task__commands_8c_source.html#l00670">cmdDn()</a>, <a class="el" href="task__commands_8c_source.html#l00825">cmdIc()</a>, <a class="el" href="task__commands_8c_source.html#l00861">cmdIl()</a>, <a class="el" href="task__commands_8c_source.html#l00847">cmdIw()</a>, <a class="el" href="task__commands_8c_source.html#l00899">cmdIx()</a>, <a class="el" href="config__switcher_8c_source.html#l00171">configSwitcherTask()</a>, <a class="el" href="fct__infrared_8c_source.html#l00090">fct_infrared_record()</a>, <a class="el" href="fct__infrared_8c_source.html#l00046">fct_infrared_send()</a>, <a class="el" href="task__commands_8c_source.html#l01491">printAllSlots()</a>, <a class="el" href="task__commands_8c_source.html#l01547">storeSlot()</a>, and <a class="el" href="task__webgui_8c_source.html#l00626">taskWebGUIInit()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a00b5db14e24d7ada8a42aa6b3f1a1cb7_icgraph.png" border="0" usemap="#hal__storage_8c_a00b5db14e24d7ada8a42aa6b3f1a1cb7_icgraph" alt=""/></div>
<map name="hal__storage_8c_a00b5db14e24d7ada8a42aa6b3f1a1cb7_icgraph" id="hal__storage_8c_a00b5db14e24d7ada8a42aa6b3f1a1cb7_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a0d9cf254674af930139a09407bec9b43" title="cmdDe" alt="" coords="277,5,341,32"/>
<area shape="rect" id="node3" href="task__commands_8c.html#afbad6064c581c3d233152a3c9db07fbb" title="cmdDl" alt="" coords="279,56,339,83"/>
<area shape="rect" id="node4" href="task__commands_8c.html#ac030838bfc9da5b3dc3b3357b0606485" title="cmdDn" alt="" coords="277,107,341,133"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a1db6c92c2f6719e2f2a903264c1243fb" title="cmdIc" alt="" coords="279,157,338,184"/>
<area shape="rect" id="node6" href="task__commands_8c.html#a1fb6206a7527fe4fd1ec9e4a2a86ee38" title="cmdIl" alt="" coords="281,208,336,235"/>
<area shape="rect" id="node7" href="task__commands_8c.html#a10b36ddce6fe6773cfcc5af7ac244789" title="cmdIw" alt="" coords="278,259,339,285"/>
<area shape="rect" id="node8" href="task__commands_8c.html#a036bffacb3ed98e93e97219423316d19" title="cmdIx" alt="" coords="279,309,338,336"/>
<area shape="rect" id="node9" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="240,461,377,488"/>
<area shape="rect" id="node12" href="fct__infrared_8h.html#ae5a80358b704f40a25177af616be7c9b" title="FUNCTION &#45; Trigger an IR command recording. " alt="" coords="243,411,374,437"/>
<area shape="rect" id="node14" href="fct__infrared_8h.html#a18c2e233aa3a793f43ccb3f67fe90122" title="FUNCTION &#45; Infrared command sending. " alt="" coords="247,512,370,539"/>
<area shape="rect" id="node18" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="263,639,355,665"/>
<area shape="rect" id="node27" href="task__commands_8c.html#a78b669ea961463eb05d2016e0b41ff86" title="Save current config to flash. " alt="" coords="271,715,346,741"/>
<area shape="rect" id="node29" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="626,385,742,412"/>
<area shape="rect" id="node10" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="621,461,747,488"/>
<area shape="rect" id="node11" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="835,461,913,488"/>
<area shape="rect" id="node13" href="task__commands_8c.html#a3772e6f0e110a542c61c89956753d6d2" title="cmdIr" alt="" coords="452,411,507,437"/>
<area shape="rect" id="node15" href="task__commands_8c.html#a99816ffcf00174a5f57870b07622dadb" title="cmdIp" alt="" coords="450,512,509,539"/>
<area shape="rect" id="node16" href="handler__vb_8c.html#a60c71b4a6cc8a9a3e9e8a3c8e36cffa0" title="VB event handler, triggering VB general actions. " alt="" coords="437,563,522,589"/>
<area shape="rect" id="node17" href="handler__vb_8h.html#ac54a8826a70d3aaf5c284bab02b93444" title="Init for the VB handler. " alt="" coords="629,537,739,564"/>
<area shape="rect" id="node19" href="task__commands_8c.html#aeefecfe074b759e4cb2d947aa2c26f98" title="cmdLa" alt="" coords="449,664,510,691"/>
<area shape="rect" id="node20" href="task__commands_8c.html#ab54ad30076339911d3ffc3a8834a1958" title="cmdLi" alt="" coords="451,613,508,640"/>
<area shape="rect" id="node21" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="425,715,533,741"/>
<area shape="rect" id="node22" href="task__commands_8c.html#a48f6d7719b9f1d99a9ead7c2aa623e22" title="keyboard_helper_parsekeycode" alt="" coords="581,715,787,741"/>
<area shape="rect" id="node23" href="task__commands_8c.html#aec535c106610969fcf7b9589f08c4d6e" title="cmdKh" alt="" coords="843,689,905,716"/>
<area shape="rect" id="node24" href="task__commands_8c.html#a43e8a43643ac7048c95d0c6922dcdcd9" title="cmdKp" alt="" coords="843,740,905,767"/>
<area shape="rect" id="node25" href="task__commands_8c.html#a8762283490f363d0f98506fa908a228c" title="cmdKr" alt="" coords="844,791,904,817"/>
<area shape="rect" id="node26" href="task__commands_8c.html#ab90e3fb0ef55d084b15aae27f76ab0d9" title="cmdKt" alt="" coords="844,639,904,665"/>
<area shape="rect" id="node28" href="task__commands_8c.html#ab06b29638d917a9356bda072e158449e" title="cmdSa" alt="" coords="448,765,511,792"/>
</map>
</div>

</div>
</div>
<a id="aa5da838bef47becbd2b5bd96a60c75b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa5da838bef47becbd2b5bd96a60c75b3">&#9670;&nbsp;</a></span>halStorageGetCurrentSlotNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t halStorageGetCurrentSlotNumber </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get number of currently loaded slot. </p>
<p>An empty device will return 0</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#a5c097404b5dfa34bdac65865586dac5a" title="Currently activated slot number. ">storageCurrentSlotNumber</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>Currently loaded slot number </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00346">346</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00171">configSwitcherTask()</a>, and <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00082">switch_radio()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aa5da838bef47becbd2b5bd96a60c75b3_icgraph.png" border="0" usemap="#hal__storage_8c_aa5da838bef47becbd2b5bd96a60c75b3_icgraph" alt=""/></div>
<map name="hal__storage_8c_aa5da838bef47becbd2b5bd96a60c75b3_icgraph" id="hal__storage_8c_aa5da838bef47becbd2b5bd96a60c75b3_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="224,5,361,32"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#a93e2ea21db142b4c7172565051a18cb1" title="Switch radio mode. " alt="" coords="425,56,520,83"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="409,5,536,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="584,31,663,57"/>
</map>
</div>

</div>
</div>
<a id="a18ba4afaa3fc6e4c16180a79c330ad41"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18ba4afaa3fc6e4c16180a79c330ad41">&#9670;&nbsp;</a></span>halStorageGetFree()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetFree </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>total</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>free</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get free memory (IR &amp; slot storage) </p>
<p>This method returns the number of total and free bytes in current used persistant memory (used for storing IR commands and slot storage).</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">total</td><td>Pointer where the number of total possible bytes is stored </td></tr>
    <tr><td class="paramname">free</td><td>Pointer where the number of free bytes is stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if reading is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00175">175</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00306">cmdFr()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a18ba4afaa3fc6e4c16180a79c330ad41_icgraph.png" border="0" usemap="#hal__storage_8c_a18ba4afaa3fc6e4c16180a79c330ad41_icgraph" alt=""/></div>
<map name="hal__storage_8c_a18ba4afaa3fc6e4c16180a79c330ad41_icgraph" id="hal__storage_8c_a18ba4afaa3fc6e4c16180a79c330ad41_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a31cccaf280c3dd24b0b9754a4f306226" title="cmdFr" alt="" coords="184,5,243,32"/>
</map>
</div>

</div>
</div>
<a id="ae5e6fcc8c1bdff7f78009830bc78f260"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae5e6fcc8c1bdff7f78009830bc78f260">&#9670;&nbsp;</a></span>halStorageGetFreeIRCmdSlot()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetFreeIRCmdSlot </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>slotavailable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of first available slot for an IR command. </p>
<p>This method returns the number of the first available IR command slot. An empty device will return 0, a full device 250</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotavailable</td><td>Variable where the free slot number will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot count is valid, ESP_FAIL otherwise (no free slot) </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00587">587</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l01279">halStorageStoreIR()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_ae5e6fcc8c1bdff7f78009830bc78f260_cgraph.png" border="0" usemap="#hal__storage_8c_ae5e6fcc8c1bdff7f78009830bc78f260_cgraph" alt=""/></div>
<map name="hal__storage_8c_ae5e6fcc8c1bdff7f78009830bc78f260_cgraph" id="hal__storage_8c_ae5e6fcc8c1bdff7f78009830bc78f260_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="512,5,641,32"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a1495c793604980c76b334f6a6d553c3c" title="Get the number of stored IR commands. " alt="" coords="249,31,464,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_ae5e6fcc8c1bdff7f78009830bc78f260_icgraph.png" border="0" usemap="#hal__storage_8c_ae5e6fcc8c1bdff7f78009830bc78f260_icgraph" alt=""/></div>
<map name="hal__storage_8c_ae5e6fcc8c1bdff7f78009830bc78f260_icgraph" id="hal__storage_8c_ae5e6fcc8c1bdff7f78009830bc78f260_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#ace0ac79b0e2b273d97e5b806de9eb493" title="Store an infrared command to storage. " alt="" coords="249,5,379,32"/>
<area shape="rect" id="node3" href="fct__infrared_8h.html#ae5a80358b704f40a25177af616be7c9b" title="FUNCTION &#45; Trigger an IR command recording. " alt="" coords="427,5,557,32"/>
<area shape="rect" id="node4" href="task__commands_8c.html#a3772e6f0e110a542c61c89956753d6d2" title="cmdIr" alt="" coords="605,5,660,32"/>
</map>
</div>

</div>
</div>
<a id="a2046481d14910cc6a5b0086a796f293b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2046481d14910cc6a5b0086a796f293b">&#9670;&nbsp;</a></span>halStorageGetNameForNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNameForNumber </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>slotname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the name of a slot number. </p>
<p>This method returns the name of the given slot number. An invalid slotnumber will return ESP_FAIL and an unchanged slotname</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotname</td><td>Memory to store the slotname to. Attention: minimum length: SLOTNAME_LENGTH+1 </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Number of slot to be loaded </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="common_8h.html#ab05a6082c57cf5ad37e922cbfde77a88">SLOTNAME_LENGTH</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot number is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00638">638</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00712">halStorageGetNumberForName()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_cgraph.png" border="0" usemap="#hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_cgraph" alt=""/></div>
<map name="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_cgraph" id="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="259,5,388,32"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a76299b86e144434260dcab80323ec9da" title="Strips away t and 
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_icgraph.png" border="0" usemap="#hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_icgraph" alt=""/></div>
<map name="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_icgraph" id="hal__storage_8c_a2046481d14910cc6a5b0086a796f293b_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#aae19bcf97360ccd7af4ddf906ff85141" title="Get the number of a slotname. " alt="" coords="259,109,464,136"/>
<area shape="rect" id="node3" href="task__commands_8c.html#ac030838bfc9da5b3dc3b3357b0606485" title="cmdDn" alt="" coords="553,59,617,85"/>
<area shape="rect" id="node4" href="task__commands_8c.html#a78b669ea961463eb05d2016e0b41ff86" title="Save current config to flash. " alt="" coords="548,109,623,136"/>
<area shape="rect" id="node12" href="hal__storage_8h.html#a57cdf5734cdbad3dbb5f18f71dd27501" title="Load a slot by a slot name. " alt="" coords="512,167,659,193"/>
<area shape="rect" id="node5" href="task__commands_8c.html#ab06b29638d917a9356bda072e158449e" title="cmdSa" alt="" coords="744,59,807,85"/>
<area shape="rect" id="node6" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="721,109,829,136"/>
<area shape="rect" id="node7" href="task__commands_8c.html#a48f6d7719b9f1d99a9ead7c2aa623e22" title="keyboard_helper_parsekeycode" alt="" coords="892,107,1097,133"/>
<area shape="rect" id="node8" href="task__commands_8c.html#aec535c106610969fcf7b9589f08c4d6e" title="cmdKh" alt="" coords="1153,5,1216,32"/>
<area shape="rect" id="node9" href="task__commands_8c.html#a43e8a43643ac7048c95d0c6922dcdcd9" title="cmdKp" alt="" coords="1153,56,1216,83"/>
<area shape="rect" id="node10" href="task__commands_8c.html#a8762283490f363d0f98506fa908a228c" title="cmdKr" alt="" coords="1155,107,1215,133"/>
<area shape="rect" id="node11" href="task__commands_8c.html#ab90e3fb0ef55d084b15aae27f76ab0d9" title="cmdKt" alt="" coords="1155,157,1215,184"/>
<area shape="rect" id="node13" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="707,179,844,205"/>
<area shape="rect" id="node14" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="931,204,1058,231"/>
<area shape="rect" id="node15" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1145,208,1224,235"/>
</map>
</div>

</div>
</div>
<a id="a53912e9159b29e5fc974a127dbf0982f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53912e9159b29e5fc974a127dbf0982f">&#9670;&nbsp;</a></span>halStorageGetNameForNumberIR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNameForNumberIR </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmdName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the name of an infrared command stored at the given slot number. </p>
<p>This method returns the name of the given slot number for IR commands. An invalid slotnumber will return ESP_FAIL and an unchanged slotname</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">cmdName</td><td>Memory to store the command name to. Attention: minimum length: SLOTNAME_LENGTH+1 </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Number of slot to be loaded </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="common_8h.html#ab05a6082c57cf5ad37e922cbfde77a88">SLOTNAME_LENGTH</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot number is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00412">412</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00861">cmdIl()</a>, and <a class="el" href="hal__storage_8c_source.html#l00759">halStorageGetNumberForNameIR()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a53912e9159b29e5fc974a127dbf0982f_cgraph.png" border="0" usemap="#hal__storage_8c_a53912e9159b29e5fc974a127dbf0982f_cgraph" alt=""/></div>
<map name="hal__storage_8c_a53912e9159b29e5fc974a127dbf0982f_cgraph" id="hal__storage_8c_a53912e9159b29e5fc974a127dbf0982f_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="272,5,401,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a53912e9159b29e5fc974a127dbf0982f_icgraph.png" border="0" usemap="#hal__storage_8c_a53912e9159b29e5fc974a127dbf0982f_icgraph" alt=""/></div>
<map name="hal__storage_8c_a53912e9159b29e5fc974a127dbf0982f_icgraph" id="hal__storage_8c_a53912e9159b29e5fc974a127dbf0982f_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a1fb6206a7527fe4fd1ec9e4a2a86ee38" title="cmdIl" alt="" coords="354,5,409,32"/>
<area shape="rect" id="node3" href="hal__storage_8h.html#a531bc39bc2808762298d14b79ac453cd" title="Get the number of an IR command. " alt="" coords="272,56,491,83"/>
<area shape="rect" id="node4" href="task__commands_8c.html#a1db6c92c2f6719e2f2a903264c1243fb" title="cmdIc" alt="" coords="574,31,633,57"/>
<area shape="rect" id="node5" href="hal__storage_8h.html#ace0ac79b0e2b273d97e5b806de9eb493" title="Store an infrared command to storage. " alt="" coords="539,81,668,108"/>
<area shape="rect" id="node6" href="fct__infrared_8h.html#ae5a80358b704f40a25177af616be7c9b" title="FUNCTION &#45; Trigger an IR command recording. " alt="" coords="716,81,847,108"/>
<area shape="rect" id="node7" href="task__commands_8c.html#a3772e6f0e110a542c61c89956753d6d2" title="cmdIr" alt="" coords="895,81,949,108"/>
</map>
</div>

</div>
</div>
<a id="aae19bcf97360ccd7af4ddf906ff85141"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aae19bcf97360ccd7af4ddf906ff85141">&#9670;&nbsp;</a></span>halStorageGetNumberForName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNumberForName </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>slotname</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of a slotname. </p>
<p>This method returns the number of the given slotname. An invalid name will return ESP_FAIL and a slotnumber of 0</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotname</td><td>Name of the slot to be looked for </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Variable where the slot number will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot number is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00712">712</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00670">cmdDn()</a>, <a class="el" href="hal__storage_8c_source.html#l01114">halStorageLoadName()</a>, and <a class="el" href="task__commands_8c_source.html#l01547">storeSlot()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_cgraph.png" border="0" usemap="#hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_cgraph" alt=""/></div>
<map name="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_cgraph" id="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="512,5,641,32"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a2046481d14910cc6a5b0086a796f293b" title="Get the name of a slot number. " alt="" coords="259,56,464,83"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a76299b86e144434260dcab80323ec9da" title="Strips away t and 
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_icgraph.png" border="0" usemap="#hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_icgraph" alt=""/></div>
<map name="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_icgraph" id="hal__storage_8c_aae19bcf97360ccd7af4ddf906ff85141_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#ac030838bfc9da5b3dc3b3357b0606485" title="cmdDn" alt="" coords="300,5,364,32"/>
<area shape="rect" id="node3" href="hal__storage_8h.html#a57cdf5734cdbad3dbb5f18f71dd27501" title="Load a slot by a slot name. " alt="" coords="259,56,405,83"/>
<area shape="rect" id="node7" href="task__commands_8c.html#a78b669ea961463eb05d2016e0b41ff86" title="Save current config to flash. " alt="" coords="295,107,369,133"/>
<area shape="rect" id="node4" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="453,56,591,83"/>
<area shape="rect" id="node5" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="678,56,805,83"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="892,56,971,83"/>
<area shape="rect" id="node8" href="task__commands_8c.html#ab06b29638d917a9356bda072e158449e" title="cmdSa" alt="" coords="491,107,553,133"/>
<area shape="rect" id="node9" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="468,157,576,184"/>
<area shape="rect" id="node10" href="task__commands_8c.html#a48f6d7719b9f1d99a9ead7c2aa623e22" title="keyboard_helper_parsekeycode" alt="" coords="639,157,844,184"/>
<area shape="rect" id="node11" href="task__commands_8c.html#aec535c106610969fcf7b9589f08c4d6e" title="cmdKh" alt="" coords="900,107,963,133"/>
<area shape="rect" id="node12" href="task__commands_8c.html#a43e8a43643ac7048c95d0c6922dcdcd9" title="cmdKp" alt="" coords="900,157,963,184"/>
<area shape="rect" id="node13" href="task__commands_8c.html#a8762283490f363d0f98506fa908a228c" title="cmdKr" alt="" coords="901,208,961,235"/>
<area shape="rect" id="node14" href="task__commands_8c.html#ab90e3fb0ef55d084b15aae27f76ab0d9" title="cmdKt" alt="" coords="901,259,961,285"/>
</map>
</div>

</div>
</div>
<a id="a531bc39bc2808762298d14b79ac453cd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a531bc39bc2808762298d14b79ac453cd">&#9670;&nbsp;</a></span>halStorageGetNumberForNameIR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNumberForNameIR </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmdName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number for an IR cmd name. </p>
<p>Get the number of an IR command.</p>
<p>This method returns the number of the given IR command name. An invalid name will return ESP_OK and a slotnumber of 0xFF.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">cmdName</td><td>Name of the IR command to look for </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Variable where the slot number will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot number is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00759">759</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00825">cmdIc()</a>, and <a class="el" href="hal__storage_8c_source.html#l01279">halStorageStoreIR()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a531bc39bc2808762298d14b79ac453cd_cgraph.png" border="0" usemap="#hal__storage_8c_a531bc39bc2808762298d14b79ac453cd_cgraph" alt=""/></div>
<map name="hal__storage_8c_a531bc39bc2808762298d14b79ac453cd_cgraph" id="hal__storage_8c_a531bc39bc2808762298d14b79ac453cd_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="539,5,668,32"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a53912e9159b29e5fc974a127dbf0982f" title="Get the name of an infrared command stored at the given slot number. " alt="" coords="272,31,491,57"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a531bc39bc2808762298d14b79ac453cd_icgraph.png" border="0" usemap="#hal__storage_8c_a531bc39bc2808762298d14b79ac453cd_icgraph" alt=""/></div>
<map name="hal__storage_8c_a531bc39bc2808762298d14b79ac453cd_icgraph" id="hal__storage_8c_a531bc39bc2808762298d14b79ac453cd_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a1db6c92c2f6719e2f2a903264c1243fb" title="cmdIc" alt="" coords="307,5,366,32"/>
<area shape="rect" id="node3" href="hal__storage_8h.html#ace0ac79b0e2b273d97e5b806de9eb493" title="Store an infrared command to storage. " alt="" coords="272,56,401,83"/>
<area shape="rect" id="node4" href="fct__infrared_8h.html#ae5a80358b704f40a25177af616be7c9b" title="FUNCTION &#45; Trigger an IR command recording. " alt="" coords="449,56,580,83"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a3772e6f0e110a542c61c89956753d6d2" title="cmdIr" alt="" coords="628,56,683,83"/>
</map>
</div>

</div>
</div>
<a id="a1495c793604980c76b334f6a6d553c3c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1495c793604980c76b334f6a6d553c3c">&#9670;&nbsp;</a></span>halStorageGetNumberOfIRCmds()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNumberOfIRCmds </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>slotsavailable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of stored IR commands. </p>
<p>This method returns the number of available IR commands. An empty device will return 0</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotsavailable</td><td>Variable where the slot count will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot count is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00543">543</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00861">cmdIl()</a>, and <a class="el" href="hal__storage_8c_source.html#l00587">halStorageGetFreeIRCmdSlot()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a1495c793604980c76b334f6a6d553c3c_cgraph.png" border="0" usemap="#hal__storage_8c_a1495c793604980c76b334f6a6d553c3c_cgraph" alt=""/></div>
<map name="hal__storage_8c_a1495c793604980c76b334f6a6d553c3c_cgraph" id="hal__storage_8c_a1495c793604980c76b334f6a6d553c3c_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="268,5,397,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a1495c793604980c76b334f6a6d553c3c_icgraph.png" border="0" usemap="#hal__storage_8c_a1495c793604980c76b334f6a6d553c3c_icgraph" alt=""/></div>
<map name="hal__storage_8c_a1495c793604980c76b334f6a6d553c3c_icgraph" id="hal__storage_8c_a1495c793604980c76b334f6a6d553c3c_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a1fb6206a7527fe4fd1ec9e4a2a86ee38" title="cmdIl" alt="" coords="339,5,393,32"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#ae5e6fcc8c1bdff7f78009830bc78f260" title="Get the number of first available slot for an IR command. " alt="" coords="268,56,464,83"/>
<area shape="rect" id="node4" href="hal__storage_8h.html#ace0ac79b0e2b273d97e5b806de9eb493" title="Store an infrared command to storage. " alt="" coords="512,56,641,83"/>
<area shape="rect" id="node5" href="fct__infrared_8h.html#ae5a80358b704f40a25177af616be7c9b" title="FUNCTION &#45; Trigger an IR command recording. " alt="" coords="689,56,820,83"/>
<area shape="rect" id="node6" href="task__commands_8c.html#a3772e6f0e110a542c61c89956753d6d2" title="cmdIr" alt="" coords="868,56,923,83"/>
</map>
</div>

</div>
</div>
<a id="a7e0a934f829b47e2445189dd95e962d6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7e0a934f829b47e2445189dd95e962d6">&#9670;&nbsp;</a></span>halStorageGetNumberOfSlots()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageGetNumberOfSlots </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>slotsavailable</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Get the number of stored slots. </p>
<p>This method returns the number of available slots (the default slot is not counted). An empty device will return 0</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">slotsavailable</td><td>Variable where the slot count will be stored </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if tid is valid and slot count is valid, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00363">363</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00817">halStorageLoad()</a>, <a class="el" href="task__commands_8c_source.html#l01491">printAllSlots()</a>, and <a class="el" href="task__commands_8c_source.html#l01547">storeSlot()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_cgraph.png" border="0" usemap="#hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_cgraph" alt=""/></div>
<map name="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_cgraph" id="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="248,5,377,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_icgraph.png" border="0" usemap="#hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_icgraph" alt=""/></div>
<map name="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_icgraph" id="hal__storage_8c_a7e0a934f829b47e2445189dd95e962d6_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#afffed2d32aac2287e95d943dd588db6c" title="Load a slot by an action. " alt="" coords="248,31,360,57"/>
<area shape="rect" id="node6" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="258,107,350,133"/>
<area shape="rect" id="node15" href="task__commands_8c.html#a78b669ea961463eb05d2016e0b41ff86" title="Save current config to flash. " alt="" coords="267,157,341,184"/>
<area shape="rect" id="node3" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="408,5,545,32"/>
<area shape="rect" id="node4" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="633,5,759,32"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="847,5,925,32"/>
<area shape="rect" id="node7" href="task__commands_8c.html#aeefecfe074b759e4cb2d947aa2c26f98" title="cmdLa" alt="" coords="446,56,507,83"/>
<area shape="rect" id="node8" href="task__commands_8c.html#ab54ad30076339911d3ffc3a8834a1958" title="cmdLi" alt="" coords="448,107,505,133"/>
<area shape="rect" id="node9" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="423,157,531,184"/>
<area shape="rect" id="node10" href="task__commands_8c.html#a48f6d7719b9f1d99a9ead7c2aa623e22" title="keyboard_helper_parsekeycode" alt="" coords="593,157,799,184"/>
<area shape="rect" id="node11" href="task__commands_8c.html#aec535c106610969fcf7b9589f08c4d6e" title="cmdKh" alt="" coords="855,81,917,108"/>
<area shape="rect" id="node12" href="task__commands_8c.html#a43e8a43643ac7048c95d0c6922dcdcd9" title="cmdKp" alt="" coords="855,132,917,159"/>
<area shape="rect" id="node13" href="task__commands_8c.html#a8762283490f363d0f98506fa908a228c" title="cmdKr" alt="" coords="856,183,916,209"/>
<area shape="rect" id="node14" href="task__commands_8c.html#ab90e3fb0ef55d084b15aae27f76ab0d9" title="cmdKt" alt="" coords="856,233,916,260"/>
<area shape="rect" id="node16" href="task__commands_8c.html#ab06b29638d917a9356bda072e158449e" title="cmdSa" alt="" coords="445,208,508,235"/>
</map>
</div>

</div>
</div>
<a id="a606e5842dd354f1fb4a738ba95c6d5d1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a606e5842dd354f1fb4a738ba95c6d5d1">&#9670;&nbsp;</a></span>halStorageInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>internal function to init the filesystem if handle is invalid </p>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00200">200</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l01487">halStorageStartTransaction()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a606e5842dd354f1fb4a738ba95c6d5d1_icgraph.png" border="0" usemap="#hal__storage_8c_a606e5842dd354f1fb4a738ba95c6d5d1_icgraph" alt=""/></div>
<map name="hal__storage_8c_a606e5842dd354f1fb4a738ba95c6d5d1_icgraph" id="hal__storage_8c_a606e5842dd354f1fb4a738ba95c6d5d1_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. " alt="" coords="156,327,336,354"/>
<area shape="rect" id="node3" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="384,74,521,101"/>
<area shape="rect" id="node6" href="fct__infrared_8h.html#a18c2e233aa3a793f43ccb3f67fe90122" title="FUNCTION &#45; Infrared command sending. " alt="" coords="391,530,514,557"/>
<area shape="rect" id="node10" href="fct__infrared_8h.html#ae5a80358b704f40a25177af616be7c9b" title="FUNCTION &#45; Trigger an IR command recording. " alt="" coords="387,125,518,151"/>
<area shape="rect" id="node12" href="task__commands_8c.html#a0d9cf254674af930139a09407bec9b43" title="cmdDe" alt="" coords="421,175,485,202"/>
<area shape="rect" id="node13" href="task__commands_8c.html#afbad6064c581c3d233152a3c9db07fbb" title="cmdDl" alt="" coords="423,226,483,253"/>
<area shape="rect" id="node14" href="task__commands_8c.html#ac030838bfc9da5b3dc3b3357b0606485" title="cmdDn" alt="" coords="421,277,485,303"/>
<area shape="rect" id="node15" href="task__commands_8c.html#a1db6c92c2f6719e2f2a903264c1243fb" title="cmdIc" alt="" coords="423,327,482,354"/>
<area shape="rect" id="node16" href="task__commands_8c.html#a10b36ddce6fe6773cfcc5af7ac244789" title="cmdIw" alt="" coords="422,378,483,405"/>
<area shape="rect" id="node17" href="task__commands_8c.html#a1fb6206a7527fe4fd1ec9e4a2a86ee38" title="cmdIl" alt="" coords="425,429,480,455"/>
<area shape="rect" id="node18" href="task__commands_8c.html#a036bffacb3ed98e93e97219423316d19" title="cmdIx" alt="" coords="423,479,482,506"/>
<area shape="rect" id="node19" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="407,581,499,607"/>
<area shape="rect" id="node28" href="task__commands_8c.html#a78b669ea961463eb05d2016e0b41ff86" title="Save current config to flash. " alt="" coords="415,631,490,658"/>
<area shape="rect" id="node30" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="770,23,886,50"/>
<area shape="rect" id="node4" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="765,74,891,101"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="979,74,1057,101"/>
<area shape="rect" id="node7" href="task__commands_8c.html#a99816ffcf00174a5f57870b07622dadb" title="cmdIp" alt="" coords="594,429,653,455"/>
<area shape="rect" id="node8" href="handler__vb_8c.html#a60c71b4a6cc8a9a3e9e8a3c8e36cffa0" title="VB event handler, triggering VB general actions. " alt="" coords="581,479,666,506"/>
<area shape="rect" id="node9" href="handler__vb_8h.html#ac54a8826a70d3aaf5c284bab02b93444" title="Init for the VB handler. " alt="" coords="773,302,883,329"/>
<area shape="rect" id="node11" href="task__commands_8c.html#a3772e6f0e110a542c61c89956753d6d2" title="cmdIr" alt="" coords="596,125,651,151"/>
<area shape="rect" id="node20" href="task__commands_8c.html#aeefecfe074b759e4cb2d947aa2c26f98" title="cmdLa" alt="" coords="593,581,654,607"/>
<area shape="rect" id="node21" href="task__commands_8c.html#ab54ad30076339911d3ffc3a8834a1958" title="cmdLi" alt="" coords="595,530,652,557"/>
<area shape="rect" id="node22" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="569,631,677,658"/>
<area shape="rect" id="node23" href="task__commands_8c.html#a48f6d7719b9f1d99a9ead7c2aa623e22" title="keyboard_helper_parsekeycode" alt="" coords="725,631,931,658"/>
<area shape="rect" id="node24" href="task__commands_8c.html#aec535c106610969fcf7b9589f08c4d6e" title="cmdKh" alt="" coords="987,606,1049,633"/>
<area shape="rect" id="node25" href="task__commands_8c.html#a43e8a43643ac7048c95d0c6922dcdcd9" title="cmdKp" alt="" coords="987,657,1049,683"/>
<area shape="rect" id="node26" href="task__commands_8c.html#a8762283490f363d0f98506fa908a228c" title="cmdKr" alt="" coords="988,707,1048,734"/>
<area shape="rect" id="node27" href="task__commands_8c.html#ab90e3fb0ef55d084b15aae27f76ab0d9" title="cmdKt" alt="" coords="988,555,1048,582"/>
<area shape="rect" id="node29" href="task__commands_8c.html#ab06b29638d917a9356bda072e158449e" title="cmdSa" alt="" coords="592,682,655,709"/>
</map>
</div>

</div>
</div>
<a id="afffed2d32aac2287e95d943dd588db6c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afffed2d32aac2287e95d943dd588db6c">&#9670;&nbsp;</a></span>halStorageLoad()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoad </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95">hal_storage_load_action</a>&#160;</td>
          <td class="paramname"><em>navigate</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a slot by an action. </p>
<p>This method loads a slot &amp; saves the general config to the given config struct pointer. The slot is defined by the navigate parameter, using next/prev/default</p>
<p>To start loading a slot, call halStorageStartTransaction to acquire a load/store transaction id. This is necessary to enable multitask access.</p>
<p>After loading the general config, load all virtual button configs via halStorageLoadGetVBConfigs to have all necessary slot data.</p>
<p>Finally, if all data is loaded, call halStorageFinishTransaction to free the storage access to the other tasks or the next call.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#abc699ff3996d12d3e6bcc9e372b277e0" title="Load one virtual button config for currently loaded slot. ">halStorageLoadGetVBConfigs</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#a8a4828abe0b7cd309fba5c2e5e228b95">hal_storage_load_action</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">navigate</td><td>Action defining the next loaded slot (default or prev/next) </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00817">817</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00171">configSwitcherTask()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_afffed2d32aac2287e95d943dd588db6c_cgraph.png" border="0" usemap="#hal__storage_8c_afffed2d32aac2287e95d943dd588db6c_cgraph" alt=""/></div>
<map name="hal__storage_8c_afffed2d32aac2287e95d943dd588db6c_cgraph" id="hal__storage_8c_afffed2d32aac2287e95d943dd588db6c_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a7e0a934f829b47e2445189dd95e962d6" title="Get the number of stored slots. " alt="" coords="165,5,360,32"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a670ba7fad19e9a70672d73897785712f" title="Load a slot by a slot number (starting with 0) " alt="" coords="183,81,342,108"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="621,31,751,57"/>
<area shape="rect" id="node5" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="408,81,573,108"/>
<area shape="rect" id="node6" href="hal__storage_8c.html#a76299b86e144434260dcab80323ec9da" title="Strips away t and 
<area shape="rect" id="node7" href="hal__serial_8c.html#af78683f30da18cfc19c2c91006ec6155" title="Send serial bytes to USB&#45;Serial (USB&#45;CDC) " alt="" coords="409,183,572,209"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_afffed2d32aac2287e95d943dd588db6c_icgraph.png" border="0" usemap="#hal__storage_8c_afffed2d32aac2287e95d943dd588db6c_icgraph" alt=""/></div>
<map name="hal__storage_8c_afffed2d32aac2287e95d943dd588db6c_icgraph" id="hal__storage_8c_afffed2d32aac2287e95d943dd588db6c_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="165,5,303,32"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="351,5,477,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="525,5,604,32"/>
</map>
</div>

</div>
</div>
<a id="aa728fac6a17066ecb910c19338ae5288"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa728fac6a17066ecb910c19338ae5288">&#9670;&nbsp;</a></span>halStorageLoadIR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoadIR </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmdName</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#af531911959683790ca7ae870f8462a16">halIOIR_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load an IR command by name. </p>
<p>This method loads an IR command from storage. The slot is defined by the slot name.</p>
<p>To start loading a command, call halStorageStartTransaction to acquire a load/store transaction id. This is necessary to enable multitask access. Finally, if the command is loaded, call halStorageFinishTransaction to free the storage access to the other tasks or the next call.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cmdName</td><td>Name of the slot to be loaded </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
    <tr><td class="paramname">cfg</td><td>Pointer to a general config struct, which will be used to load the slot into </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful (slot name not found) </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01371">1371</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="fct__infrared_8c_source.html#l00046">fct_infrared_send()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aa728fac6a17066ecb910c19338ae5288_cgraph.png" border="0" usemap="#hal__storage_8c_aa728fac6a17066ecb910c19338ae5288_cgraph" alt=""/></div>
<map name="hal__storage_8c_aa728fac6a17066ecb910c19338ae5288_cgraph" id="hal__storage_8c_aa728fac6a17066ecb910c19338ae5288_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="180,5,309,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aa728fac6a17066ecb910c19338ae5288_icgraph.png" border="0" usemap="#hal__storage_8c_aa728fac6a17066ecb910c19338ae5288_icgraph" alt=""/></div>
<map name="hal__storage_8c_aa728fac6a17066ecb910c19338ae5288_icgraph" id="hal__storage_8c_aa728fac6a17066ecb910c19338ae5288_icgraph">
<area shape="rect" id="node2" href="fct__infrared_8h.html#a18c2e233aa3a793f43ccb3f67fe90122" title="FUNCTION &#45; Infrared command sending. " alt="" coords="180,31,303,57"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a99816ffcf00174a5f57870b07622dadb" title="cmdIp" alt="" coords="364,5,423,32"/>
<area shape="rect" id="node4" href="handler__vb_8c.html#a60c71b4a6cc8a9a3e9e8a3c8e36cffa0" title="VB event handler, triggering VB general actions. " alt="" coords="351,56,436,83"/>
<area shape="rect" id="node5" href="handler__vb_8h.html#ac54a8826a70d3aaf5c284bab02b93444" title="Init for the VB handler. " alt="" coords="484,56,593,83"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="641,56,720,83"/>
</map>
</div>

</div>
</div>
<a id="a57cdf5734cdbad3dbb5f18f71dd27501"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57cdf5734cdbad3dbb5f18f71dd27501">&#9670;&nbsp;</a></span>halStorageLoadName()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoadName </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>slotname</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a slot by a slot name. </p>
<p>This method loads a slot &amp; saves the general config to the given config struct pointer. The slot is defined by the slot name.</p>
<p>To start loading a slot, call halStorageStartTransaction to acquire a load/store transaction id. This is necessary to enable multitask access.</p>
<p>After loading the general config, load all virtual button configs via halStorageLoadGetVBConfigs to have all necessary slot data</p>
<p>Finally, if all data is loaded, call halStorageFinishTransaction to free the storage access to the other tasks or the next call.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8h.html#abc699ff3996d12d3e6bcc9e372b277e0" title="Load one virtual button config for currently loaded slot. ">halStorageLoadGetVBConfigs</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotname</td><td>Name of the slot to be loaded </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful (slot name not found) </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01114">1114</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="config__switcher_8c_source.html#l00171">configSwitcherTask()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a57cdf5734cdbad3dbb5f18f71dd27501_cgraph.png" border="0" usemap="#hal__storage_8c_a57cdf5734cdbad3dbb5f18f71dd27501_cgraph" alt=""/></div>
<map name="hal__storage_8c_a57cdf5734cdbad3dbb5f18f71dd27501_cgraph" id="hal__storage_8c_a57cdf5734cdbad3dbb5f18f71dd27501_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#aae19bcf97360ccd7af4ddf906ff85141" title="Get the number of a slotname. " alt="" coords="200,157,405,184"/>
<area shape="rect" id="node6" href="hal__storage_8c.html#a670ba7fad19e9a70672d73897785712f" title="Load a slot by a slot number (starting with 0) " alt="" coords="223,107,382,133"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="707,183,836,209"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a2046481d14910cc6a5b0086a796f293b" title="Get the name of a slot number. " alt="" coords="453,157,659,184"/>
<area shape="rect" id="node5" href="hal__storage_8c.html#a76299b86e144434260dcab80323ec9da" title="Strips away t and 
<area shape="rect" id="node7" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="473,208,639,235"/>
<area shape="rect" id="node8" href="hal__serial_8c.html#af78683f30da18cfc19c2c91006ec6155" title="Send serial bytes to USB&#45;Serial (USB&#45;CDC) " alt="" coords="475,5,637,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a57cdf5734cdbad3dbb5f18f71dd27501_icgraph.png" border="0" usemap="#hal__storage_8c_a57cdf5734cdbad3dbb5f18f71dd27501_icgraph" alt=""/></div>
<map name="hal__storage_8c_a57cdf5734cdbad3dbb5f18f71dd27501_icgraph" id="hal__storage_8c_a57cdf5734cdbad3dbb5f18f71dd27501_icgraph">
<area shape="rect" id="node2" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="200,5,337,32"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="385,5,512,32"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="560,5,639,32"/>
</map>
</div>

</div>
</div>
<a id="a670ba7fad19e9a70672d73897785712f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a670ba7fad19e9a70672d73897785712f">&#9670;&nbsp;</a></span>halStorageLoadNumber()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageLoadNumber </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>outputSerial</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a slot by a slot number (starting with 0) </p>
<p>This method loads a slot &amp; saves the general config to the given config struct pointer. The slot is defined by the slotnumber, starting with 1. If you load the slot number 0, the default slot is loaded</p>
<p>To start loading a slot, call halStorageStartTransaction to acquire a load/store transaction id. This is necessary to enable multitask access.</p>
<p>After loading the general config, load all virtual button configs via halStorageLoadGetVBConfigs to have all necessary slot data</p>
<p>Finally, if all data is loaded, call halStorageFinishTransaction to free the storage access to the other tasks or the next call.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#aead99606f84645b2bb6ae000461bf819" title="Start a storage transaction. ">halStorageStartTransaction</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">slotnumber</td><td>Number of the slot to be loaded </td></tr>
    <tr><td class="paramname">tid</td><td>Transaction ID, which must match the one given by halStorageStartTransaction </td></tr>
    <tr><td class="paramname">outputSerial</td><td>Either the loaded AT commands are sent to the command parser (== 0) or sent to the serial output </td></tr>
  </table>
  </dd>
</dl>
<dl class="section note"><dt>Note</dt><dd>If sending to serial port, the slot name is printed as well ("Slot &lt;number&gt;:&lt;name&gt;).
@note If param outputserial is set to 1, the full config is printed. If set to 2, only slotnames are printed (used for "AT LI").
In addition, for compatibility reasons, AT LI outputs e.g. "Slot 1:mouse", AT LA outputs "Slot:mouse". </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if everything is fine, ESP_FAIL if the command was not successful (slot number not found) </dd></dl>
<dl class="section note"><dt>Note</dt><dd>we cannot print buffer here, might be already freed by <a class="el" href="task__commands_8c.html" title="CONTINOUS TASK - Main command parser for serial AT commands. ">task_commands.c</a></dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000028">Todo:</a></b></dt><dd>Ab hier wäre es wieder passend den debouncer zu aktivieren?!? </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00901">901</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00817">halStorageLoad()</a>, <a class="el" href="hal__storage_8c_source.html#l01114">halStorageLoadName()</a>, and <a class="el" href="task__commands_8c_source.html#l01491">printAllSlots()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a670ba7fad19e9a70672d73897785712f_cgraph.png" border="0" usemap="#hal__storage_8c_a670ba7fad19e9a70672d73897785712f_cgraph" alt=""/></div>
<map name="hal__storage_8c_a670ba7fad19e9a70672d73897785712f_cgraph" id="hal__storage_8c_a670ba7fad19e9a70672d73897785712f_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="425,5,555,32"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#aed4beb2e1bd8cd78a201fbcb49958cba" title="Create a new default slot. " alt="" coords="212,31,377,57"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a76299b86e144434260dcab80323ec9da" title="Strips away t and 
<area shape="rect" id="node5" href="hal__serial_8c.html#af78683f30da18cfc19c2c91006ec6155" title="Send serial bytes to USB&#45;Serial (USB&#45;CDC) " alt="" coords="213,132,376,159"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a670ba7fad19e9a70672d73897785712f_icgraph.png" border="0" usemap="#hal__storage_8c_a670ba7fad19e9a70672d73897785712f_icgraph" alt=""/></div>
<map name="hal__storage_8c_a670ba7fad19e9a70672d73897785712f_icgraph" id="hal__storage_8c_a670ba7fad19e9a70672d73897785712f_icgraph">
<area shape="rect" id="node2" href="hal__storage_8h.html#afffed2d32aac2287e95d943dd588db6c" title="Load a slot by an action. " alt="" coords="229,5,341,32"/>
<area shape="rect" id="node6" href="hal__storage_8h.html#a57cdf5734cdbad3dbb5f18f71dd27501" title="Load a slot by a slot name. " alt="" coords="212,56,359,83"/>
<area shape="rect" id="node7" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="239,107,331,133"/>
<area shape="rect" id="node3" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="407,5,544,32"/>
<area shape="rect" id="node4" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="631,5,758,32"/>
<area shape="rect" id="node5" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="845,5,924,32"/>
<area shape="rect" id="node8" href="task__commands_8c.html#aeefecfe074b759e4cb2d947aa2c26f98" title="cmdLa" alt="" coords="445,56,506,83"/>
<area shape="rect" id="node9" href="task__commands_8c.html#ab54ad30076339911d3ffc3a8834a1958" title="cmdLi" alt="" coords="447,107,504,133"/>
<area shape="rect" id="node10" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="421,157,529,184"/>
<area shape="rect" id="node11" href="task__commands_8c.html#a48f6d7719b9f1d99a9ead7c2aa623e22" title="keyboard_helper_parsekeycode" alt="" coords="592,157,797,184"/>
<area shape="rect" id="node12" href="task__commands_8c.html#aec535c106610969fcf7b9589f08c4d6e" title="cmdKh" alt="" coords="853,81,916,108"/>
<area shape="rect" id="node13" href="task__commands_8c.html#a43e8a43643ac7048c95d0c6922dcdcd9" title="cmdKp" alt="" coords="853,132,916,159"/>
<area shape="rect" id="node14" href="task__commands_8c.html#a8762283490f363d0f98506fa908a228c" title="cmdKr" alt="" coords="855,183,915,209"/>
<area shape="rect" id="node15" href="task__commands_8c.html#ab90e3fb0ef55d084b15aae27f76ab0d9" title="cmdKt" alt="" coords="855,233,915,260"/>
</map>
</div>

</div>
</div>
<a id="a63ec8e05a2bb4c214600e94b8ab05eea"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a63ec8e05a2bb4c214600e94b8ab05eea">&#9670;&nbsp;</a></span>halStorageNVSLoadString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageNVSLoadString </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Load a string from NVS (global, no slot assignment) </p>
<p>This method is used to load a string from a non-volatile storage. No TID is necessary, just call this function.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>Key to identify this value, same as used on store </td></tr>
    <tr><td class="paramname">string</td><td>Buffer for string to be read from flash/eeprom (flash in ESP32) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Provide sufficient buffer length, otherwise a CPU exception will happen! </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, error codes according to nvs_get_str </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00108">108</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00626">taskWebGUIInit()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a63ec8e05a2bb4c214600e94b8ab05eea_icgraph.png" border="0" usemap="#hal__storage_8c_a63ec8e05a2bb4c214600e94b8ab05eea_icgraph" alt=""/></div>
<map name="hal__storage_8c_a63ec8e05a2bb4c214600e94b8ab05eea_icgraph" id="hal__storage_8c_a63ec8e05a2bb4c214600e94b8ab05eea_icgraph">
<area shape="rect" id="node2" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="228,5,344,32"/>
<area shape="rect" id="node3" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="392,5,471,32"/>
</map>
</div>

</div>
</div>
<a id="aa545d76c7dcaafc129a03dfd9706ca7b"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa545d76c7dcaafc129a03dfd9706ca7b">&#9670;&nbsp;</a></span>halStorageNVSStoreString()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageNVSStoreString </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>string</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store a string into NVS (global, no slot assignment) </p>
<p>This method is used to store a string in a non-volatile storage. No TID is necessary, just call this function.</p>
<dl class="section warning"><dt>Warning</dt><dd>NVS is not as big as FAT storage, use with care! (max ~10kB) </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">key</td><td>Key to identify this value on read. </td></tr>
    <tr><td class="paramname">string</td><td>String to be stored in flash/eeprom (flash in ESP32) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, error codes according to nvs_set_str </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00140">140</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00316">cmdPw()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aa545d76c7dcaafc129a03dfd9706ca7b_icgraph.png" border="0" usemap="#hal__storage_8c_aa545d76c7dcaafc129a03dfd9706ca7b_icgraph" alt=""/></div>
<map name="hal__storage_8c_aa545d76c7dcaafc129a03dfd9706ca7b_icgraph" id="hal__storage_8c_aa545d76c7dcaafc129a03dfd9706ca7b_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a3af82ffb264b96d956b740544dfa100c" title="cmdPw" alt="" coords="231,5,297,32"/>
</map>
</div>

</div>
</div>
<a id="aead99606f84645b2bb6ae000461bf819"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aead99606f84645b2bb6ae000461bf819">&#9670;&nbsp;</a></span>halStorageStartTransaction()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageStartTransaction </td>
          <td>(</td>
          <td class="paramtype">uint32_t *&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TickType_t&#160;</td>
          <td class="paramname"><em>tickstowait</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>caller</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Start a storage transaction. </p>
<p>This method is used to start a transaction and needs to be called BEFORE any further storage access. If this function is successful (within the given ticks, the storage is getting free), a transaction ID is written, which should be used in further storage access.</p>
<p>After finishing, a transaction is terminated by halStorageFinishTransaction.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#a00b5db14e24d7ada8a42aa6b3f1a1cb7" title="Finish a storage transaction. ">halStorageFinishTransaction</a> </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction if this command was successful, 0 if not. </td></tr>
    <tr><td class="paramname">tickstowait</td><td>Maximum amount of ticks to wait for this command to be successful </td></tr>
    <tr><td class="paramname">caller</td><td>Name of calling task, used to track storage access </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK if the tid is valid, ESP_FAIL if other tasks did not freed the access in time </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01487">1487</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00652">cmdDe()</a>, <a class="el" href="task__commands_8c_source.html#l00661">cmdDl()</a>, <a class="el" href="task__commands_8c_source.html#l00670">cmdDn()</a>, <a class="el" href="task__commands_8c_source.html#l00825">cmdIc()</a>, <a class="el" href="task__commands_8c_source.html#l00861">cmdIl()</a>, <a class="el" href="task__commands_8c_source.html#l00847">cmdIw()</a>, <a class="el" href="task__commands_8c_source.html#l00899">cmdIx()</a>, <a class="el" href="config__switcher_8c_source.html#l00171">configSwitcherTask()</a>, <a class="el" href="fct__infrared_8c_source.html#l00090">fct_infrared_record()</a>, <a class="el" href="fct__infrared_8c_source.html#l00046">fct_infrared_send()</a>, <a class="el" href="task__commands_8c_source.html#l01491">printAllSlots()</a>, <a class="el" href="task__commands_8c_source.html#l01547">storeSlot()</a>, and <a class="el" href="task__webgui_8c_source.html#l00626">taskWebGUIInit()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aead99606f84645b2bb6ae000461bf819_cgraph.png" border="0" usemap="#hal__storage_8c_aead99606f84645b2bb6ae000461bf819_cgraph" alt=""/></div>
<map name="hal__storage_8c_aead99606f84645b2bb6ae000461bf819_cgraph" id="hal__storage_8c_aead99606f84645b2bb6ae000461bf819_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a606e5842dd354f1fb4a738ba95c6d5d1" title="internal function to init the filesystem if handle is invalid " alt="" coords="233,5,336,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_aead99606f84645b2bb6ae000461bf819_icgraph.png" border="0" usemap="#hal__storage_8c_aead99606f84645b2bb6ae000461bf819_icgraph" alt=""/></div>
<map name="hal__storage_8c_aead99606f84645b2bb6ae000461bf819_icgraph" id="hal__storage_8c_aead99606f84645b2bb6ae000461bf819_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a0d9cf254674af930139a09407bec9b43" title="cmdDe" alt="" coords="270,5,334,32"/>
<area shape="rect" id="node3" href="task__commands_8c.html#afbad6064c581c3d233152a3c9db07fbb" title="cmdDl" alt="" coords="272,56,332,83"/>
<area shape="rect" id="node4" href="task__commands_8c.html#ac030838bfc9da5b3dc3b3357b0606485" title="cmdDn" alt="" coords="270,107,334,133"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a1db6c92c2f6719e2f2a903264c1243fb" title="cmdIc" alt="" coords="273,157,331,184"/>
<area shape="rect" id="node6" href="task__commands_8c.html#a1fb6206a7527fe4fd1ec9e4a2a86ee38" title="cmdIl" alt="" coords="275,208,329,235"/>
<area shape="rect" id="node7" href="task__commands_8c.html#a10b36ddce6fe6773cfcc5af7ac244789" title="cmdIw" alt="" coords="271,259,333,285"/>
<area shape="rect" id="node8" href="task__commands_8c.html#a036bffacb3ed98e93e97219423316d19" title="cmdIx" alt="" coords="273,309,331,336"/>
<area shape="rect" id="node9" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="233,461,371,488"/>
<area shape="rect" id="node12" href="fct__infrared_8h.html#ae5a80358b704f40a25177af616be7c9b" title="FUNCTION &#45; Trigger an IR command recording. " alt="" coords="237,411,367,437"/>
<area shape="rect" id="node14" href="fct__infrared_8h.html#a18c2e233aa3a793f43ccb3f67fe90122" title="FUNCTION &#45; Infrared command sending. " alt="" coords="241,512,363,539"/>
<area shape="rect" id="node18" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="256,639,348,665"/>
<area shape="rect" id="node27" href="task__commands_8c.html#a78b669ea961463eb05d2016e0b41ff86" title="Save current config to flash. " alt="" coords="265,715,339,741"/>
<area shape="rect" id="node29" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="619,385,735,412"/>
<area shape="rect" id="node10" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="614,461,741,488"/>
<area shape="rect" id="node11" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="828,461,907,488"/>
<area shape="rect" id="node13" href="task__commands_8c.html#a3772e6f0e110a542c61c89956753d6d2" title="cmdIr" alt="" coords="445,411,500,437"/>
<area shape="rect" id="node15" href="task__commands_8c.html#a99816ffcf00174a5f57870b07622dadb" title="cmdIp" alt="" coords="443,512,502,539"/>
<area shape="rect" id="node16" href="handler__vb_8c.html#a60c71b4a6cc8a9a3e9e8a3c8e36cffa0" title="VB event handler, triggering VB general actions. " alt="" coords="430,563,515,589"/>
<area shape="rect" id="node17" href="handler__vb_8h.html#ac54a8826a70d3aaf5c284bab02b93444" title="Init for the VB handler. " alt="" coords="623,537,732,564"/>
<area shape="rect" id="node19" href="task__commands_8c.html#aeefecfe074b759e4cb2d947aa2c26f98" title="cmdLa" alt="" coords="442,664,503,691"/>
<area shape="rect" id="node20" href="task__commands_8c.html#ab54ad30076339911d3ffc3a8834a1958" title="cmdLi" alt="" coords="444,613,501,640"/>
<area shape="rect" id="node21" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="419,715,527,741"/>
<area shape="rect" id="node22" href="task__commands_8c.html#a48f6d7719b9f1d99a9ead7c2aa623e22" title="keyboard_helper_parsekeycode" alt="" coords="575,715,780,741"/>
<area shape="rect" id="node23" href="task__commands_8c.html#aec535c106610969fcf7b9589f08c4d6e" title="cmdKh" alt="" coords="836,689,899,716"/>
<area shape="rect" id="node24" href="task__commands_8c.html#a43e8a43643ac7048c95d0c6922dcdcd9" title="cmdKp" alt="" coords="836,740,899,767"/>
<area shape="rect" id="node25" href="task__commands_8c.html#a8762283490f363d0f98506fa908a228c" title="cmdKr" alt="" coords="837,791,897,817"/>
<area shape="rect" id="node26" href="task__commands_8c.html#ab90e3fb0ef55d084b15aae27f76ab0d9" title="cmdKt" alt="" coords="837,639,897,665"/>
<area shape="rect" id="node28" href="task__commands_8c.html#ab06b29638d917a9356bda072e158449e" title="cmdSa" alt="" coords="441,765,504,792"/>
</map>
</div>

</div>
</div>
<a id="a16be2ae040ef4db3b7fb11b46d07c7a1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a16be2ae040ef4db3b7fb11b46d07c7a1">&#9670;&nbsp;</a></span>halStorageStore()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageStore </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cfgstring</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>slotnumber</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store a slot. </p>
<p>If there is already a slot with this given number, it is overwritten!</p>
<p>!! All following halStorageStoreSetVBConfigs (except the parameter slotnumber is used there) are using this slotnumber until halStorageFinishTransaction is called !!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">cfgstring</td><td>Pointer to AT command. On first call use slotname here. </td></tr>
    <tr><td class="paramname">slotnumber</td><td>Number where to store this slot. Only used on first call! </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8h.html#a046daab088cb37e318c07c2728ade9d3" title="Store a virtual button config struct. ">halStorageStoreSetVBConfigs</a> </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000029">Todo:</a></b></dt><dd>not necessary anymore? </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01214">1214</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l01547">storeSlot()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a16be2ae040ef4db3b7fb11b46d07c7a1_cgraph.png" border="0" usemap="#hal__storage_8c_a16be2ae040ef4db3b7fb11b46d07c7a1_cgraph" alt=""/></div>
<map name="hal__storage_8c_a16be2ae040ef4db3b7fb11b46d07c7a1_cgraph" id="hal__storage_8c_a16be2ae040ef4db3b7fb11b46d07c7a1_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="168,5,297,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a16be2ae040ef4db3b7fb11b46d07c7a1_icgraph.png" border="0" usemap="#hal__storage_8c_a16be2ae040ef4db3b7fb11b46d07c7a1_icgraph" alt=""/></div>
<map name="hal__storage_8c_a16be2ae040ef4db3b7fb11b46d07c7a1_icgraph" id="hal__storage_8c_a16be2ae040ef4db3b7fb11b46d07c7a1_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a78b669ea961463eb05d2016e0b41ff86" title="Save current config to flash. " alt="" coords="168,56,243,83"/>
<area shape="rect" id="node3" href="task__commands_8c.html#ab06b29638d917a9356bda072e158449e" title="cmdSa" alt="" coords="313,31,376,57"/>
<area shape="rect" id="node4" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="291,81,399,108"/>
<area shape="rect" id="node5" href="task__commands_8c.html#a48f6d7719b9f1d99a9ead7c2aa623e22" title="keyboard_helper_parsekeycode" alt="" coords="447,81,652,108"/>
<area shape="rect" id="node6" href="task__commands_8c.html#aec535c106610969fcf7b9589f08c4d6e" title="cmdKh" alt="" coords="700,5,763,32"/>
<area shape="rect" id="node7" href="task__commands_8c.html#a43e8a43643ac7048c95d0c6922dcdcd9" title="cmdKp" alt="" coords="700,56,763,83"/>
<area shape="rect" id="node8" href="task__commands_8c.html#a8762283490f363d0f98506fa908a228c" title="cmdKr" alt="" coords="701,107,761,133"/>
<area shape="rect" id="node9" href="task__commands_8c.html#ab90e3fb0ef55d084b15aae27f76ab0d9" title="cmdKt" alt="" coords="701,157,761,184"/>
</map>
</div>

</div>
</div>
<a id="ace0ac79b0e2b273d97e5b806de9eb493"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ace0ac79b0e2b273d97e5b806de9eb493">&#9670;&nbsp;</a></span>halStorageStoreIR()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halStorageStoreIR </td>
          <td>(</td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>tid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="common_8h.html#af531911959683790ca7ae870f8462a16">halIOIR_t</a> *&#160;</td>
          <td class="paramname"><em>cfg</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>cmdName</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Store an infrared command to storage. </p>
<p>This method stores a set of IR edges with a given length and a given command name. If there is already a cmd with this given name, it is overwritten!</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">tid</td><td>Transaction id </td></tr>
    <tr><td class="paramname">cfg</td><td>Pointer to a IR config, can be freed after this call </td></tr>
    <tr><td class="paramname">cmdName</td><td>Name of this IR command </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#af531911959683790ca7ae870f8462a16" title="Output IR command. ">halIOIR_t</a> </dd>
<dd>
<a class="el" href="hal__storage_8c.html#aa728fac6a17066ecb910c19338ae5288" title="Load an IR command by name. ">halStorageLoadIR</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l01279">1279</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="fct__infrared_8c_source.html#l00090">fct_infrared_record()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_ace0ac79b0e2b273d97e5b806de9eb493_cgraph.png" border="0" usemap="#hal__storage_8c_ace0ac79b0e2b273d97e5b806de9eb493_cgraph" alt=""/></div>
<map name="hal__storage_8c_ace0ac79b0e2b273d97e5b806de9eb493_cgraph" id="hal__storage_8c_ace0ac79b0e2b273d97e5b806de9eb493_cgraph">
<area shape="rect" id="node2" href="hal__storage_8c.html#a4b6566ef5b69c85d422df52435c95d36" title="Internal helper to check for a valid WL handle and the correct tid. " alt="" coords="716,45,845,71"/>
<area shape="rect" id="node3" href="hal__storage_8c.html#a531bc39bc2808762298d14b79ac453cd" title="Get the number for an IR cmd name. " alt="" coords="183,19,401,46"/>
<area shape="rect" id="node5" href="hal__storage_8c.html#ae5e6fcc8c1bdff7f78009830bc78f260" title="Get the number of first available slot for an IR command. " alt="" coords="194,95,390,122"/>
<area shape="rect" id="node4" href="hal__storage_8c.html#a53912e9159b29e5fc974a127dbf0982f" title="Get the name of an infrared command stored at the given slot number. " alt="" coords="449,45,668,71"/>
<area shape="rect" id="node6" href="hal__storage_8c.html#a1495c793604980c76b334f6a6d553c3c" title="Get the number of stored IR commands. " alt="" coords="451,146,666,173"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_ace0ac79b0e2b273d97e5b806de9eb493_icgraph.png" border="0" usemap="#hal__storage_8c_ace0ac79b0e2b273d97e5b806de9eb493_icgraph" alt=""/></div>
<map name="hal__storage_8c_ace0ac79b0e2b273d97e5b806de9eb493_icgraph" id="hal__storage_8c_ace0ac79b0e2b273d97e5b806de9eb493_icgraph">
<area shape="rect" id="node2" href="fct__infrared_8h.html#ae5a80358b704f40a25177af616be7c9b" title="FUNCTION &#45; Trigger an IR command recording. " alt="" coords="183,5,313,32"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a3772e6f0e110a542c61c89956753d6d2" title="cmdIr" alt="" coords="361,5,416,32"/>
</map>
</div>

</div>
</div>
<a id="a76299b86e144434260dcab80323ec9da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a76299b86e144434260dcab80323ec9da">&#9670;&nbsp;</a></span>strip()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void strip </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>s</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Strips away \r\t and \n. </p>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00613">613</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00521">cmdKw()</a>, <a class="el" href="hal__storage_8c_source.html#l00638">halStorageGetNameForNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l00901">halStorageLoadNumber()</a>, <a class="el" href="task__commands_8c_source.html#l00400">keyboard_helper_parsekeycode()</a>, and <a class="el" href="task__commands_8c_source.html#l01355">task_commands()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__storage_8c_a76299b86e144434260dcab80323ec9da_icgraph.png" border="0" usemap="#hal__storage_8c_a76299b86e144434260dcab80323ec9da_icgraph" alt=""/></div>
<map name="hal__storage_8c_a76299b86e144434260dcab80323ec9da_icgraph" id="hal__storage_8c_a76299b86e144434260dcab80323ec9da_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a389420fc8d5f246aa59beb242ff294be" title="cmdKw" alt="" coords="169,5,236,32"/>
<area shape="rect" id="node3" href="hal__storage_8h.html#a2046481d14910cc6a5b0086a796f293b" title="Get the name of a slot number. " alt="" coords="100,157,305,184"/>
<area shape="rect" id="node9" href="task__commands_8c.html#a48f6d7719b9f1d99a9ead7c2aa623e22" title="keyboard_helper_parsekeycode" alt="" coords="987,136,1192,163"/>
<area shape="rect" id="node18" href="hal__storage_8h.html#a670ba7fad19e9a70672d73897785712f" title="Load a slot by a slot number (starting with 0) " alt="" coords="377,233,535,260"/>
<area shape="rect" id="node23" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="143,296,262,323"/>
<area shape="rect" id="node4" href="hal__storage_8h.html#aae19bcf97360ccd7af4ddf906ff85141" title="Get the number of a slotname. " alt="" coords="353,157,559,184"/>
<area shape="rect" id="node5" href="task__commands_8c.html#ac030838bfc9da5b3dc3b3357b0606485" title="cmdDn" alt="" coords="648,157,712,184"/>
<area shape="rect" id="node6" href="task__commands_8c.html#a78b669ea961463eb05d2016e0b41ff86" title="Save current config to flash. " alt="" coords="643,107,717,133"/>
<area shape="rect" id="node14" href="hal__storage_8h.html#a57cdf5734cdbad3dbb5f18f71dd27501" title="Load a slot by a slot name. " alt="" coords="607,208,753,235"/>
<area shape="rect" id="node7" href="task__commands_8c.html#ab06b29638d917a9356bda072e158449e" title="cmdSa" alt="" coords="839,107,901,133"/>
<area shape="rect" id="node8" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="816,157,924,184"/>
<area shape="rect" id="node10" href="task__commands_8c.html#aec535c106610969fcf7b9589f08c4d6e" title="cmdKh" alt="" coords="1248,143,1311,169"/>
<area shape="rect" id="node11" href="task__commands_8c.html#a43e8a43643ac7048c95d0c6922dcdcd9" title="cmdKp" alt="" coords="1248,193,1311,220"/>
<area shape="rect" id="node12" href="task__commands_8c.html#a8762283490f363d0f98506fa908a228c" title="cmdKr" alt="" coords="1249,41,1309,68"/>
<area shape="rect" id="node13" href="task__commands_8c.html#ab90e3fb0ef55d084b15aae27f76ab0d9" title="cmdKt" alt="" coords="1249,92,1309,119"/>
<area shape="rect" id="node15" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="CONTINOUS TASK &#45; Config switcher task, internal config reloading. " alt="" coords="801,208,939,235"/>
<area shape="rect" id="node16" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="1026,233,1153,260"/>
<area shape="rect" id="node17" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1240,256,1319,283"/>
<area shape="rect" id="node19" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="634,309,726,336"/>
<area shape="rect" id="node22" href="hal__storage_8h.html#afffed2d32aac2287e95d943dd588db6c" title="Load a slot by an action. " alt="" coords="624,259,736,285"/>
<area shape="rect" id="node20" href="task__commands_8c.html#aeefecfe074b759e4cb2d947aa2c26f98" title="cmdLa" alt="" coords="839,259,901,285"/>
<area shape="rect" id="node21" href="task__commands_8c.html#ab54ad30076339911d3ffc3a8834a1958" title="cmdLi" alt="" coords="841,309,899,336"/>
<area shape="rect" id="node24" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1023,321,1155,348"/>
<area shape="rect" id="node25" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="377,296,535,323"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="a47050fc742d4864291d317dc39914ad1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a47050fc742d4864291d317dc39914ad1">&#9670;&nbsp;</a></span>base_path</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const char* base_path = &quot;/spiflash&quot;</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Partition name (used to define different memory types) </p>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00088">88</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00261">halStorageCreateDefault()</a>, <a class="el" href="hal__storage_8c_source.html#l00472">halStorageDeleteIRCmd()</a>, <a class="el" href="hal__storage_8c_source.html#l01136">halStorageDeleteSlot()</a>, <a class="el" href="hal__storage_8c_source.html#l00638">halStorageGetNameForNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l00412">halStorageGetNameForNumberIR()</a>, <a class="el" href="hal__storage_8c_source.html#l00543">halStorageGetNumberOfIRCmds()</a>, <a class="el" href="hal__storage_8c_source.html#l00363">halStorageGetNumberOfSlots()</a>, <a class="el" href="hal__storage_8c_source.html#l00200">halStorageInit()</a>, <a class="el" href="hal__storage_8c_source.html#l01371">halStorageLoadIR()</a>, <a class="el" href="hal__storage_8c_source.html#l00901">halStorageLoadNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l01214">halStorageStore()</a>, and <a class="el" href="hal__storage_8c_source.html#l01279">halStorageStoreIR()</a>.</p>

</div>
</div>
<a id="afe54e8f771b85765a57fb799302f2a09"></a>
<h2 class="memtitle"><span class="permalink"><a href="#afe54e8f771b85765a57fb799302f2a09">&#9670;&nbsp;</a></span>halStorageMutex</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">SemaphoreHandle_t halStorageMutex = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Mutex which is used to avoid multiple access to different loaded slots. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#ab7bc6f83a4f91dba2d5b3d1edeedf4b1" title="Currently active transaction ID, 0 is invalid. ">storageCurrentTID</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00071">71</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l01541">halStorageFinishTransaction()</a>, and <a class="el" href="hal__storage_8c_source.html#l01487">halStorageStartTransaction()</a>.</p>

</div>
</div>
<a id="a9d1f6636715d2cd2af21e20bc5e26afa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a9d1f6636715d2cd2af21e20bc5e26afa">&#9670;&nbsp;</a></span>s_wl_handle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">wl_handle_t s_wl_handle = WL_INVALID_HANDLE</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Wear levelling handle. </p>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00085">85</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00235">halStorageChecks()</a>, <a class="el" href="hal__storage_8c_source.html#l00200">halStorageInit()</a>, and <a class="el" href="hal__storage_8c_source.html#l01487">halStorageStartTransaction()</a>.</p>

</div>
</div>
<a id="a5c097404b5dfa34bdac65865586dac5a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5c097404b5dfa34bdac65865586dac5a">&#9670;&nbsp;</a></span>storageCurrentSlotNumber</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t storageCurrentSlotNumber = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Currently activated slot number. </p>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00075">75</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00346">halStorageGetCurrentSlotNumber()</a>, <a class="el" href="hal__storage_8c_source.html#l00817">halStorageLoad()</a>, <a class="el" href="hal__storage_8c_source.html#l00901">halStorageLoadNumber()</a>, and <a class="el" href="hal__storage_8c_source.html#l01214">halStorageStore()</a>.</p>

</div>
</div>
<a id="ab7bc6f83a4f91dba2d5b3d1edeedf4b1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab7bc6f83a4f91dba2d5b3d1edeedf4b1">&#9670;&nbsp;</a></span>storageCurrentTID</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">uint32_t storageCurrentTID = 0</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Currently active transaction ID, 0 is invalid. </p>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00073">73</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00235">halStorageChecks()</a>, <a class="el" href="hal__storage_8c_source.html#l01541">halStorageFinishTransaction()</a>, and <a class="el" href="hal__storage_8c_source.html#l01487">halStorageStartTransaction()</a>.</p>

</div>
</div>
<a id="a687cf5b473fc94d8fafca390fcc11a1f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a687cf5b473fc94d8fafca390fcc11a1f">&#9670;&nbsp;</a></span>storageCurrentTIDHolder</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">char storageCurrentTIDHolder[32]</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Current active storage task. </p>
<p>This string is used to determine the currently active task, which holds a tid. </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__storage_8c.html#ab7bc6f83a4f91dba2d5b3d1edeedf4b1" title="Currently active transaction ID, 0 is invalid. ">storageCurrentTID</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00096">96</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l00235">halStorageChecks()</a>, <a class="el" href="hal__storage_8c_source.html#l01541">halStorageFinishTransaction()</a>, and <a class="el" href="hal__storage_8c_source.html#l01487">halStorageStartTransaction()</a>.</p>

</div>
</div>
<a id="abc16a2117a92da3dc8843a60780fd1a2"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abc16a2117a92da3dc8843a60780fd1a2">&#9670;&nbsp;</a></span>storeHandle</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">FILE* storeHandle = NULL</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>File handle currently used by store slot To append AT commands to a slot, multiple calls of halStorageStore are required. Consequently, this module needs to know which file is appended. This is saved in this file handle, and freed on halStorageFinishTransaction. </p>

<p class="definition">Definition at line <a class="el" href="hal__storage_8c_source.html#l00082">82</a> of file <a class="el" href="hal__storage_8c_source.html">hal_storage.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__storage_8c_source.html#l01541">halStorageFinishTransaction()</a>, and <a class="el" href="hal__storage_8c_source.html#l01214">halStorageStore()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
