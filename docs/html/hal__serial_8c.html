<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLipMouse/FABI ESP32 firmware: /home/beni/sync/Projects/FH/FLipMouse-esp32/main/hal/hal_serial.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLipMouse/FABI ESP32 firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li><li class="navelem"><a class="el" href="dir_2c1795b0295572423fca70fe6201093a.html">hal</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">hal_serial.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>CONTINOUS TASK - This module contains the hardware abstraction for the serial interface to the USB support chip.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="hal__serial_8h_source.html">hal_serial.h</a>&quot;</code><br />
</div>
<p><a href="hal__serial_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a7ce0df38eb467e59f209470c8f5ac4e6">LOG_TAG</a>&#160;&#160;&#160;&quot;hal_serial&quot;</td></tr>
<tr class="separator:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa2f9f3ab3ea3e3a75f53e6a54e88db65"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#aa2f9f3ab3ea3e3a75f53e6a54e88db65">LOG_LEVEL_SERIAL</a>&#160;&#160;&#160;ESP_LOG_WARN</td></tr>
<tr class="separator:aa2f9f3ab3ea3e3a75f53e6a54e88db65"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a15a73632001c9a59bb02bcb816492923"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a15a73632001c9a59bb02bcb816492923">HAL_SERIAL_TASK_STACKSIZE</a>&#160;&#160;&#160;2048</td></tr>
<tr class="separator:a15a73632001c9a59bb02bcb816492923"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ed6a618f134d6b923ba216de84253f6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a8ed6a618f134d6b923ba216de84253f6">HAL_SERIAL_UART_TIMEOUT_MS</a>&#160;&#160;&#160;10000</td></tr>
<tr class="memdesc:a8ed6a618f134d6b923ba216de84253f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Ticks until the UART receive function has a timeout and gives back received data.*.  <a href="#a8ed6a618f134d6b923ba216de84253f6">More...</a><br /></td></tr>
<tr class="separator:a8ed6a618f134d6b923ba216de84253f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae8200c53292ccbc6cc7f3ebfca17a2ae"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#ae8200c53292ccbc6cc7f3ebfca17a2ae">HAL_SERIAL_I2C_TIMEOUT_MS</a>&#160;&#160;&#160;100</td></tr>
<tr class="memdesc:ae8200c53292ccbc6cc7f3ebfca17a2ae"><td class="mdescLeft">&#160;</td><td class="mdescRight">Timout for receiving ADC data via I2C.  <a href="#ae8200c53292ccbc6cc7f3ebfca17a2ae">More...</a><br /></td></tr>
<tr class="separator:ae8200c53292ccbc6cc7f3ebfca17a2ae"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7fc57d5be9f588839a00c75ef2946e17"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a7fc57d5be9f588839a00c75ef2946e17">WRITE_BIT</a>&#160;&#160;&#160;I2C_MASTER_WRITE              /** @brief I2C master write */</td></tr>
<tr class="separator:a7fc57d5be9f588839a00c75ef2946e17"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2f493ed233e66342493f155ebda5c183"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a2f493ed233e66342493f155ebda5c183">READ_BIT</a>&#160;&#160;&#160;I2C_MASTER_READ                /** @brief I2C master read */</td></tr>
<tr class="separator:a2f493ed233e66342493f155ebda5c183"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7dd22b838d2b1f22d367e6cdef04ccc3"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a7dd22b838d2b1f22d367e6cdef04ccc3">ACK_CHECK_EN</a>&#160;&#160;&#160;0x1                        /** @brief I2C master will check ack from slave*/</td></tr>
<tr class="separator:a7dd22b838d2b1f22d367e6cdef04ccc3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8ad7ceb373ce664b1c2482a66537e7c0"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a8ad7ceb373ce664b1c2482a66537e7c0">ACK_CHECK_DIS</a>&#160;&#160;&#160;0x0                       /** @brief I2C master will not check ack from slave */</td></tr>
<tr class="separator:a8ad7ceb373ce664b1c2482a66537e7c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1d64a546dacc15052a6c4887f9d0020f"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a1d64a546dacc15052a6c4887f9d0020f">ACK_VAL</a>&#160;&#160;&#160;0x0                             /** @brief I2C ack value */</td></tr>
<tr class="separator:a1d64a546dacc15052a6c4887f9d0020f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae20bf16f65c41237e2d620ef49890781"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#ae20bf16f65c41237e2d620ef49890781">NACK_VAL</a>&#160;&#160;&#160;0x1                            /** @brief I2C nack value */</td></tr>
<tr class="separator:ae20bf16f65c41237e2d620ef49890781"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a995c536b9e0d279066d893c6a3dfce4e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a995c536b9e0d279066d893c6a3dfce4e">halSerialFlushRX</a> (void)</td></tr>
<tr class="memdesc:a995c536b9e0d279066d893c6a3dfce4e"><td class="mdescLeft">&#160;</td><td class="mdescRight">Flush Serial RX input buffer.  <a href="#a995c536b9e0d279066d893c6a3dfce4e">More...</a><br /></td></tr>
<tr class="separator:a995c536b9e0d279066d893c6a3dfce4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab3a538fb88a9732f0afc0188cc3c9c38"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#ab3a538fb88a9732f0afc0188cc3c9c38">halSerialRXTask</a> (void *pvParameters)</td></tr>
<tr class="memdesc:ab3a538fb88a9732f0afc0188cc3c9c38"><td class="mdescLeft">&#160;</td><td class="mdescRight">UART RX task for AT command pattern detection and parsing.  <a href="#ab3a538fb88a9732f0afc0188cc3c9c38">More...</a><br /></td></tr>
<tr class="separator:ab3a538fb88a9732f0afc0188cc3c9c38"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d756bd77bd3ad6e8b7f7411a1624baa"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a4d756bd77bd3ad6e8b7f7411a1624baa">halSerialInitI2C</a> (bool deinit)</td></tr>
<tr class="memdesc:a4d756bd77bd3ad6e8b7f7411a1624baa"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize I2C for reading ADC values from LPC.  <a href="#a4d756bd77bd3ad6e8b7f7411a1624baa">More...</a><br /></td></tr>
<tr class="separator:a4d756bd77bd3ad6e8b7f7411a1624baa"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6689f99c3a8e5f787a3d995260d8d298"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a6689f99c3a8e5f787a3d995260d8d298">halSerialHIDTask</a> (void *param)</td></tr>
<tr class="memdesc:a6689f99c3a8e5f787a3d995260d8d298"><td class="mdescLeft">&#160;</td><td class="mdescRight">CONTINOUS TASK - Process HID commands &amp; send via HID wire to LPC.  <a href="#a6689f99c3a8e5f787a3d995260d8d298">More...</a><br /></td></tr>
<tr class="separator:a6689f99c3a8e5f787a3d995260d8d298"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5dd33d8e55ba33bdecfa78bc11c618b3"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a5dd33d8e55ba33bdecfa78bc11c618b3">halSerialReceiveI2CADC</a> (uint8_t **data)</td></tr>
<tr class="memdesc:a5dd33d8e55ba33bdecfa78bc11c618b3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read ADC data via I2C from LPC chip.  <a href="#a5dd33d8e55ba33bdecfa78bc11c618b3">More...</a><br /></td></tr>
<tr class="separator:a5dd33d8e55ba33bdecfa78bc11c618b3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0bb04b089362a7c58d189b0fc61bef96"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a0bb04b089362a7c58d189b0fc61bef96">halSerialReceiveUSBSerial</a> (uint8_t **data)</td></tr>
<tr class="memdesc:a0bb04b089362a7c58d189b0fc61bef96"><td class="mdescLeft">&#160;</td><td class="mdescRight">Read parsed AT commands from USB-Serial (USB-CDC)  <a href="#a0bb04b089362a7c58d189b0fc61bef96">More...</a><br /></td></tr>
<tr class="separator:a0bb04b089362a7c58d189b0fc61bef96"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af78683f30da18cfc19c2c91006ec6155"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#af78683f30da18cfc19c2c91006ec6155">halSerialSendUSBSerial</a> (char *data, uint32_t length, TickType_t ticks_to_wait)</td></tr>
<tr class="memdesc:af78683f30da18cfc19c2c91006ec6155"><td class="mdescLeft">&#160;</td><td class="mdescRight">Send serial bytes to USB-Serial (USB-CDC)  <a href="#af78683f30da18cfc19c2c91006ec6155">More...</a><br /></td></tr>
<tr class="separator:af78683f30da18cfc19c2c91006ec6155"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab2261f95747ee5806ebdec880d09ca89"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#ab2261f95747ee5806ebdec880d09ca89">halSerialReset</a> (uint8_t exceptDevice)</td></tr>
<tr class="memdesc:ab2261f95747ee5806ebdec880d09ca89"><td class="mdescLeft">&#160;</td><td class="mdescRight">Reset the serial HID report data.  <a href="#ab2261f95747ee5806ebdec880d09ca89">More...</a><br /></td></tr>
<tr class="separator:ab2261f95747ee5806ebdec880d09ca89"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a57242c09ec880fbd08e1a4cd5e64d8e5"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a57242c09ec880fbd08e1a4cd5e64d8e5">halSerialRemoveOutputStream</a> (void)</td></tr>
<tr class="memdesc:a57242c09ec880fbd08e1a4cd5e64d8e5"><td class="mdescLeft">&#160;</td><td class="mdescRight">Remove the additional function for outputting the serial data.  <a href="#a57242c09ec880fbd08e1a4cd5e64d8e5">More...</a><br /></td></tr>
<tr class="separator:a57242c09ec880fbd08e1a4cd5e64d8e5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a143968f329a010a1075a81b976579605"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a143968f329a010a1075a81b976579605">halSerialAddOutputStream</a> (<a class="el" href="hal__serial_8h.html#a9645a82bf44ac750418a21920614b3f7">serialoutput_h</a> cb)</td></tr>
<tr class="memdesc:a143968f329a010a1075a81b976579605"><td class="mdescLeft">&#160;</td><td class="mdescRight">Set an additional function for outputting the serial data.  <a href="#a143968f329a010a1075a81b976579605">More...</a><br /></td></tr>
<tr class="separator:a143968f329a010a1075a81b976579605"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a2d03c06463b09e33d87d90eb273819b0"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a2d03c06463b09e33d87d90eb273819b0">halSerialInit</a> (void)</td></tr>
<tr class="memdesc:a2d03c06463b09e33d87d90eb273819b0"><td class="mdescLeft">&#160;</td><td class="mdescRight">Initialize the serial HAL.  <a href="#a2d03c06463b09e33d87d90eb273819b0">More...</a><br /></td></tr>
<tr class="separator:a2d03c06463b09e33d87d90eb273819b0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:adc58a36fa37939826c6e9b29549b55a6"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#adc58a36fa37939826c6e9b29549b55a6">BUF_SIZE_RX</a> = 512</td></tr>
<tr class="separator:adc58a36fa37939826c6e9b29549b55a6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4ef85c128c2cb518b3771191c8a27e3d"><td class="memItemLeft" align="right" valign="top"><a class="el" href="hal__serial_8h.html#a9645a82bf44ac750418a21920614b3f7">serialoutput_h</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a4ef85c128c2cb518b3771191c8a27e3d">outputcb</a> = NULL</td></tr>
<tr class="memdesc:a4ef85c128c2cb518b3771191c8a27e3d"><td class="mdescLeft">&#160;</td><td class="mdescRight">Output callback.  <a href="#a4ef85c128c2cb518b3771191c8a27e3d">More...</a><br /></td></tr>
<tr class="separator:a4ef85c128c2cb518b3771191c8a27e3d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ad0911c183882187e70480f1925cc0c55"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#ad0911c183882187e70480f1925cc0c55">CMDQUEUE_SIZE</a> = 256</td></tr>
<tr class="memdesc:ad0911c183882187e70480f1925cc0c55"><td class="mdescLeft">&#160;</td><td class="mdescRight">Length of queue for AT commands.  <a href="#ad0911c183882187e70480f1925cc0c55">More...</a><br /></td></tr>
<tr class="separator:ad0911c183882187e70480f1925cc0c55"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8742cd480180fcaba3079eb3c707bb0e"><td class="memItemLeft" align="right" valign="top">static const int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#a8742cd480180fcaba3079eb3c707bb0e">BUF_SIZE_TX</a> = 512</td></tr>
<tr class="separator:a8742cd480180fcaba3079eb3c707bb0e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af8aa2305d1905c876a30e25bf34cc480"><td class="memItemLeft" align="right" valign="top">static SemaphoreHandle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="hal__serial_8c.html#af8aa2305d1905c876a30e25bf34cc480">serialsendingsem</a></td></tr>
<tr class="memdesc:af8aa2305d1905c876a30e25bf34cc480"><td class="mdescLeft">&#160;</td><td class="mdescRight">Mutex for sending to serial port.  <a href="#af8aa2305d1905c876a30e25bf34cc480">More...</a><br /></td></tr>
<tr class="separator:af8aa2305d1905c876a30e25bf34cc480"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>CONTINOUS TASK - This module contains the hardware abstraction for the serial interface to the USB support chip. </p>
<p>Attention: this module does NOT use UART0 (terminal &amp; program interface)</p>
<p>The hardware abstraction takes care of:</p><ul>
<li>sending USB-HID commands</li>
<li>sending USB-serial responses</li>
<li>sending/receiving serial data (to/from USB-serial)</li>
</ul>
<p>The interaction to other parts of the firmware consists of:</p><ul>
<li>pending on queue for USB commands: hid_usb</li>
<li>halSerialSendUSBSerial / halSerialReceiveUSBSerial for direct sending/receiving (USB-CDC)</li>
</ul>
<p>The received serial data can be used by different modules, currently the task_commands is used to fetch &amp; parse serial data.</p>
<dl class="section note"><dt>Note</dt><dd>In this firmware, there are 3 pins routed to the USB support chip (RX,TX,HID). RX/TX lines are used as normal UART, which is converted by the LPC USB chip to the USB-CDC interface. The third line (HID) is used as a pulse length modulated output for transmitting HID commands to the host. </dd></dl>

<p class="definition">Definition in file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="a8ad7ceb373ce664b1c2482a66537e7c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ad7ceb373ce664b1c2482a66537e7c0">&#9670;&nbsp;</a></span>ACK_CHECK_DIS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ACK_CHECK_DIS&#160;&#160;&#160;0x0                       /** @brief I2C master will not check ack from slave */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00107">107</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

</div>
</div>
<a id="a7dd22b838d2b1f22d367e6cdef04ccc3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7dd22b838d2b1f22d367e6cdef04ccc3">&#9670;&nbsp;</a></span>ACK_CHECK_EN</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ACK_CHECK_EN&#160;&#160;&#160;0x1                        /** @brief I2C master will check ack from slave*/</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00106">106</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00279">halSerialHIDTask()</a>, and <a class="el" href="hal__serial_8c_source.html#l00331">halSerialReceiveI2CADC()</a>.</p>

</div>
</div>
<a id="a1d64a546dacc15052a6c4887f9d0020f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a1d64a546dacc15052a6c4887f9d0020f">&#9670;&nbsp;</a></span>ACK_VAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define ACK_VAL&#160;&#160;&#160;0x0                             /** @brief I2C ack value */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00108">108</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00331">halSerialReceiveI2CADC()</a>.</p>

</div>
</div>
<a id="ae8200c53292ccbc6cc7f3ebfca17a2ae"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae8200c53292ccbc6cc7f3ebfca17a2ae">&#9670;&nbsp;</a></span>HAL_SERIAL_I2C_TIMEOUT_MS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAL_SERIAL_I2C_TIMEOUT_MS&#160;&#160;&#160;100</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Timout for receiving ADC data via I2C. </p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__serial_8c.html#a5dd33d8e55ba33bdecfa78bc11c618b3" title="Read ADC data via I2C from LPC chip. ">halSerialReceiveI2CADC</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00075">75</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

</div>
</div>
<a id="a15a73632001c9a59bb02bcb816492923"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a15a73632001c9a59bb02bcb816492923">&#9670;&nbsp;</a></span>HAL_SERIAL_TASK_STACKSIZE</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAL_SERIAL_TASK_STACKSIZE&#160;&#160;&#160;2048</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00054">54</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00525">halSerialInit()</a>.</p>

</div>
</div>
<a id="a8ed6a618f134d6b923ba216de84253f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8ed6a618f134d6b923ba216de84253f6">&#9670;&nbsp;</a></span>HAL_SERIAL_UART_TIMEOUT_MS</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define HAL_SERIAL_UART_TIMEOUT_MS&#160;&#160;&#160;10000</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Ticks until the UART receive function has a timeout and gives back received data.*. </p>
<p>This value should be adjusted, either if the maximum length of a transmitted command OR the baudrate is changed. If you adjust the</p>
<p>Currently, the value 30ms reflects 115k2 baud and 256 bytes for one AT command:</p><ul>
<li>~87us are necessary for 1 byte (115k2 baud + 10 bit times) <br />
</li>
<li>~22ms are necessary for maximum command length</li>
</ul>
<p>-&gt; next bigger value reflectable in ticks is 30ms.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a0a9fad923b344cf2efca72441a81817a" title="maximum length for an AT command (including parameters &amp; &#39;AT &#39;, e.g., macro text) ...">ATCMD_LENGTH</a> </dd></dl>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000016">Todo:</a></b></dt><dd>Documentation updates, this define is now used differently... </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00071">71</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00368">halSerialReceiveUSBSerial()</a>.</p>

</div>
</div>
<a id="aa2f9f3ab3ea3e3a75f53e6a54e88db65"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa2f9f3ab3ea3e3a75f53e6a54e88db65">&#9670;&nbsp;</a></span>LOG_LEVEL_SERIAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_LEVEL_SERIAL&#160;&#160;&#160;ESP_LOG_WARN</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00052">52</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00525">halSerialInit()</a>.</p>

</div>
</div>
<a id="a7ce0df38eb467e59f209470c8f5ac4e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ce0df38eb467e59f209470c8f5ac4e6">&#9670;&nbsp;</a></span>LOG_TAG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_TAG&#160;&#160;&#160;&quot;hal_serial&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00049">49</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00279">halSerialHIDTask()</a>, <a class="el" href="hal__serial_8c_source.html#l00525">halSerialInit()</a>, <a class="el" href="hal__serial_8c_source.html#l00219">halSerialInitI2C()</a>, <a class="el" href="hal__serial_8c_source.html#l00368">halSerialReceiveUSBSerial()</a>, <a class="el" href="hal__serial_8c_source.html#l00455">halSerialReset()</a>, <a class="el" href="hal__serial_8c_source.html#l00126">halSerialRXTask()</a>, and <a class="el" href="hal__serial_8c_source.html#l00409">halSerialSendUSBSerial()</a>.</p>

</div>
</div>
<a id="ae20bf16f65c41237e2d620ef49890781"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae20bf16f65c41237e2d620ef49890781">&#9670;&nbsp;</a></span>NACK_VAL</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define NACK_VAL&#160;&#160;&#160;0x1                            /** @brief I2C nack value */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00109">109</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00331">halSerialReceiveI2CADC()</a>.</p>

</div>
</div>
<a id="a2f493ed233e66342493f155ebda5c183"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2f493ed233e66342493f155ebda5c183">&#9670;&nbsp;</a></span>READ_BIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define READ_BIT&#160;&#160;&#160;I2C_MASTER_READ                /** @brief I2C master read */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00105">105</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00331">halSerialReceiveI2CADC()</a>.</p>

</div>
</div>
<a id="a7fc57d5be9f588839a00c75ef2946e17"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7fc57d5be9f588839a00c75ef2946e17">&#9670;&nbsp;</a></span>WRITE_BIT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define WRITE_BIT&#160;&#160;&#160;I2C_MASTER_WRITE              /** @brief I2C master write */</td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00104">104</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00279">halSerialHIDTask()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a143968f329a010a1075a81b976579605"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a143968f329a010a1075a81b976579605">&#9670;&nbsp;</a></span>halSerialAddOutputStream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void halSerialAddOutputStream </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="hal__serial_8h.html#a9645a82bf44ac750418a21920614b3f7">serialoutput_h</a>&#160;</td>
          <td class="paramname"><em>cb</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Set an additional function for outputting the serial data. </p>
<p>This function sets a callback, which is used if the program needs an additional output despite the serial interface. In this case, the webgui registers a callback, which sends all the serial data to the websocket </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">cb</td><td>Function callback </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00515">515</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00193">ws_server()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__serial_8c_a143968f329a010a1075a81b976579605_icgraph.png" border="0" usemap="#hal__serial_8c_a143968f329a010a1075a81b976579605_icgraph" alt=""/></div>
<map name="hal__serial_8c_a143968f329a010a1075a81b976579605_icgraph" id="hal__serial_8c_a143968f329a010a1075a81b976579605_icgraph">
<area shape="rect" id="node2" href="task__webgui_8c.html#a5f462e5b8bd4803c256bf22a004eacde" title="CONTINOUS TASK &#45; Websocket server task. " alt="" coords="229,31,312,57"/>
<area shape="rect" id="node3" href="task__webgui_8c.html#a88f50c2c18db3f5be0149ec7921bf64b" title="AP mode config, filled in init. " alt="" coords="360,31,463,57"/>
<area shape="rect" id="node4" href="task__webgui_8c.html#adcc5b062c057f73762b1f19b2f6a8185" title="Main webserver task. " alt="" coords="547,5,633,32"/>
<area shape="rect" id="node7" href="task__webgui_8h.html#a907217aa3488ac68c36595c15da821e0" title="En&#45; or Disable WiFi interface. " alt="" coords="511,56,669,83"/>
<area shape="rect" id="node5" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="864,56,980,83"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1028,81,1107,108"/>
<area shape="rect" id="node8" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#a93e2ea21db142b4c7172565051a18cb1" title="Switch radio mode. " alt="" coords="875,107,969,133"/>
<area shape="rect" id="node9" href="task__webgui_8c.html#ae5ad2f76f20781fd8c89e542bcc8a551" title="Timer callback for disabling wifi. " alt="" coords="717,56,816,83"/>
</map>
</div>

</div>
</div>
<a id="a995c536b9e0d279066d893c6a3dfce4e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a995c536b9e0d279066d893c6a3dfce4e">&#9670;&nbsp;</a></span>halSerialFlushRX()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void halSerialFlushRX </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Flush Serial RX input buffer. </p>

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00112">112</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

</div>
</div>
<a id="a6689f99c3a8e5f787a3d995260d8d298"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6689f99c3a8e5f787a3d995260d8d298">&#9670;&nbsp;</a></span>halSerialHIDTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void halSerialHIDTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>param</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>CONTINOUS TASK - Process HID commands &amp; send via HID wire to LPC. </p>
<p>This task is used to receive a byte buffer, which contains a HID command for the LPC. These bytes are converted into either long or short pulses for 0 and 1 bits, finished by a "very long" stop bit.</p>
<p>HID commands are built up following this declarations: Byte 0: type of command: K/M/J/C:</p><ul>
<li>K are keyboard reports</li>
<li>M are mouse reports</li>
<li>J are joystick reports</li>
<li>C are set locale commands</li>
</ul>
<p>Following parameter lenghts are valid: "K": 7 Bytes; 1 modifier + 6 keycode "M": 4 Bytes; Button mask + X + Y + wheel "J": 13 Bytes; Please consult task_joystick.c for a detailed explanation "C": 1 Byte; Locale code, according to HID specification chapter 6.2.1</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">param</td><td>Unused </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd>hid_command_t </dd>
<dd>
<a class="el" href="common_8h.html#a841902610ed5a9d5ee171749a85a8b8c" title="Queue for sending HID commands to USB. ">hid_usb</a> </dd>
<dd>
<a class="el" href="hal__serial_8h.html#ad7dfbc49dc0771980304ac82bbe85a47" title="signalling pin for serial IF to LPC chip ">HAL_SERIAL_HIDPIN</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Due to the nature of absolute values for some HID input, it is sometimes wanted to update only relative values (e.g. move mouse, but don't change mouse button status). To support only updates of partial reports, the LPC chip supports a feature where the absolute value is NOT changed by sending 0xFF for the corresponding byte. Currently following bytefields support this:<ul>
<li>Mouse: buttons </li>
</ul>
</dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00279">279</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00525">halSerialInit()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__serial_8c_a6689f99c3a8e5f787a3d995260d8d298_cgraph.png" border="0" usemap="#hal__serial_8c_a6689f99c3a8e5f787a3d995260d8d298_cgraph" alt=""/></div>
<map name="hal__serial_8c_a6689f99c3a8e5f787a3d995260d8d298_cgraph" id="hal__serial_8c_a6689f99c3a8e5f787a3d995260d8d298_cgraph">
<area shape="rect" id="node2" href="hal__serial_8c.html#a4d756bd77bd3ad6e8b7f7411a1624baa" title="Initialize I2C for reading ADC values from LPC. " alt="" coords="179,5,289,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__serial_8c_a6689f99c3a8e5f787a3d995260d8d298_icgraph.png" border="0" usemap="#hal__serial_8c_a6689f99c3a8e5f787a3d995260d8d298_icgraph" alt=""/></div>
<map name="hal__serial_8c_a6689f99c3a8e5f787a3d995260d8d298_icgraph" id="hal__serial_8c_a6689f99c3a8e5f787a3d995260d8d298_icgraph">
<area shape="rect" id="node2" href="hal__serial_8h.html#a2d03c06463b09e33d87d90eb273819b0" title="Initialize the serial HAL. " alt="" coords="179,5,269,32"/>
<area shape="rect" id="node3" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="317,5,396,32"/>
</map>
</div>

</div>
</div>
<a id="a2d03c06463b09e33d87d90eb273819b0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a2d03c06463b09e33d87d90eb273819b0">&#9670;&nbsp;</a></span>halSerialInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halSerialInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize the serial HAL. </p>
<p>This method initializes the serial interface &amp; creates all necessary tasks. </p>

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00525">525</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="flipmouse__fabi__esp32__kbdmouse__main_8c_source.html#l00125">app_main()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__serial_8c_a2d03c06463b09e33d87d90eb273819b0_cgraph.png" border="0" usemap="#hal__serial_8c_a2d03c06463b09e33d87d90eb273819b0_cgraph" alt=""/></div>
<map name="hal__serial_8c_a2d03c06463b09e33d87d90eb273819b0_cgraph" id="hal__serial_8c_a2d03c06463b09e33d87d90eb273819b0_cgraph">
<area shape="rect" id="node2" href="hal__serial_8c.html#a4d756bd77bd3ad6e8b7f7411a1624baa" title="Initialize I2C for reading ADC values from LPC. " alt="" coords="317,5,428,32"/>
<area shape="rect" id="node3" href="hal__serial_8c.html#a6689f99c3a8e5f787a3d995260d8d298" title="CONTINOUS TASK &#45; Process HID commands &amp; send via HID wire to LPC. " alt="" coords="144,31,269,57"/>
<area shape="rect" id="node4" href="hal__serial_8c.html#ab3a538fb88a9732f0afc0188cc3c9c38" title="UART RX task for AT command pattern detection and parsing. " alt="" coords="147,81,267,108"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__serial_8c_a2d03c06463b09e33d87d90eb273819b0_icgraph.png" border="0" usemap="#hal__serial_8c_a2d03c06463b09e33d87d90eb273819b0_icgraph" alt=""/></div>
<map name="hal__serial_8c_a2d03c06463b09e33d87d90eb273819b0_icgraph" id="hal__serial_8c_a2d03c06463b09e33d87d90eb273819b0_icgraph">
<area shape="rect" id="node2" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="144,5,223,32"/>
</map>
</div>

</div>
</div>
<a id="a4d756bd77bd3ad6e8b7f7411a1624baa"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4d756bd77bd3ad6e8b7f7411a1624baa">&#9670;&nbsp;</a></span>halSerialInitI2C()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t halSerialInitI2C </td>
          <td>(</td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>deinit</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Initialize I2C for reading ADC values from LPC. </p>
<p>This function initializes the I2C, according to the pin settings.</p>
<dl class="section see"><dt>See also</dt><dd>HAL_IO_PIN_SDA </dd>
<dd>
HAL_IO_PIN_SCL </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">deinit</td><td>If set to true, the driver will be deleted first (used for re-initializing on transmission errors) </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00219">219</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00279">halSerialHIDTask()</a>, <a class="el" href="hal__serial_8c_source.html#l00525">halSerialInit()</a>, and <a class="el" href="hal__serial_8c_source.html#l00331">halSerialReceiveI2CADC()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__serial_8c_a4d756bd77bd3ad6e8b7f7411a1624baa_icgraph.png" border="0" usemap="#hal__serial_8c_a4d756bd77bd3ad6e8b7f7411a1624baa_icgraph" alt=""/></div>
<map name="hal__serial_8c_a4d756bd77bd3ad6e8b7f7411a1624baa_icgraph" id="hal__serial_8c_a4d756bd77bd3ad6e8b7f7411a1624baa_icgraph">
<area shape="rect" id="node2" href="hal__serial_8c.html#a6689f99c3a8e5f787a3d995260d8d298" title="CONTINOUS TASK &#45; Process HID commands &amp; send via HID wire to LPC. " alt="" coords="187,5,312,32"/>
<area shape="rect" id="node3" href="hal__serial_8h.html#a2d03c06463b09e33d87d90eb273819b0" title="Initialize the serial HAL. " alt="" coords="401,9,492,36"/>
<area shape="rect" id="node5" href="hal__serial_8h.html#a5dd33d8e55ba33bdecfa78bc11c618b3" title="Read ADC data via I2C from LPC chip. " alt="" coords="164,107,335,133"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1693,85,1772,112"/>
<area shape="rect" id="node6" href="hal__adc_8c.html#a8743abcde6f190545c429f072c16106d" title="Report raw values via serial interface. " alt="" coords="383,107,511,133"/>
<area shape="rect" id="node7" href="hal__adc_8c.html#a78419739020988cffc83ffcbc7103b05" title="Process pressure sensor (sip &amp; puff) " alt="" coords="559,81,721,108"/>
<area shape="rect" id="node8" href="hal__adc_8c.html#aee719704e643d27c1faab768cf4bc22e" title="HAL TASK &#45; Threshold task for ADC. " alt="" coords="769,120,917,147"/>
<area shape="rect" id="node9" href="hal__adc_8h.html#a4135bb73c2271b4a27db8d8d81884de7" title="Reload ADC config. " alt="" coords="965,120,1108,147"/>
<area shape="rect" id="node10" href="config__switcher_8h.html#af8fae43accd789bf2355c79ff44c2ae9" title="Request config update. " alt="" coords="1156,117,1255,144"/>
<area shape="rect" id="node16" href="hal__adc_8h.html#a6f0d302f35e5b7f7a1144f0ddace35d2" title="Init the ADC driver module. " alt="" coords="1165,187,1245,213"/>
<area shape="rect" id="node11" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="TASK &#45; Config switcher task, internal config reloading. " alt="" coords="1303,60,1440,87"/>
<area shape="rect" id="node13" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="1312,117,1431,144"/>
<area shape="rect" id="node12" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="1503,60,1630,87"/>
<area shape="rect" id="node14" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1501,111,1633,137"/>
<area shape="rect" id="node15" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1488,161,1645,188"/>
</map>
</div>

</div>
</div>
<a id="a5dd33d8e55ba33bdecfa78bc11c618b3"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5dd33d8e55ba33bdecfa78bc11c618b3">&#9670;&nbsp;</a></span>halSerialReceiveI2CADC()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int halSerialReceiveI2CADC </td>
          <td>(</td>
          <td class="paramtype">uint8_t **&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read ADC data via I2C from LPC chip. </p>
<p>This method reads 10Bytes of ADC data from LPC chip via the I2C interface.</p>
<dl class="section return"><dt>Returns</dt><dd>-1 on error, number of read bytes otherwise </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Double pointer to save 10 Bytes of data </td></tr>
  </table>
  </dd>
</dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__serial_8c.html#ae8200c53292ccbc6cc7f3ebfca17a2ae" title="Timout for receiving ADC data via I2C. ">HAL_SERIAL_I2C_TIMEOUT_MS</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00331">331</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__adc_8c_source.html#l00270">halAdcReportRaw()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__serial_8c_a5dd33d8e55ba33bdecfa78bc11c618b3_cgraph.png" border="0" usemap="#hal__serial_8c_a5dd33d8e55ba33bdecfa78bc11c618b3_cgraph" alt=""/></div>
<map name="hal__serial_8c_a5dd33d8e55ba33bdecfa78bc11c618b3_cgraph" id="hal__serial_8c_a5dd33d8e55ba33bdecfa78bc11c618b3_cgraph">
<area shape="rect" id="node2" href="hal__serial_8c.html#a4d756bd77bd3ad6e8b7f7411a1624baa" title="Initialize I2C for reading ADC values from LPC. " alt="" coords="224,5,335,32"/>
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__serial_8c_a5dd33d8e55ba33bdecfa78bc11c618b3_icgraph.png" border="0" usemap="#hal__serial_8c_a5dd33d8e55ba33bdecfa78bc11c618b3_icgraph" alt=""/></div>
<map name="hal__serial_8c_a5dd33d8e55ba33bdecfa78bc11c618b3_icgraph" id="hal__serial_8c_a5dd33d8e55ba33bdecfa78bc11c618b3_icgraph">
<area shape="rect" id="node2" href="hal__adc_8c.html#a8743abcde6f190545c429f072c16106d" title="Report raw values via serial interface. " alt="" coords="224,132,352,159"/>
<area shape="rect" id="node3" href="hal__adc_8c.html#a78419739020988cffc83ffcbc7103b05" title="Process pressure sensor (sip &amp; puff) " alt="" coords="400,107,563,133"/>
<area shape="rect" id="node4" href="hal__adc_8c.html#aee719704e643d27c1faab768cf4bc22e" title="HAL TASK &#45; Threshold task for ADC. " alt="" coords="611,132,759,159"/>
<area shape="rect" id="node5" href="hal__adc_8h.html#a4135bb73c2271b4a27db8d8d81884de7" title="Reload ADC config. " alt="" coords="807,132,949,159"/>
<area shape="rect" id="node6" href="config__switcher_8h.html#af8fae43accd789bf2355c79ff44c2ae9" title="Request config update. " alt="" coords="997,81,1096,108"/>
<area shape="rect" id="node13" href="hal__adc_8h.html#a6f0d302f35e5b7f7a1144f0ddace35d2" title="Init the ADC driver module. " alt="" coords="1007,157,1087,184"/>
<area shape="rect" id="node7" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="TASK &#45; Config switcher task, internal config reloading. " alt="" coords="1144,19,1281,45"/>
<area shape="rect" id="node10" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="1153,81,1272,108"/>
<area shape="rect" id="node8" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="1345,5,1471,32"/>
<area shape="rect" id="node9" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1535,56,1613,83"/>
<area shape="rect" id="node11" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1342,56,1474,83"/>
<area shape="rect" id="node12" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1329,107,1487,133"/>
</map>
</div>

</div>
</div>
<a id="a0bb04b089362a7c58d189b0fc61bef96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0bb04b089362a7c58d189b0fc61bef96">&#9670;&nbsp;</a></span>halSerialReceiveUSBSerial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int halSerialReceiveUSBSerial </td>
          <td>(</td>
          <td class="paramtype">uint8_t **&#160;</td>
          <td class="paramname"><em>data</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Read parsed AT commands from USB-Serial (USB-CDC) </p>
<p>This method reads full AT commands from the halSerialATCmds queue.</p>
<dl class="section return"><dt>Returns</dt><dd>-1 on error, number of read bytes otherwise </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Double pointer to save the new allocated buffer to. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section warning"><dt>Warning</dt><dd>Free the data pointer after use! </dd></dl>
<dl class="section note"><dt>Note</dt><dd>In timeout, debug information is print. Please uncomment if wanted:<ul>
<li>Printing free heap for each VB task</li>
<li>Print task CPU usage (only supported if "Use Trace facilities" is activated) </li>
</ul>
</dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__serial_8c.html#a8ed6a618f134d6b923ba216de84253f6" title="Ticks until the UART receive function has a timeout and gives back received data.*. ">HAL_SERIAL_UART_TIMEOUT_MS</a> </dd>
<dd>
<a class="el" href="hal__serial_8h.html#a57deadb7de70a0230474a4680cc0e2d9" title="Queue for parsed AT commands. ">halSerialATCmds</a> </dd>
<dd>
<a class="el" href="hal__serial_8c.html#ab3a538fb88a9732f0afc0188cc3c9c38" title="UART RX task for AT command pattern detection and parsing. ">halSerialRXTask</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00368">368</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l01429">task_commands()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__serial_8c_a0bb04b089362a7c58d189b0fc61bef96_icgraph.png" border="0" usemap="#hal__serial_8c_a0bb04b089362a7c58d189b0fc61bef96_icgraph" alt=""/></div>
<map name="hal__serial_8c_a0bb04b089362a7c58d189b0fc61bef96_icgraph" id="hal__serial_8c_a0bb04b089362a7c58d189b0fc61bef96_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="235,31,353,57"/>
<area shape="rect" id="node3" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="414,5,546,32"/>
<area shape="rect" id="node5" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="401,56,559,83"/>
<area shape="rect" id="node4" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="607,5,685,32"/>
</map>
</div>

</div>
</div>
<a id="a57242c09ec880fbd08e1a4cd5e64d8e5"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a57242c09ec880fbd08e1a4cd5e64d8e5">&#9670;&nbsp;</a></span>halSerialRemoveOutputStream()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void halSerialRemoveOutputStream </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Remove the additional function for outputting the serial data. </p>
<p>This function removes the callback, which is used if the program needs an additional output despite the serial interface. </p>

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00502">502</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__webgui_8c_source.html#l00502">wifi_event_handler()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__serial_8c_a57242c09ec880fbd08e1a4cd5e64d8e5_icgraph.png" border="0" usemap="#hal__serial_8c_a57242c09ec880fbd08e1a4cd5e64d8e5_icgraph" alt=""/></div>
<map name="hal__serial_8c_a57242c09ec880fbd08e1a4cd5e64d8e5_icgraph" id="hal__serial_8c_a57242c09ec880fbd08e1a4cd5e64d8e5_icgraph">
<area shape="rect" id="node2" href="task__webgui_8c.html#a11dd6a5edc46c297b26382ebce3c34cb" title="Event handler for wifi status updates. " alt="" coords="256,31,387,57"/>
<area shape="rect" id="node3" href="task__webgui_8c.html#a88f50c2c18db3f5be0149ec7921bf64b" title="AP mode config, filled in init. " alt="" coords="435,31,537,57"/>
<area shape="rect" id="node4" href="task__webgui_8c.html#adcc5b062c057f73762b1f19b2f6a8185" title="Main webserver task. " alt="" coords="621,5,708,32"/>
<area shape="rect" id="node7" href="task__webgui_8h.html#a907217aa3488ac68c36595c15da821e0" title="En&#45; or Disable WiFi interface. " alt="" coords="585,56,744,83"/>
<area shape="rect" id="node5" href="task__webgui_8h.html#a669b9245d5040c0162481f7b24dbeea7" title="Init the web / DNS server and the web gui. " alt="" coords="939,56,1055,83"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1103,81,1181,108"/>
<area shape="rect" id="node8" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#a93e2ea21db142b4c7172565051a18cb1" title="Switch radio mode. " alt="" coords="949,107,1044,133"/>
<area shape="rect" id="node9" href="task__webgui_8c.html#ae5ad2f76f20781fd8c89e542bcc8a551" title="Timer callback for disabling wifi. " alt="" coords="792,56,891,83"/>
</map>
</div>

</div>
</div>
<a id="ab2261f95747ee5806ebdec880d09ca89"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab2261f95747ee5806ebdec880d09ca89">&#9670;&nbsp;</a></span>halSerialReset()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void halSerialReset </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>exceptDevice</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Reset the serial HID report data. </p>
<p>Used for slot/config switchers. It resets the keycode array and sets all HID reports to 0 (release all keys, avoiding sticky keys on a config change) </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">exceptDevice</td><td>if you want to reset only a part of the devices, set flags accordingly:</td></tr>
  </table>
  </dd>
</dl>
<p>(1&lt;&lt;0) excepts keyboard (1&lt;&lt;1) excepts joystick (1&lt;&lt;2) excepts mouse If nothing is set (exceptDevice = 0) all are reset </p>

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00455">455</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00643">cmdRa()</a>, and <a class="el" href="config__switcher_8c_source.html#l00116">configUpdate()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__serial_8c_ab2261f95747ee5806ebdec880d09ca89_icgraph.png" border="0" usemap="#hal__serial_8c_ab2261f95747ee5806ebdec880d09ca89_icgraph" alt=""/></div>
<map name="hal__serial_8c_ab2261f95747ee5806ebdec880d09ca89_icgraph" id="hal__serial_8c_ab2261f95747ee5806ebdec880d09ca89_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a0e44fbe2c01b87dee45a6fd1094ab522" title="cmdRa" alt="" coords="177,5,241,32"/>
<area shape="rect" id="node3" href="config__switcher_8h.html#af8fae43accd789bf2355c79ff44c2ae9" title="Request config update. " alt="" coords="160,56,259,83"/>
<area shape="rect" id="node4" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="TASK &#45; Config switcher task, internal config reloading. " alt="" coords="307,31,444,57"/>
<area shape="rect" id="node7" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="316,81,435,108"/>
<area shape="rect" id="node5" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="507,31,634,57"/>
<area shape="rect" id="node6" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="697,56,776,83"/>
<area shape="rect" id="node8" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="505,81,637,108"/>
<area shape="rect" id="node9" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="492,132,649,159"/>
</map>
</div>

</div>
</div>
<a id="ab3a538fb88a9732f0afc0188cc3c9c38"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab3a538fb88a9732f0afc0188cc3c9c38">&#9670;&nbsp;</a></span>halSerialRXTask()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void halSerialRXTask </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>pvParameters</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>UART RX task for AT command pattern detection and parsing. </p>
<p>This task is used to pend on any incoming UART bytes. After receiving bytes, the incoming data is put together into AT commands. On a fully received AT command (terminated either by '\r' or '\n'), the buffer will be sent to the halSerialATCmds queue.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__serial_8h.html#a57deadb7de70a0230474a4680cc0e2d9" title="Queue for parsed AT commands. ">halSerialATCmds</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00126">126</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00525">halSerialInit()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__serial_8c_ab3a538fb88a9732f0afc0188cc3c9c38_icgraph.png" border="0" usemap="#hal__serial_8c_ab3a538fb88a9732f0afc0188cc3c9c38_icgraph" alt=""/></div>
<map name="hal__serial_8c_ab3a538fb88a9732f0afc0188cc3c9c38_icgraph" id="hal__serial_8c_ab3a538fb88a9732f0afc0188cc3c9c38_icgraph">
<area shape="rect" id="node2" href="hal__serial_8h.html#a2d03c06463b09e33d87d90eb273819b0" title="Initialize the serial HAL. " alt="" coords="173,5,264,32"/>
<area shape="rect" id="node3" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="312,5,391,32"/>
</map>
</div>

</div>
</div>
<a id="af78683f30da18cfc19c2c91006ec6155"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af78683f30da18cfc19c2c91006ec6155">&#9670;&nbsp;</a></span>halSerialSendUSBSerial()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int halSerialSendUSBSerial </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint32_t&#160;</td>
          <td class="paramname"><em>length</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">TickType_t&#160;</td>
          <td class="paramname"><em>ticks_to_wait</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Send serial bytes to USB-Serial (USB-CDC) </p>
<p>This method sends bytes to the UART, for USB-CDC</p>
<dl class="section return"><dt>Returns</dt><dd>-1 on error, number of read bytes otherwise </dd></dl>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">data</td><td>Data to be sent </td></tr>
    <tr><td class="paramname">length</td><td>Number of maximum bytes to send </td></tr>
    <tr><td class="paramname">ticks_to_wait</td><td>Maximum time to wait for a free UART </td></tr>
  </table>
  </dd>
</dl>

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00409">409</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00306">cmdFr()</a>, <a class="el" href="task__commands_8c_source.html#l00242">cmdId()</a>, <a class="el" href="task__commands_8c_source.html#l00890">cmdIl()</a>, <a class="el" href="fct__infrared_8c_source.html#l00090">fct_infrared_record()</a>, <a class="el" href="hal__adc_8c_source.html#l00270">halAdcReportRaw()</a>, <a class="el" href="hal__storage_8c_source.html#l00903">halStorageLoadNumber()</a>, <a class="el" href="task__commands_8c_source.html#l01572">printAllSlots()</a>, <a class="el" href="task__debouncer_8c_source.html#l00189">sendButtonLearn()</a>, <a class="el" href="task__commands_8c_source.html#l00136">sendErrorBack()</a>, and <a class="el" href="task__commands_8c_source.html#l01429">task_commands()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="hal__serial_8c_af78683f30da18cfc19c2c91006ec6155_icgraph.png" border="0" usemap="#hal__serial_8c_af78683f30da18cfc19c2c91006ec6155_icgraph" alt=""/></div>
<map name="hal__serial_8c_af78683f30da18cfc19c2c91006ec6155_icgraph" id="hal__serial_8c_af78683f30da18cfc19c2c91006ec6155_icgraph">
<area shape="rect" id="node2" href="task__commands_8c.html#a31cccaf280c3dd24b0b9754a4f306226" title="cmdFr" alt="" coords="266,5,325,32"/>
<area shape="rect" id="node3" href="task__commands_8c.html#a7acbcd59b97dc3be6520c43c9b2793c9" title="cmdId" alt="" coords="266,56,325,83"/>
<area shape="rect" id="node4" href="task__commands_8c.html#a1fb6206a7527fe4fd1ec9e4a2a86ee38" title="cmdIl" alt="" coords="268,107,323,133"/>
<area shape="rect" id="node5" href="fct__infrared_8h.html#ae5a80358b704f40a25177af616be7c9b" title="FUNCTION &#45; Trigger an IR command recording. " alt="" coords="230,157,361,184"/>
<area shape="rect" id="node7" href="hal__adc_8c.html#a8743abcde6f190545c429f072c16106d" title="Report raw values via serial interface. " alt="" coords="231,309,359,336"/>
<area shape="rect" id="node15" href="task__commands_8c.html#a7b36c39275d773aaedcb327ef4e1516f" title="task_commands" alt="" coords="1239,335,1357,361"/>
<area shape="rect" id="node19" href="hal__storage_8h.html#a670ba7fad19e9a70672d73897785712f" title="Load a slot by a slot number (starting with 0) " alt="" coords="216,423,375,449"/>
<area shape="rect" id="node20" href="task__commands_8c.html#ad59215648a26578c22baa7ceae099e0e" title="Print the current slot configurations (general settings + VBs) " alt="" coords="458,512,550,539"/>
<area shape="rect" id="node23" href="task__commands_8c.html#acea81ba8a182ae78feb2db6418fc1806" title="sendErrorBack" alt="" coords="653,613,761,640"/>
<area shape="rect" id="node31" href="task__debouncer_8c.html#aad304645b451a8b7ad60c9c6aab4e3d1" title="Send feedback on pressed buttons to host (for button learning) " alt="" coords="235,208,355,235"/>
<area shape="rect" id="node6" href="task__commands_8c.html#a3772e6f0e110a542c61c89956753d6d2" title="cmdIr" alt="" coords="477,157,531,184"/>
<area shape="rect" id="node8" href="hal__adc_8c.html#a78419739020988cffc83ffcbc7103b05" title="Process pressure sensor (sip &amp; puff) " alt="" coords="423,309,585,336"/>
<area shape="rect" id="node9" href="hal__adc_8c.html#aee719704e643d27c1faab768cf4bc22e" title="HAL TASK &#45; Threshold task for ADC. " alt="" coords="633,335,781,361"/>
<area shape="rect" id="node10" href="hal__adc_8h.html#a4135bb73c2271b4a27db8d8d81884de7" title="Reload ADC config. " alt="" coords="861,335,1003,361"/>
<area shape="rect" id="node11" href="config__switcher_8h.html#af8fae43accd789bf2355c79ff44c2ae9" title="Request config update. " alt="" coords="1083,360,1181,387"/>
<area shape="rect" id="node18" href="hal__adc_8h.html#a6f0d302f35e5b7f7a1144f0ddace35d2" title="Init the ADC driver module. " alt="" coords="1258,259,1338,285"/>
<area shape="rect" id="node12" href="config__switcher_8c.html#af5af5079d1982d42e165039e6de7e40a" title="TASK &#45; Config switcher task, internal config reloading. " alt="" coords="1229,411,1367,437"/>
<area shape="rect" id="node13" href="config__switcher_8h.html#aafed047c8d04b814a85239e031cbad7b" title="Initializing the config switching functionality. " alt="" coords="1430,411,1557,437"/>
<area shape="rect" id="node14" href="flipmouse__fabi__esp32__kbdmouse__main_8c.html#abce06be17fc37d675118a678a8100a36" title="Main task, created by esp&#45;idf. " alt="" coords="1620,284,1699,311"/>
<area shape="rect" id="node16" href="task__commands_8h.html#aedb896e40753227f80768e09d3748419" title="Init the command parser. " alt="" coords="1427,309,1559,336"/>
<area shape="rect" id="node17" href="task__commands_8h.html#a26091155b4d85093239033d689f363d0" title="Restart the command parser task. " alt="" coords="1415,360,1572,387"/>
<area shape="rect" id="node29" href="hal__storage_8h.html#afffed2d32aac2287e95d943dd588db6c" title="Load a slot by an action. " alt="" coords="876,411,988,437"/>
<area shape="rect" id="node30" href="hal__storage_8h.html#a57cdf5734cdbad3dbb5f18f71dd27501" title="Load a slot by a slot name. " alt="" coords="859,461,1005,488"/>
<area shape="rect" id="node21" href="task__commands_8c.html#aeefecfe074b759e4cb2d947aa2c26f98" title="cmdLa" alt="" coords="677,512,738,539"/>
<area shape="rect" id="node22" href="task__commands_8c.html#ab54ad30076339911d3ffc3a8834a1958" title="cmdLi" alt="" coords="679,563,736,589"/>
<area shape="rect" id="node24" href="task__commands_8c.html#a48f6d7719b9f1d99a9ead7c2aa623e22" title="keyboard_helper_parsekeycode" alt="" coords="829,613,1035,640"/>
<area shape="rect" id="node25" href="task__commands_8c.html#aec535c106610969fcf7b9589f08c4d6e" title="cmdKh" alt="" coords="1101,537,1163,564"/>
<area shape="rect" id="node26" href="task__commands_8c.html#a43e8a43643ac7048c95d0c6922dcdcd9" title="cmdKp" alt="" coords="1101,588,1163,615"/>
<area shape="rect" id="node27" href="task__commands_8c.html#a8762283490f363d0f98506fa908a228c" title="cmdKr" alt="" coords="1102,639,1162,665"/>
<area shape="rect" id="node28" href="task__commands_8c.html#ab90e3fb0ef55d084b15aae27f76ab0d9" title="cmdKt" alt="" coords="1102,689,1162,716"/>
<area shape="rect" id="node32" href="task__debouncer_8c.html#ac6452bd8cc5e6e526cba4212d4e5f755" title="Timer callback for debouncing. " alt="" coords="437,208,571,235"/>
<area shape="rect" id="node33" href="task__debouncer_8c.html#a9c2bdf28ee91c441212941b4ef5621ca" title="Start a timer with a given config and debounce time. " alt="" coords="667,208,748,235"/>
<area shape="rect" id="node34" href="task__debouncer_8h.html#a79d88e490be7198b9cc37556c66b837b" title="Debouncing main task. " alt="" coords="875,208,989,235"/>
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="adc58a36fa37939826c6e9b29549b55a6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#adc58a36fa37939826c6e9b29549b55a6">&#9670;&nbsp;</a></span>BUF_SIZE_RX</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BUF_SIZE_RX = 512</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00077">77</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00525">halSerialInit()</a>.</p>

</div>
</div>
<a id="a8742cd480180fcaba3079eb3c707bb0e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8742cd480180fcaba3079eb3c707bb0e">&#9670;&nbsp;</a></span>BUF_SIZE_TX</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int BUF_SIZE_TX = 512</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00097">97</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00525">halSerialInit()</a>.</p>

</div>
</div>
<a id="ad0911c183882187e70480f1925cc0c55"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad0911c183882187e70480f1925cc0c55">&#9670;&nbsp;</a></span>CMDQUEUE_SIZE</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">const int CMDQUEUE_SIZE = 256</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Length of queue for AT commands. </p>
<dl class="section note"><dt>Note</dt><dd>A maximum of CMDQUEUE_SIZE x ATCMD_LENGTH can be allocated (if no task receives the commands) </dd>
<dd>
C# GUI usually floods the input with AT cmds, set at least to 64 to avoid missing AT commands. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__serial_8h.html#a57deadb7de70a0230474a4680cc0e2d9" title="Queue for parsed AT commands. ">halSerialATCmds</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00095">95</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00525">halSerialInit()</a>.</p>

</div>
</div>
<a id="a4ef85c128c2cb518b3771191c8a27e3d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4ef85c128c2cb518b3771191c8a27e3d">&#9670;&nbsp;</a></span>outputcb</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="hal__serial_8h.html#a9645a82bf44ac750418a21920614b3f7">serialoutput_h</a> outputcb = NULL</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Output callback. </p>
<p>If this callback is != NULL, the function halSerialSendUSBSerial will send data to this callback in addition to the serial interface </p><dl class="section see"><dt>See also</dt><dd><a class="el" href="hal__serial_8c.html#af78683f30da18cfc19c2c91006ec6155" title="Send serial bytes to USB-Serial (USB-CDC) ">halSerialSendUSBSerial</a> </dd>
<dd>
<a class="el" href="hal__serial_8h.html#a9645a82bf44ac750418a21920614b3f7" title="Function pointer type for an additional output of a serial stream. ">serialoutput_h</a> </dd></dl>

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00086">86</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00515">halSerialAddOutputStream()</a>, <a class="el" href="hal__serial_8c_source.html#l00502">halSerialRemoveOutputStream()</a>, and <a class="el" href="hal__serial_8c_source.html#l00409">halSerialSendUSBSerial()</a>.</p>

</div>
</div>
<a id="af8aa2305d1905c876a30e25bf34cc480"></a>
<h2 class="memtitle"><span class="permalink"><a href="#af8aa2305d1905c876a30e25bf34cc480">&#9670;&nbsp;</a></span>serialsendingsem</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">SemaphoreHandle_t serialsendingsem</td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Mutex for sending to serial port. </p>

<p class="definition">Definition at line <a class="el" href="hal__serial_8c_source.html#l00101">101</a> of file <a class="el" href="hal__serial_8c_source.html">hal_serial.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="hal__serial_8c_source.html#l00525">halSerialInit()</a>, and <a class="el" href="hal__serial_8c_source.html#l00409">halSerialSendUSBSerial()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
