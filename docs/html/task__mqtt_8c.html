<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>FLipMouse/FABI ESP32 firmware: /home/beni/Projects/FLipMouse-esp32/main/function_tasks/task_mqtt.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">FLipMouse/FABI ESP32 firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5c982d53a68cdbcd421152b4020263a9.html">main</a></li><li class="navelem"><a class="el" href="dir_dd44d79ba9a472f66a6851d54403189f.html">function_tasks</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">Macros</a> &#124;
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">task_mqtt.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>CONTINOUS TASK - MQTT handling.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &quot;<a class="el" href="task__mqtt_8h_source.html">task_mqtt.h</a>&quot;</code><br />
</div>
<p><a href="task__mqtt_8c_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="define-members"></a>
Macros</h2></td></tr>
<tr class="memitem:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__mqtt_8c.html#a7ce0df38eb467e59f209470c8f5ac4e6">LOG_TAG</a>&#160;&#160;&#160;&quot;mqtt&quot;</td></tr>
<tr class="memdesc:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Logging tag for this module.  <a href="#a7ce0df38eb467e59f209470c8f5ac4e6">More...</a><br /></td></tr>
<tr class="separator:a7ce0df38eb467e59f209470c8f5ac4e6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4369f1b310836fbcdf409b57f1be9b8"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__mqtt_8c.html#ab4369f1b310836fbcdf409b57f1be9b8">LOG_LEVEL_MQTT</a>&#160;&#160;&#160;ESP_LOG_DEBUG</td></tr>
<tr class="memdesc:ab4369f1b310836fbcdf409b57f1be9b8"><td class="mdescLeft">&#160;</td><td class="mdescRight">Log level for the web/websocket server.  <a href="#ab4369f1b310836fbcdf409b57f1be9b8">More...</a><br /></td></tr>
<tr class="separator:ab4369f1b310836fbcdf409b57f1be9b8"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a5a85685932ce7bf4b7239ab1b133cbdd"><td class="memItemLeft" align="right" valign="top">const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__mqtt_8c.html#a5a85685932ce7bf4b7239ab1b133cbdd">wifi_get_reason</a> (int err)</td></tr>
<tr class="separator:a5a85685932ce7bf4b7239ab1b133cbdd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:abb6e44eb5d4a8e840debd2406c055252"><td class="memItemLeft" align="right" valign="top">static esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__mqtt_8c.html#abb6e44eb5d4a8e840debd2406c055252">wifi_mqtt_event_handler</a> (void *ctx, system_event_t *event)</td></tr>
<tr class="memdesc:abb6e44eb5d4a8e840debd2406c055252"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default event handler for Wifi.  <a href="#abb6e44eb5d4a8e840debd2406c055252">More...</a><br /></td></tr>
<tr class="separator:abb6e44eb5d4a8e840debd2406c055252"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5af8e8260f5604ece0ee37eb577e0e26"><td class="memItemLeft" align="right" valign="top">static esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__mqtt_8c.html#a5af8e8260f5604ece0ee37eb577e0e26">mqtt_event_handler</a> (esp_mqtt_event_handle_t event)</td></tr>
<tr class="memdesc:a5af8e8260f5604ece0ee37eb577e0e26"><td class="mdescLeft">&#160;</td><td class="mdescRight">Default event_handler for mqtt.  <a href="#a5af8e8260f5604ece0ee37eb577e0e26">More...</a><br /></td></tr>
<tr class="separator:a5af8e8260f5604ece0ee37eb577e0e26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae7ad6f5bfc7cbfc9f6a223fcf697c8f6"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__mqtt_8c.html#ae7ad6f5bfc7cbfc9f6a223fcf697c8f6">taskMQTTInit</a> (void)</td></tr>
<tr class="memdesc:ae7ad6f5bfc7cbfc9f6a223fcf697c8f6"><td class="mdescLeft">&#160;</td><td class="mdescRight">Init the MQTT task and the wifi.  <a href="#ae7ad6f5bfc7cbfc9f6a223fcf697c8f6">More...</a><br /></td></tr>
<tr class="separator:ae7ad6f5bfc7cbfc9f6a223fcf697c8f6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae09eb75c3fed43ee85fd92c1f710b600"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__mqtt_8c.html#ae09eb75c3fed43ee85fd92c1f710b600">taskMQTTDeInit</a> (void)</td></tr>
<tr class="memdesc:ae09eb75c3fed43ee85fd92c1f710b600"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deinit the MQTT task and the wifi.  <a href="#ae09eb75c3fed43ee85fd92c1f710b600">More...</a><br /></td></tr>
<tr class="separator:ae09eb75c3fed43ee85fd92c1f710b600"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6afc039be68c1a831778fe33bd2412a9"><td class="memItemLeft" align="right" valign="top">esp_err_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__mqtt_8c.html#a6afc039be68c1a831778fe33bd2412a9">taskMQTTPublish</a> (char *topic_payload)</td></tr>
<tr class="memdesc:a6afc039be68c1a831778fe33bd2412a9"><td class="mdescLeft">&#160;</td><td class="mdescRight">Publish data via MQTT.  <a href="#a6afc039be68c1a831778fe33bd2412a9">More...</a><br /></td></tr>
<tr class="separator:a6afc039be68c1a831778fe33bd2412a9"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:ad9332f302ae79b5195a71d791a9ccecd"><td class="memItemLeft" align="right" valign="top">esp_mqtt_client_handle_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__mqtt_8c.html#ad9332f302ae79b5195a71d791a9ccecd">mqtt_client</a></td></tr>
<tr class="memdesc:ad9332f302ae79b5195a71d791a9ccecd"><td class="mdescLeft">&#160;</td><td class="mdescRight">MQTT client handle, used for publishing.  <a href="#ad9332f302ae79b5195a71d791a9ccecd">More...</a><br /></td></tr>
<tr class="separator:ad9332f302ae79b5195a71d791a9ccecd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11201774aaac749961f9bb6dabeac94f"><td class="memItemLeft" align="right" valign="top">wifi_config_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__mqtt_8c.html#a11201774aaac749961f9bb6dabeac94f">wifi_config</a></td></tr>
<tr class="memdesc:a11201774aaac749961f9bb6dabeac94f"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wifi config.  <a href="#a11201774aaac749961f9bb6dabeac94f">More...</a><br /></td></tr>
<tr class="separator:a11201774aaac749961f9bb6dabeac94f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf505e44bed8d31b21c3687d3d1a8326"><td class="memItemLeft" align="right" valign="top">uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="task__mqtt_8c.html#aaf505e44bed8d31b21c3687d3d1a8326">mqttactive</a> = 0</td></tr>
<tr class="memdesc:aaf505e44bed8d31b21c3687d3d1a8326"><td class="mdescLeft">&#160;</td><td class="mdescRight">Is MQTT active?  <a href="#aaf505e44bed8d31b21c3687d3d1a8326">More...</a><br /></td></tr>
<tr class="separator:aaf505e44bed8d31b21c3687d3d1a8326"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>CONTINOUS TASK - MQTT handling. </p>
<p>This module is used for connecting the FLipMouse/FABI to a MQTT broker.</p>
<dl class="section warning"><dt>Warning</dt><dd>Please note, only one WiFi mode is possible: either this device operates in AP mode and serves the webGUI (see <a class="el" href="task__webgui_8h.html" title="CONTINOUS TASK - Web server &amp; WebGUI handling. ">task_webgui.h</a>) OR it operates in station mode, connects to a given Wifi and transmits data via MQTT (if enabled) </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Initialise this module only if a MQTT command is used in the configuration. </dd></dl>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="task__webgui_8h.html" title="CONTINOUS TASK - Web server &amp; WebGUI handling. ">task_webgui.h</a> </dd></dl>

<p class="definition">Definition in file <a class="el" href="task__mqtt_8c_source.html">task_mqtt.c</a>.</p>
</div><h2 class="groupheader">Macro Definition Documentation</h2>
<a id="ab4369f1b310836fbcdf409b57f1be9b8"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ab4369f1b310836fbcdf409b57f1be9b8">&#9670;&nbsp;</a></span>LOG_LEVEL_MQTT</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_LEVEL_MQTT&#160;&#160;&#160;ESP_LOG_DEBUG</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Log level for the web/websocket server. </p>

<p class="definition">Definition at line <a class="el" href="task__mqtt_8c_source.html#l00043">43</a> of file <a class="el" href="task__mqtt_8c_source.html">task_mqtt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__mqtt_8c_source.html#l00144">taskMQTTInit()</a>.</p>

</div>
</div>
<a id="a7ce0df38eb467e59f209470c8f5ac4e6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a7ce0df38eb467e59f209470c8f5ac4e6">&#9670;&nbsp;</a></span>LOG_TAG</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define LOG_TAG&#160;&#160;&#160;&quot;mqtt&quot;</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Logging tag for this module. </p>

<p class="definition">Definition at line <a class="el" href="task__mqtt_8c_source.html#l00041">41</a> of file <a class="el" href="task__mqtt_8c_source.html">task_mqtt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__mqtt_8c_source.html#l00098">mqtt_event_handler()</a>, <a class="el" href="task__mqtt_8c_source.html#l00144">taskMQTTInit()</a>, <a class="el" href="task__mqtt_8c_source.html#l00281">taskMQTTPublish()</a>, and <a class="el" href="task__mqtt_8c_source.html#l00064">wifi_mqtt_event_handler()</a>.</p>

</div>
</div>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5af8e8260f5604ece0ee37eb577e0e26"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5af8e8260f5604ece0ee37eb577e0e26">&#9670;&nbsp;</a></span>mqtt_event_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static esp_err_t mqtt_event_handler </td>
          <td>(</td>
          <td class="paramtype">esp_mqtt_event_handle_t&#160;</td>
          <td class="paramname"><em>event</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default event_handler for mqtt. </p>
<p>This is basically the protocols/mqtt/tcp example's handler code. Used to signal changing MQTT status/information. </p>

<p class="definition">Definition at line <a class="el" href="task__mqtt_8c_source.html#l00098">98</a> of file <a class="el" href="task__mqtt_8c_source.html">task_mqtt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__mqtt_8c_source.html#l00144">taskMQTTInit()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__mqtt_8c_a5af8e8260f5604ece0ee37eb577e0e26_icgraph.png" border="0" usemap="#task__mqtt_8c_a5af8e8260f5604ece0ee37eb577e0e26_icgraph" alt=""/></div>
<map name="task__mqtt_8c_a5af8e8260f5604ece0ee37eb577e0e26_icgraph" id="task__mqtt_8c_a5af8e8260f5604ece0ee37eb577e0e26_icgraph">
</map>
</div>

</div>
</div>
<a id="ae09eb75c3fed43ee85fd92c1f710b600"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae09eb75c3fed43ee85fd92c1f710b600">&#9670;&nbsp;</a></span>taskMQTTDeInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t taskMQTTDeInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Deinit the MQTT task and the wifi. </p>
<p>This function deactives MQTT/WiFi in station mode. It is necessary if the webGUI should be switched on.</p>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="task__mqtt_8c_source.html#l00251">251</a> of file <a class="el" href="task__mqtt_8c_source.html">task_mqtt.c</a>.</p>

</div>
</div>
<a id="ae7ad6f5bfc7cbfc9f6a223fcf697c8f6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae7ad6f5bfc7cbfc9f6a223fcf697c8f6">&#9670;&nbsp;</a></span>taskMQTTInit()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t taskMQTTInit </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Init the MQTT task and the wifi. </p>
<p>This init function initializes the wifi in station mode and the MQTT task.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="common_8h.html#a491fd65b6e1cef337b9a99ac4f6002bb" title="NVS key for wifi name (when connected as client!) ">NVS_STATIONNAME</a> </dd>
<dd>
<a class="el" href="common_8h.html#ad33120b91260e67b77c9e3888c47d990" title="NVS key for wifi password (when connected as client!) ">NVS_STATIONPW</a> </dd>
<dd>
<a class="el" href="common_8h.html#a90072969f5970a88eb341d777d1f9e7c" title="NVS key for the MQTT broker. ">NVS_MQTT_BROKER</a> </dd></dl>
<dl class="section note"><dt>Note</dt><dd>Please activate only if necessary by any configuration. </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>
<p>MQTT broker host name/ip </p>

<p class="definition">Definition at line <a class="el" href="task__mqtt_8c_source.html#l00144">144</a> of file <a class="el" href="task__mqtt_8c_source.html">task_mqtt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__mqtt_8c_source.html#l00281">taskMQTTPublish()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__mqtt_8c_ae7ad6f5bfc7cbfc9f6a223fcf697c8f6_cgraph.png" border="0" usemap="#task__mqtt_8c_ae7ad6f5bfc7cbfc9f6a223fcf697c8f6_cgraph" alt=""/></div>
<map name="task__mqtt_8c_ae7ad6f5bfc7cbfc9f6a223fcf697c8f6_cgraph" id="task__mqtt_8c_ae7ad6f5bfc7cbfc9f6a223fcf697c8f6_cgraph">
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__mqtt_8c_ae7ad6f5bfc7cbfc9f6a223fcf697c8f6_icgraph.png" border="0" usemap="#task__mqtt_8c_ae7ad6f5bfc7cbfc9f6a223fcf697c8f6_icgraph" alt=""/></div>
<map name="task__mqtt_8c_ae7ad6f5bfc7cbfc9f6a223fcf697c8f6_icgraph" id="task__mqtt_8c_ae7ad6f5bfc7cbfc9f6a223fcf697c8f6_icgraph">
</map>
</div>

</div>
</div>
<a id="a6afc039be68c1a831778fe33bd2412a9"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a6afc039be68c1a831778fe33bd2412a9">&#9670;&nbsp;</a></span>taskMQTTPublish()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_err_t taskMQTTPublish </td>
          <td>(</td>
          <td class="paramtype">char *&#160;</td>
          <td class="paramname"><em>topic_payload</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Publish data via MQTT. </p>
<p>This function publishes the given data. The parameter topic_payload will be split into the topic name and the corresponding payload to publish. The splitting is done by the currently set MQTT delimiter character, which can be modified with "AT MS". MQTT_DELIMITER will be used if no other character is set.</p>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="task__mqtt_8h.html#a028c7f08d77e361f5624a8259b88788a" title="Default mqtt delimter character. ">MQTT_DELIMITER</a> </dd></dl>
<dl class="section return"><dt>Returns</dt><dd>ESP_OK on success, ESP_FAIL otherwise </dd></dl>

<p class="definition">Definition at line <a class="el" href="task__mqtt_8c_source.html#l00281">281</a> of file <a class="el" href="task__mqtt_8c_source.html">task_mqtt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__commands_8c_source.html#l00944">cmdMq()</a>, and <a class="el" href="handler__vb_8c_source.html#l00071">handler_vb()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__mqtt_8c_a6afc039be68c1a831778fe33bd2412a9_cgraph.png" border="0" usemap="#task__mqtt_8c_a6afc039be68c1a831778fe33bd2412a9_cgraph" alt=""/></div>
<map name="task__mqtt_8c_a6afc039be68c1a831778fe33bd2412a9_cgraph" id="task__mqtt_8c_a6afc039be68c1a831778fe33bd2412a9_cgraph">
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__mqtt_8c_a6afc039be68c1a831778fe33bd2412a9_icgraph.png" border="0" usemap="#task__mqtt_8c_a6afc039be68c1a831778fe33bd2412a9_icgraph" alt=""/></div>
<map name="task__mqtt_8c_a6afc039be68c1a831778fe33bd2412a9_icgraph" id="task__mqtt_8c_a6afc039be68c1a831778fe33bd2412a9_icgraph">
</map>
</div>

</div>
</div>
<a id="a5a85685932ce7bf4b7239ab1b133cbdd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5a85685932ce7bf4b7239ab1b133cbdd">&#9670;&nbsp;</a></span>wifi_get_reason()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char* wifi_get_reason </td>
          <td>(</td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>err</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p class="reference">Referenced by <a class="el" href="task__mqtt_8c_source.html#l00064">wifi_mqtt_event_handler()</a>.</p>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__mqtt_8c_a5a85685932ce7bf4b7239ab1b133cbdd_icgraph.png" border="0" usemap="#task__mqtt_8c_a5a85685932ce7bf4b7239ab1b133cbdd_icgraph" alt=""/></div>
<map name="task__mqtt_8c_a5a85685932ce7bf4b7239ab1b133cbdd_icgraph" id="task__mqtt_8c_a5a85685932ce7bf4b7239ab1b133cbdd_icgraph">
</map>
</div>

</div>
</div>
<a id="abb6e44eb5d4a8e840debd2406c055252"></a>
<h2 class="memtitle"><span class="permalink"><a href="#abb6e44eb5d4a8e840debd2406c055252">&#9670;&nbsp;</a></span>wifi_mqtt_event_handler()</h2>

<div class="memitem">
<div class="memproto">
<table class="mlabels">
  <tr>
  <td class="mlabels-left">
      <table class="memname">
        <tr>
          <td class="memname">static esp_err_t wifi_mqtt_event_handler </td>
          <td>(</td>
          <td class="paramtype">void *&#160;</td>
          <td class="paramname"><em>ctx</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">system_event_t *&#160;</td>
          <td class="paramname"><em>event</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
  </td>
  <td class="mlabels-right">
<span class="mlabels"><span class="mlabel">static</span></span>  </td>
  </tr>
</table>
</div><div class="memdoc">

<p>Default event handler for Wifi. </p>
<p>This is basically the protocols/mqtt/tcp example's handler code. </p>

<p class="definition">Definition at line <a class="el" href="task__mqtt_8c_source.html#l00064">64</a> of file <a class="el" href="task__mqtt_8c_source.html">task_mqtt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__mqtt_8c_source.html#l00144">taskMQTTInit()</a>.</p>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__mqtt_8c_abb6e44eb5d4a8e840debd2406c055252_cgraph.png" border="0" usemap="#task__mqtt_8c_abb6e44eb5d4a8e840debd2406c055252_cgraph" alt=""/></div>
<map name="task__mqtt_8c_abb6e44eb5d4a8e840debd2406c055252_cgraph" id="task__mqtt_8c_abb6e44eb5d4a8e840debd2406c055252_cgraph">
</map>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="task__mqtt_8c_abb6e44eb5d4a8e840debd2406c055252_icgraph.png" border="0" usemap="#task__mqtt_8c_abb6e44eb5d4a8e840debd2406c055252_icgraph" alt=""/></div>
<map name="task__mqtt_8c_abb6e44eb5d4a8e840debd2406c055252_icgraph" id="task__mqtt_8c_abb6e44eb5d4a8e840debd2406c055252_icgraph">
</map>
</div>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a id="ad9332f302ae79b5195a71d791a9ccecd"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ad9332f302ae79b5195a71d791a9ccecd">&#9670;&nbsp;</a></span>mqtt_client</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">esp_mqtt_client_handle_t mqtt_client</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MQTT client handle, used for publishing. </p>

<p class="definition">Definition at line <a class="el" href="task__mqtt_8c_source.html#l00046">46</a> of file <a class="el" href="task__mqtt_8c_source.html">task_mqtt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__mqtt_8c_source.html#l00251">taskMQTTDeInit()</a>, <a class="el" href="task__mqtt_8c_source.html#l00144">taskMQTTInit()</a>, <a class="el" href="task__mqtt_8c_source.html#l00281">taskMQTTPublish()</a>, and <a class="el" href="task__mqtt_8c_source.html#l00064">wifi_mqtt_event_handler()</a>.</p>

</div>
</div>
<a id="aaf505e44bed8d31b21c3687d3d1a8326"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf505e44bed8d31b21c3687d3d1a8326">&#9670;&nbsp;</a></span>mqttactive</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t mqttactive = 0</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Is MQTT active? </p>

<p class="definition">Definition at line <a class="el" href="task__mqtt_8c_source.html#l00054">54</a> of file <a class="el" href="task__mqtt_8c_source.html">task_mqtt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__mqtt_8c_source.html#l00251">taskMQTTDeInit()</a>, <a class="el" href="task__mqtt_8c_source.html#l00144">taskMQTTInit()</a>, and <a class="el" href="task__mqtt_8c_source.html#l00281">taskMQTTPublish()</a>.</p>

</div>
</div>
<a id="a11201774aaac749961f9bb6dabeac94f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a11201774aaac749961f9bb6dabeac94f">&#9670;&nbsp;</a></span>wifi_config</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">wifi_config_t wifi_config</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Wifi config. </p>
<dl class="section note"><dt>Note</dt><dd>if this is NOT global -&gt; wifi is not working </dd></dl>

<p class="definition">Definition at line <a class="el" href="task__mqtt_8c_source.html#l00050">50</a> of file <a class="el" href="task__mqtt_8c_source.html">task_mqtt.c</a>.</p>

<p class="reference">Referenced by <a class="el" href="task__mqtt_8c_source.html#l00144">taskMQTTInit()</a>, and <a class="el" href="task__webgui_8c_source.html#l00627">wifiEnDisable()</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
